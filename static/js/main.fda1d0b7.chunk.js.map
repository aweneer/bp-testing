{"version":3,"sources":["assets/Next.png","assets/Bike.png","assets/Walker.png","assets/Transfer.png","assets/Waiting.png","assets/Car.png","assets/Swap.png","assets/Add.png","assets/Remove.png","assets/Normal.png","assets/Work.png","assets/School.png","assets/Doctor.png","components/app/Map.jsx","components/app/Header.jsx","components/app/Footer.jsx","components/app/OptionsSelect.jsx","components/api/SelectApi.jsx","components/api/Label.jsx","components/api/InputElement.jsx","components/api/ParametersPID.jsx","components/api/TransportPID.jsx","components/api/AccessibilityPID.jsx","components/api/PlannerPID.jsx","components/app/Planner.jsx","components/app/WizardSteps.jsx","components/api/PlannerWizardPID.jsx","components/app/PlannerWizard.jsx","components/app/Result.jsx","components/app/ResultWizard.jsx","components/app/ContextSteps.jsx","components/api/PlannerContextPID.jsx","components/app/PlannerContext.jsx","components/app/ResultContext.jsx","components/app/App.jsx","serviceWorker.js","index.js"],"names":["module","exports","Map","props","state","mapbox","undefined","startMarker","viaMarker","endMarker","transferPopups","route","routeLayers","addTransferPopup","bind","clearTransferPopups","clearPath","addMarker","addPath","coords","map","this","popups","length","i","remove","popup","mapboxgl","Popup","setLngLat","setHTML","addTo","push","setState","lon","lat","type","place","info","offset","setText","marker","Marker","setPopup","layerId","removeLayer","removeSource","listCoords","numLayers","colors","flyTo","center","togglePopup","addLayer","id","source","data","properties","geometry","coordinates","layout","paint","accessToken","process","container","mapContainer","style","zoom","addControl","NavigationControl","ref","el","React","Component","Header","className","to","Footer","href","OptionSelect","handleAccess","handleParameters","handleTransport","e","preventDefault","optionBox","document","getElementsByClassName","children","display","target","setAttribute","Fragment","onClick","optionactive","title","SelectApi","handleOnChange","setApi","value","onChange","defaultValue","disabled","Label","text","InputElement","isDefaultChecked","defaultChecked","name","ParametersPID","element","TransportPID","AccessibilityPID","PlannerPID","initialTimeDateSetup","handleFromInput","handleViaInput","handleToInput","handleSubmit","handleTimeAndDate","drawSuggestions","changeTransit","updateInputValues","swapInputFields","updateOptions","getOptions","via","date","Date","initApiTime","getFullYear","getMonth","getDate","getHours","getMinutes","currentDate","currentTime","getElementById","timedate","options","api","from","searchedName","searchedId","url","headers","Headers","set","btoa","fetch","method","then","response","json","places","embedded_type","start","startId","viaId","end","endId","timeInput","dateInput","time","substr","inputTimeDate","p","appendChild","createElement","suggestions","li","createTextNode","childNodes","update","ready","viaSection","addViaEls","remViaEls","fromOld","directPath","checked","fastestRoute","lowWalkingRoute","numTransfers","timeToTransfer","transferDistance","traveler_type","walker","bike","car","means","metro","firstChild","tram","bus","train","fenicular","ferry","special","standard","baby","wheelchair","luggage","cyclist","action","onSubmit","placeholder","active","src","add_icon","alt","remove_icon","swap_icon","OptionsSelect","Planner","selectedApi","createRef","getStart","getVia","getEnd","getTimeAndDate","setReady","getStartStopPointId","getViaStopPointId","getEndStopPointId","writeApi","writeStart","writeVia","writeEnd","writeStartId","writeViaId","writeEndId","writeTimeAndDate","writeOptions","bool","planner","WizardSteps","handlePreviousStep","handleNextStep","handleSearch","returnTask","step","prevBtnDisabled","nextBtnDisabled","currentStep","console","log","PlannerWizardPID","updateSelectedApi","vialFrom","vialTo","PlannerWizard","Result","results","updateResults","selectedResult","resultRef","setInputValues","createResultItem","renderResults","drawJourney","drawStartPoint","drawViaPoint","drawEndPoint","fetchData","showJourneyDetails","query","current","stop_area","coord","viaOn","JSON","stringify","journeys","resdiv","resitem","lastElementChild","removeChild","result_id","getAttribute","sections","routeCoords","transferCoords","possibleResults","geojson","color","display_informations","REACT_APP_COLOR_WALKING","mode","resultItem","deparr","departure_date_time","arrival_date_time","duration","Math","round","bike_icon","car_icon","walker_icon","next","next_icon","waiting","waiting_icon","vehicle","commercial_mode","code","innerHTML","transfer","transfer_icon","journey","l","detailsBtn","addEventListener","details","guide","section","detailId","resultNumber","label","checkSearch","checkViaRoute","checkResults","ResultWizard","ContextSteps","PlannerContextPID","context","getSelectedMeans","getCurrentWeather","meansCollection","floor","random","travel_type","querySelector","weather","normal_icon","htmlFor","work_icon","school_icon","doctor_icon","freetime_icon","PlannerContext","ResultContext","processOptions","createResultItemMM","sendRequestPid","sendRequestMM","parameters","initialVal","searchValue","routes","excludedMeans","mean","exclude","fromTime","toTime","totalDistance","segments","App","thru","exact","path","render","isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","URL","origin","contentType","get","status","indexOf","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.fda1d0b7.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA0AAAARCAYAAAAG/yacAAAABHNCSVQICAgIfAhkiAAAAN1JREFUKJGV0TFKQ0EQxvEf4gHeAQRzhHcE7SzjDSzs9QqewNjamDaCaBsU9AZqZat4AWNpo8XOwGNJNvGDBztv9z8z3wz0OMfIPzTHL74x3hSaBpTfLboWsIWfOM+wiGrP2GtBqQfF36vi71Hx2oTgPcCziE+jal+Dl4qX4+p/H0nS68mqSkO9BHgR8QSf2G1B8BUtziLewWR7DTRSVpCe5jhsVRoO4QP7OMjLehBdZM8BTFXLrtsb4yoeLXCEu2VtZKX7QfanOnutm8HjnNZaXQfwZsnmV6nbNHvqD6m+N2Pvvzt3AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,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\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABcAAAApCAYAAADeWrJ9AAAABHNCSVQICAgIfAhkiAAAAoZJREFUSImtlk9sTUEUh7+iVNG+aLrQBGVjIaKiVJomSASJsBM2ojbdSd5SxUKIxKppLCysGjaIpq+x8G+BTYM0KQvdKGktaFoprYiiz7WYM5n77ps75s7rL7m5eXN+8915M3PODGRXDrgNfAE+A8+BjgBOmRqBX0CUeGaBY5WAVwALFrB+vgKHQuG9DrB+hkPhbz3gC6h/CMCS0C/5KAv8kYdnBLXgmbUMKJI+Jd+AAyFgrQbgjwU8BxypBLwJ6E9APwHPgD2h0FXAFWAesyM0/GAotAo4JaPTsEFgNPb7Xgh4JyohNGQMlX3NmHQvoua/IQv4GvBXID+A88ByiXVKewEz/92+4L2x0d4FmhLxPonlUfMdAROoKXSqCpPiV1M84xJvEf8EngvbJcZxoNoSb4nFtc5JW78LXAtMifFEiicv8b5YWzyp8mnwS2J44RhAQTydifYeSrfqmmTHO6gd0uaAa0DOEusCfkv8A7AtHqxB7e007ZOOrx2eHZgFngPqHN4SXZROvf/x1QMPgCFgqQ+4DnXSR8B139H46qSAddYeX0z4DYEOyHse2LVY8DGBtmLSfwpYVyl4g8C+o9K9GngpbSPAykrgZzBVUKsRk82DeBStNN0SyNlE+25M0lwOhU8KYKsldlpiRQKmZ4t0nnF43otnvy3ouhRdkLfrMvRY3q6aVKZ2TKFKVsG49NQUHJ4SbUcVngi4iXs36Kmb9gFvxtSRAfzukrPi3+gyNQEfxfgEdTf00UNSTjA9shzwFFiPOo2Oom5WPtKnl3VRa4FX8vU3wGpPqNZh6TtkC96X4CiwNiMYVL2PUBlbdmuYAd6hakaohoGfWP51s60xo+qFU6J/Fd7ZY+iuhegAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAApCAYAAABp50paAAAABHNCSVQICAgIfAhkiAAAA81JREFUaIHNmVuITlEUx3+GiTBj8CC5lsQLuSSaUhOPItc8qXnwMIxClFLyJFMe3ApJcgmFXEYJCQ8u82AaIURu5U6DcZtxOx722u39Hd855zvnO/s786/TOWfvtdb+77P3XnutfSBbzARuAi+At8CebOm4xRrgM+D5rg6gV4a8nGAp8JH/O6uvr9lRSx/dgCcEd9YDvgOrsiKYNkYAbYR32AMuuGi8zIXRzowsOvwMeB8h8wM4VwIuJUMd8Ing6dyWHTV3qEdtQf7OtgM9M+TlBLOAx5hOfgPeALuzJOUCo4GLmI7+kfs7SuhPxgHLgSqHbfQFtgK/MSO6TZ5/yX1OAruJuOsv/hKoSdBoGLoCS4BWzKgeB4agAgsPuCH3JF75NAm4HybXaWxO0HA+DALuWnYfANOs+nNSXotyVH+BoTHb2EcC7rtFuNFSbEFNl2JwwLK3GhVSanRHddJDTcf98rwhZhuJuGulxSL4zFJeHpOAxnjR/ynPfkyT+mZ5r5b3D8RzXom420qgvvgWS/EyMDwGCYAm0d0UUN8g9Q1W2UMpmxujnUTc/UoaszHR0Ed5LwRzRacVqAyQaRaZ6VbZMovomALbSsQ9SAnUFztlEWlGbTFBKMNMq/oAmSqUg2pHrWWNPpi0sR0VfkYhDvf7UhaqpLFXSHqER0P9UacY91BbUj4sFDvn89RVYLYaDzhG+OlHIdxPWtw3RilVkOv6rwMDQoyDWjODQ+r3YDx3EFZhgpRDIXJRI3yS3G0xdISrMdPzNbnrrRjoGHpshFw1KqBYGSITtob1EdInItZwOWrodZzbSHph5xyx2wFMSMFePi+9GTOqV4jw0iOB25ictDYFUjbOWGReAQOLtOffh59a9ldEKR1GnTR4wDVgWJFk/OgCfBH7ep9uIddTx0W+SOsWEZHWQUv4J7AWN6naZIzz6IcaYQ84WoRNfyy9pRClsyL8nPxhYFpYK+3skPfxmHh6XUKbegt7RYxsqQoVJPRI2Gih0GnofKtM78ke6hQkLsah1qrLXD4RumFG0x+pbZLy7xSfoXUa1GCclB9lwB2pP+GaSKnOkXTifylP3V/MPjq1NHTcogtmnc4IkdN/EoeUgpRL7ER15AfQO0TugsgtcEnG9ZRej0rzfqN+fof9Bm2S+xTHnJyhDnP2XMjhwQyRv+qSlCvMw+SgiwrUqcREe+WOeDlBDeZwfVlM3UeiNzFtUq4wCfVXIWm4qOP6oOOhToVBmKR7e0Ib9aJ/MC1SLjEdRXZXETZGo9b+kVQYlQBRxzaFYBQOE5l/GZ1woTNfSoAAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAfCAYAAADnTu3OAAAABHNCSVQICAgIfAhkiAAAAlFJREFUSInN1s1rVGcUx/HPc3VAQW2jIopiKGKrROPCFxQRF2IrRRcuAsmlreKISwU34kb0L9D8AQqCSdwquHAh+IaVFmlKIihaRVGx1NeFLmzGp4s7Aze3cyeJZuGBgTvnd+53zuH87nMHjuI14iR8ToT6xWTFoylow2pMmQRgb+PiR1z4DNBFfF9MvsbXnwCbi38aX/JjLsJC/DZB4D48lnU5Ktbj14k36HesKRPvY8kEYN/hTj5R3OwcrMCVcQIPYBBXG4lQKFgq2/a3PT09IyGEMiuN9Pf3V/AAW/CwISSFwnt4g7UhhD9bdDaIDXiehzUDwhn8JNves6IYQnheq9X21mvO/E9vApyDu5ibpukzLCgAn/b19S2qT9KOt2N1+FJmhW2yg+NWTvujVqsdwXZcK8LKOlQf5wf8nF9OjHFkYGCgggGcw9mS+5vGvyX5BB/KbiqzRVU2+vkmWpSZ/yu0csKouCGzRVlskjNzPqY2yS2XnTo3S8zdMPV82YNwLy82G/kQrnd3dy9LkqRdwTYxxqHOzs73Q0ND9+tTXBqrwyqWJEkyiMVFMYSwCsewDrdxOK8XfbgTl9M0bcPMJj/WiLaurq7puIkdrYBVnMTuGGOlBTBUKpVd9dpqXsiPPA9rZU9BfwhhRgvgLByUveBOYTZeMXop+3E7TdOP2FovbhV/d3R03BoeHn4nO2hvMHrkKk7GGI/jmzFg0J4kSa/C2A3gZjzBX+gYBwzEGFfKTqYX2JjXTuOX8YKaxJ56p8g8VfOl/7dZjmmTAOz9D5B5sfvj/7TdAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADQAAAAwCAYAAABe6Vn9AAAABHNCSVQICAgIfAhkiAAAAvBJREFUaIHtmTFoFEEUhr9JFFKoaKEYECKIWIiwapki19keWtnIioVFLAIptLTQUrjSRi6llqKFnRswYKHsaqsQL2JhIbcnghLUsdhbvcvt253Z3bnkgh9Mkdu5///fzbu5ya6iHGeAk8CXku8vYj+wAbx1pP+XeeA7oMc0fvQ9nbExxmLS8c5VMYe3oZh0zJiGnLIo6JrF3Lq56EJ0ne1boSemIZXhvHnghXAtBL6aGhZwADib8fovkpbv1uTDA7I/ufW6DAb4KHhdr8tgBvgmmNysy2SAu4JXUJeBLxikbVA3pwW/38CROgxWBYOndYgLvBE8l6sKHxeENXCpqngOtwTP11WF7wjCXWBvVfEcjgm+GjhRVlQBnwTRVrW8RqwJ3rfLCl4QBDVwqmJYExYF7/dlBR8JgpX72JBDwE8hw3lbsYPApiC2WE9eI54JGe7ZCt0QhDZJih0XV4QcnzE/tgFJW2UJPawxrAn7kDulkfWGPVv+XiDZFs8JBq/6c8bJGtnhl0kKg+THH0iWzQPaSinPfTZ7tNa515VS6bwIuDoN3FdKZS7fJJAWpJQ6CswqpVT+R7ADyFultKCUqaIlnSS01sX3FBYWxr0HyDQao9+MkQXpt9zQ8H1fh2GoBwnDUPu+Lx2FnA2bLEopjVJKpwPQKysrOo92u60H3+NylMkyVFCz2cwVSGk2m86LKZtlqKAgCIxEgiBwXlDZLEMFxXFsJNLtdp0XVDbL0C4Xx7HRbtPr9YzmVaFslqGCoigyEjGdV4XSWQaXy/M8o2X2PM95y5XNwlYh3/fF/o3jWPu+77yYillGz3Jzc3MsLS3hef8O4FEU0Wq16HQ61XrJEtssmQVNMjbPhyaCXVeQAp5vea3on73angIYYpVn5M5J0XdKa211t6Uqtnl2Xcv9L2ins/sL0lqLR+m8a66wzZO1Qnnb8ri37CJPozwN6bBI8W+CC6zyTGcIfAAeA7Mkd/k7JA9xLwMvHQaXsMrzB3YecOdDp7k9AAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABHNCSVQICAgIfAhkiAAABBxJREFUWIXN2E1PIkkcBvBnGinBZKNtNy8NbXoO4sHDfIWZIyT4khiuawBDyB7WZDeTycRN4I6J7H4NT2rCjWzmC9hEbu6MiVGxgwqN8mbhpPawshnQgW5kxOcGVOf/SxXV9fIKg+c1gEWv1/u20Wj4KKUipVQAAELIFSHk0m63H56dnX0CsAvgeJAirwZ45rfJyclfCSFCKBSy+v3+cZ7n4Xa74Xa7AQCapkHTNOi6jkwmc7u9vd26u7u70nU9DSA9CLRvBEH4yHHcXTqdruXzeWY2BwcHbGtrq2axWFqCIHwYpu2N0+k8isfjFUqpaVh3ms0mi8ViFafT+RnA/JNkkiTFFEUpXVxcPBnWnWKxyGRZLns8nshAuNnZ2cTy8nJp6LKuBIPBks/n2zCNi0ajzR+NayccDt+Kovi7IZwkSbHn6LnuBIPBkpHhfqMoSl+cqqqMEMJUVTUMcLvdfdvIslxGr4njdDqP+k0IVVWZoigMAFMUxTASQN82mqYxl8v15VGcIAgf4/F4xQhOVVUGoOPzMICMMRaNRiuiKL5/ALRYLF97vee6Me2CRpFGgfV6nVmt1lYHjuf5jXQ6Xev1YCKR6EB8W1BVVZZIJIYCZIyxVCpVA7D+P3BqaurY7PJlpqDZ9qqqMp7nj9q+1w6H48ZUtR8MZIwxQRBqAGQOwGIoFLL2e/88d5aWlr4CWOS8Xu9bv98/PmpQd4LB4E8zMzPvuEaj4eN5ftSeBxEEAbVabY6jlIrtjeZLiiRJoJQ6OEqp8IKBIjdqSL9whJArTdNG7XiQ8/NzEEIuOULI5UsEFgoF2Gy2C25iYuJQ1/VRex6kVCrBbrcfcqenp58ymQwdNag7e3t7NycnJ38DgOJwOKqm1qEBli6z7aenp2sAvByA41ardZnP50fZYR1RVRWMMQ3AGQcAuq6ns9lsY5hFkskkcrnco7/lcjkkk8nvPpvNZhvlcvnPji/Hxsbumk3jBzn0GbJBN7jVapURQh7OCUEQPsRisethAbsxMHhEiEQi1wB+ebRrXS7X52KxODTgt0gYOGQVCgXmdrv/6fXXmZdluWyksCzLhoBt5Pj4eN9ziyRJFQBzvYDweDyRhYUFQ8hhJhAI6F6v9+eeuHZ8Pt9GOBy+fS7c6urqrcPhWO8v60T+8Rw9GQgEdNO4djweT0SW5bKmaUOHFQoFJklSxfCw9si8y+X6sra2dl2v158Mq1arLBKJXN/P1t4TwkxEUXxvtVpbm5ubdTOXRu3s7++zVCpVJ4RQw1dtGOwSfZ3n+XWO41wrKytjfr+fCIIASZIgSRKA/zabhUIB5XIZu7u7Nzs7OxbGmHa/fP1lptggwHZkAIszMzPvarXaHKXUQSkVAYAQcmmz2S7sdvvh/ZZpF8DZIEX+BXlY9mPXngHYAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABHNCSVQICAgIfAhkiAAAAgFJREFUOI2llTtv2lAYhh8gGKXQbuYwRLIHhnbjMlfcIrFZCsr/gR8UyaqMuYm0ZKoqYvDULkS4G4aJyqqUUskdWipuBiV5FkuffB5/fs/n4xDBXAN5IUTZ87y3APF4/Nt8Pv8EWMDNoUWhA7XXsiwParXahaqqyUwmQyaTAcC2bWzbZjqdznVd/75YLIrAzyNNUYnFYo/9ft8/Rbfb9SVJWgGFg6Z0Oq2Vy+XlSdMOpVJpCRT3XjMWiz0GLbq/v/eHw2GgNBqNroBzgDCALMsD0zSloByazSbNZjMwJ8MwzoQQd2vhda1Wu6hUKseyPUq1WkXTNAW4CgN5VVWTz7b9Q1GUJJAPCyHK67F4CblcDiHEZSgejy8nk8mbVCoFgGVZe3kNBgMAisXtzdQ0jWw2C8BsNiOdTv84232S7/v4vr9X27zu1rcQQnxpt9tHZ63RaPj1ev3oPaZp+kKIz2HXdT/atv2UuA4yHo9xXfc2DFjT6XTxUqHjOAtgGAZudF13er3es2WtVgvDMB6AD+vaK0mSVkH5jEYj37KswPwikchvYO9LK5RKpScfDoVCYQm8D+q+GI1GV51O56TINM11Z1uyQwfsuRDiTtM0VVEUOZfL/R/e0WjEeDzGcZyFYRgPrusWgF+nhGuu+PsLuPQ87x1AIpH46rruLTDc3IBN/gCPT/yk/yllywAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB0AAAAdCAYAAABWk2cPAAAABHNCSVQICAgIfAhkiAAAAqtJREFUSIntlr9LG2EYx78Xgu/dBc/kIJqCOSUd7CB6hEALJYlbSxcdHLuUOphJobi4CNLBqX9AF8GlpSCSSoYOoqXXuLQEHEqW4hR60iRvfl0jJN7boabkx51eQju0+Blfjufzfp+H5+WAG/43uD6+9QBQAYRlWY5xHOellL43TfMzgE8Avv9JKXG73esA1hVFqUejUXc0GhVGRkZwfHzcPDo6+nFycuIhhLwzDOMpAL2PIJbECCG5WCxWPT09ZXZUq1W2urp6TgipAVgB4BrINj4+/lCSpNre3t6Fra2LbDbLpqenS2NjYy8HcUo8z+cPDw+d+n5TKBTY8PBwDcD9voyCILxZWloy+jZekkqlLnie/waAd5wyEAhU6/V6R6H5+XmWyWR6BJRSNjc3xyilHeeLi4sVWZafODISQh5tbGz0zDGTybCJiYkOMaWUqarKtre3ey6TTqdZOBx+60gaDAZf7OzsWLatXXyVkDHGdF1niqJ8dSQNBAJpTdMsC7XEwWCQTU1N2QpbiKJYh8X69ByYpnlLEATbS01OTkIUReTzeaiqemUAjuNcAKRrk0qS9NouQXtLrWbcTi6XYx6Pp3St8JKV5eXlnnWxmuFV4v39feb3+z86lcZnZ2eL3UXi8bjlDFvi7pXZ3Nw0eZ7fcip1+Xy+L5qmdaxNd9F2ut/lQqHARkdHKQDFqRQAbnu93pKu67YiO0zTZJFIpEoISfQj/BXX5Xo2MzNTOjs7cyxsNBoskUicC4KQ7lt4CQfguSiKtWQy2bhOmM1mWSgUKhFCNAD+QaUt7hJCcgsLC8Xd3V3WnrxSqbCDgwO2trZmDA0NlQE4aqnT3xU3gHuhUOixYRgPms2mX5KkJqX0wufzfSgWi6/K5XIKQG3QZE6QAdz5m4Ib/i1+AsudvqDWHe+XAAAAAElFTkSuQmCC\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACUAAAAyCAYAAADbTRIgAAAABHNCSVQICAgIfAhkiAAAA4RJREFUWIXtmM9LFFEcwD+7m1Yj7pLpIgnqxVMgQtExQpIyAyv2Pwi6VFRbWXro0LEg1uoY0bWTeBM7hHhYjDKhDbZOriutFsZCbrXW+jo8V8bnm52Z3dndSx94l++8H599Pr/vO+PDGQeBk8AA0AuEgXagAHwDMsBHYHqrZR3OWxYhIAb8BYTD9gd4BASrIXQOuQtOZdT2dWsOz7hdgYy5bQJRt4v7NLGnwGU12NnZyfDwMP39/fT09NDV1cXm5ibpdJpkMsnMzAyTk5MsLS3p1nkMXHMrVySK8mtDoZAYHx8XGxsbwo58Pi9isZgIBoO6XbtRjtAA8r9pe6KOjg6RSCRsZVQSiYRob29XpQrAKTdC+4A18yRtbW0ilUq5FiqyuLgowuGwKpYB9juVumse3NDQIObm5soWKhKPx0UgEFDFbjmVypgHjo2NVSxUZHR0VJX64kTomHlQOBwWuVzOM6lcLidaW1tVsaOlhPxAxByIRCIYhuF0h20xDINIJKKGL9hJHTEHhoaGPBMqMjg4qIaOlervBzrMgd7eXo+VoK+vTw0dKtXfB+SA7b9XPp+nsbHRU6n19XWam5vNoSxwwKq/H3nwqorPt+s221Oqvx9YNQcymYzHSrCysrIrVKq/H1libDM/P++xEiwsLKghW6m35sD09LTHSjA1NaWG3tuNOY0psQWDQZHNZj1Lnmtra7qqYcBOai+wbh40MjLimVQ0GlWFfgIBJzv8EOVCjsfjFQvNzs7qLuQHToRAFvnfUe7AdDpdtlAqlRItLS26ur3Z0kLDKTRFXjKZdC1UosizPUs6bioTiVAoJGKxmKty2DAMXTl83amE7sXhCXBFDaovDt3d3RQKhR0vDhMTEywvL+vWeQpcdSplxY5K1IN2qVKhIueBtEdSq5gu/UppAC4iM3ClYvedLqo7U1aEgSFkUXgY+aGjgPyw8QF4A7wCZoEezfjfQBfKXVsrzmC9W8/rIVTktYVUAbnLdeEwSiI2tdf1kgJ4YSElgF1vErXiEPDLQuozspbT4qiEKJMfyG8UxzXPDiLflN9VcX1LDGTidJVQq7lTIL9//gDOap41Ib/01eXgB5BnSLdbv5BJuS78T6hu+J9Q3eAooVY7JajYJdT3wKeaGm1RKqGOQ4n7p4r8BO5ZPPtYSxEVPzDFzl16Ru2P0y6agDvAS+BEnV3s+QfWRa3X7QmX6wAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADkAAAAyCAYAAADm33NGAAAABHNCSVQICAgIfAhkiAAAAPpJREFUaIHtmUEOgkAMRd+gR/AUbryMnmfgkBK4gpfAhWHjoIK0A+n0JeyAzuOnpAyB/xlWXLuGsPSCSmMVe8MlrXCUutEw6LRoCItbMKGIJF3SCi5phSIkAa5Ax2tMs3Z0wC0Ad+As9cR2SBvYbtDORhE9mYx1WuNZTt5HwSKSdEkruKQVXNIKRUiK7fF8Ys4ejfYAkkjWda1acArtmtkG9Km0JHbi5pAkGWMULdA0zc9ztGsmSUr3x5jWtyS1ao7421WSXP03hScpwR4+wotI0iWt4JJWcEkruKQVXNIKLmkF/wlrhQpot16EMu0BeAAX4LTxYjTogfgEdpljkghB7DwAAAAASUVORK5CYII=\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFQAAAA0CAYAAAAUnx+bAAAABHNCSVQICAgIfAhkiAAAA+FJREFUeJzt3M9rHGUcx/HXmrVRLGX9fVAw4NGDPYgFiSagHsRCQ4NQEbToP6B/QRS8eTCHnkQwQlEwNUQR8SCYEEFPkoD0Iv4qUiqItmAtGuN6+M50J5tkkk1mdzKbfcNDZmcm8zz55PnxfT7zTWrK5yGcxNO4lpQqcRPuwL94tl5CA27AI0LEZ3BvCW3oFuO1HlVUxzgmhZB3Za6t4Xdcxl9o9qhNnXIzbsMRDGfOr+E8zuCtbjZgGMfxjhCsmSmruISLbeerUq5hBu8nn6fSH7roIX8LnhI98TgOZ66tJg05ktR7d8F1d5tf8SU+w9vJuan2m4oQtCHEmxRitg+HoeT4xqRUiVTE17G8k2/YraB3YkLMh0+0PWdVS7gh1eN7nMW8HYqYpRNB7xECnsRjYrVO+QeHkuOq9UJCxDNCxJ/28qDtBL1fCDiJYzn3Hcq5tl8pTMQsmwn6gFZ482BRFe0TPhICzoswrXCygp7CG9YH2k30KlbtFl0XMUsq6ATes1G8Kop5FeewoEciZqmLsOdNiXijo6OGhqq3OC8uLqaHh/Pu6zbplnAkPbG0tFRea/ZArVbqYDqGL/BKXQz3AZ1xFC+IdYfY0MB4XaZ3DsglFXHCRs2W8Rrm6/ovNCqSMSFgu4hXxII3LHppGkVcX5QGtDihJWJWm5+FaDNaW9KumCP9QCci5lLHioM37BtaIo5bL+KK1hDelTnS08C3RLIitkc2K6IXFmKOzIvJtx8ZsX5hyVKYiFnqYovWT4yInnhahDpZemKOLONdEWOZnp7uRj295Me2zz01R1KeU/6Lr6LKZTGUT+t+SDhlk5d0DfHOBIyNVXM6zZgjpcbVG8yRhYVqTqklmyOP42G8PDBHOieb+fJScu7R5OvHA3NkZ+RlvhCZI69idmCObM0wnhQinsCtmWtX8Il4TX4KH2CWgTnSTl7my28i9JrD5yL/YGCObEJe5stFIeAcFvHfdg87qOZIXubLD0LAD/F1pw8+SOZIXubLeSHgnF04TFn63RzJy3z5Rog4i++KqrAfzZGtMl+a+EqIeA4XulF5P5oj32aO10SHSReWS71qREP5pkZR5W8RI75ofezYDTY1R4hdAPrCHLkdf5bYFA3hITbRrCpaPbSXpD30U5E5cnSD2zRgR+Rmjgzcpp2xVebIVfGHDGclmSOD3rk122WOXM8YSanhDxmDJKaj6pExmPfqNO8p6aGmbSI/oIIWmjlyEOlq5shBcZt6ljnSz25TKZkj/eY2lZ45ss5tqupr5Az7InNkRvmmRhUzRzaQhhgN8Zu8D7+If/dQRS7g+TIb8D9TF3iHystS6gAAAABJRU5ErkJggg==\"","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAYAAAAeP4ixAAAABHNCSVQICAgIfAhkiAAAAJJJREFUaIHt2UEKhDAQBdHfg/fWOXnPYvQC0mAZ6oG4MrGCm5hK0lnAdt5rYrC+sSg1M3d/BgZBMITGEBpDaAyhMYTGEBpDaJYJ2ZKkk+OpF5iYu86r377XrSz0aRlCYwiNITSG0BhCc/2N/w6Nt994ZmLuvfI/CvBYgcIQGkNoDKExhMYQGkNoDKFZJuTaWL3eD1s0EGJwGEPVAAAAAElFTkSuQmCC\"","import React from \"react\";\r\nimport mapboxgl from \"mapbox-gl\";\r\n\r\n/**\r\n * Komponenta Mapy, využívající knihovnu MapboxGL\r\n */\r\nclass Map extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    /**\r\n     * State komponenty\r\n     * mapbox - komponenta si udržuje aktuální mapbox (mapu), se kterou lze interagovat a odkazovat se na ni\r\n     * ...Marker - je marker hlavních pozic trasy na mapě\r\n     * transferPopups - markery zvýrazňující místa přestupu na mapě\r\n     * route - objekty trasy složené z koordinátů GPS\r\n     * routeLayers - každá část trasy má jiné vlastnosti, každá z nich tedy musí být samostatnou vrstvou\r\n     */\r\n    this.state = {\r\n      mapbox: undefined,\r\n      startMarker: undefined,\r\n      viaMarker: undefined,\r\n      endMarker: undefined,\r\n      transferPopups: [],\r\n      route: undefined,\r\n      routeLayers: undefined\r\n    };\r\n    //Bindings\r\n    this.addTransferPopup = this.addTransferPopup.bind(this);\r\n    this.clearTransferPopups = this.clearTransferPopups.bind(this);\r\n    this.clearPath = this.clearPath.bind(this);\r\n    this.addMarker = this.addMarker.bind(this);\r\n    this.addPath = this.addPath.bind(this);\r\n  }\r\n\r\n  /**\r\n   * Vykreslí přestupový marker na mapě na zadaných souřadnicích GPS\r\n   * @param {*} coords \r\n   */\r\n  addTransferPopup(coords) {\r\n    var map = this.state.mapbox;\r\n    var popups = [];\r\n    if (this.state.transferPopups.length !== 0) {\r\n      for (let i = 0; i < this.state.transferPopups.length; i++) {\r\n        this.state.transferPopups[i].remove();\r\n      }\r\n    }\r\n    if (coords !== undefined && coords[0][0] !== undefined && coords[0][1] !== undefined) {\r\n      for (let i = 0; i < coords.length; i++) {\r\n        var popup = new mapboxgl.Popup({\"className\":\"transferPopup\"}).setLngLat([coords[i][0], coords[i][1]]).setHTML(\"Přestup\").addTo(map);\r\n        popups.push(popup);\r\n      }\r\n    }\r\n    this.setState({transferPopups: popups})\r\n  }\r\n\r\n  /**\r\n   * Vyčistí přestupní markery\r\n   */\r\n  clearTransferPopups() {\r\n    if (this.state.transferPopups.length !== 0) {\r\n      for (let i = 0; i < this.state.transferPopups.length; i++) {\r\n        this.state.transferPopups[i].remove();\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Přidá hlavní markery trasy na mapu na zadaných pozicích GPS\r\n   * Type určuje zda jde o start, průjezd, cíl\r\n   * Place je název místa/pozice\r\n   */\r\n  addMarker(lon, lat, type, place) {\r\n    // Prvně dojde k vymazání předchozích markerů\r\n    switch (type) {\r\n      case 0:\r\n        if (this.state.startMarker !== undefined) {\r\n          this.state.startMarker.remove();\r\n        }\r\n        break;\r\n      case 1:\r\n        if (this.state.viaMarker !== undefined) {\r\n          this.state.viaMarker.remove();\r\n        }\r\n        break;\r\n      case 2:\r\n        if (this.state.endMarker !== undefined) {\r\n          this.state.endMarker.remove();\r\n        }\r\n        break;\r\n      case 3:\r\n        if (this.state.viaMarker !== undefined) {\r\n          this.state.viaMarker.remove();\r\n        }\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    // Pro interakci s mapou se nastaví tento mapbox\r\n    var map = this.state.mapbox;\r\n    // Přidání markeru na zadaná místa, type určuje zda jde o start, průjezd či cíl.\r\n    if (lon !== undefined && lat !== undefined) {\r\n      switch (type) {\r\n        case 0:\r\n          var info = new mapboxgl.Popup({offset:30}).setText(\"Začátek trasy: \"+place);\r\n          var marker = new mapboxgl.Marker({\"color\":\"#ff0000\"}).setLngLat([lon, lat]).setPopup(info).addTo(map);\r\n          this.setState({ startMarker: marker });\r\n          break;\r\n        case 1:\r\n          info = new mapboxgl.Popup({offset:30}).setText(\"Průjezd přes: \"+place);\r\n          marker = new mapboxgl.Marker({\"color\":\"#fff400\"}).setLngLat([lon, lat]).setPopup(info).addTo(map);\r\n          this.setState({ viaMarker: marker });\r\n          break;\r\n        case 2:\r\n          info = new mapboxgl.Popup({offset:30}).setText(\"Cíl trasy: \"+place);\r\n          marker = new mapboxgl.Marker({\"color\":\"#00abff\"}).setLngLat([lon, lat]).setPopup(info).addTo(map);\r\n          this.setState({ endMarker: marker });\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    }\r\n    // Obnovení stavu mapy na aktualizovanou verzi\r\n    this.setState({ mapbox: map });\r\n  }\r\n\r\n  /**\r\n   * Metoda k vyčištění mapy. Smaže vykreslenou trasu.\r\n   * Postupně odebírá všechny vrstvy.\r\n   */\r\n  clearPath() {\r\n    var map = this.state.mapbox;\r\n    if (this.state.routeLayers !== undefined) {\r\n      for (let i = 0; i < this.state.routeLayers; i++) {\r\n        var layerId = \"path_layer_\"+i;\r\n        map.removeLayer(layerId);\r\n        map.removeSource(layerId);\r\n      }\r\n      this.setState({mapbox: map, routeLayers: 0});\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Metoda pro vykreslení trasy\r\n   * \r\n   * @param {*} listCoords - seznam koordinátů\r\n   * @param {*} numLayers - počet vrstev, které se mají vykreslit\r\n   * @param {*} colors - požadované barvy každé části trasy\r\n   */\r\n  addPath(listCoords, numLayers, colors) {\r\n    var map = this.state.mapbox;\r\n    map.flyTo({center: [listCoords[0][0][0], listCoords[0][0][1]]});\r\n    this.state.startMarker.togglePopup();\r\n    this.state.endMarker.togglePopup();\r\n    for (let i = 0; i < numLayers; i++) {\r\n      var layerId = \"path_layer_\"+i;\r\n      map.addLayer({\r\n        id: layerId,\r\n        type: \"line\",\r\n        source: {\r\n          type: \"geojson\",\r\n          data: {\r\n            type: \"Feature\",\r\n            properties: {},\r\n            geometry: {\r\n              type: \"LineString\",\r\n              coordinates: listCoords[i]\r\n            }\r\n          }\r\n        },\r\n        layout: {\r\n          \"line-join\": \"round\",\r\n          \"line-cap\": \"round\"\r\n        },\r\n        paint: {\r\n          \"line-color\": colors[i] !== undefined ? colors[i] : \"#888\",\r\n          \"line-width\": 6\r\n        }\r\n      });\r\n    }\r\n    this.setState({ mapbox: map });\r\n    this.setState({ routeLayers: numLayers });\r\n  }\r\n\r\n  /**\r\n   * Při vykreslení komponenty se vytvoří nová mapa, která se zapíše do state komponenty Map\r\n   * Mapa je centrována na střed Prahy\r\n   */\r\n  componentDidMount() {\r\n    mapboxgl.accessToken = process.env.REACT_APP_MAPBOX_TOKEN;\r\n    var map = new mapboxgl.Map({\r\n      container: this.mapContainer,\r\n      style: \"mapbox://styles/mapbox/streets-v11\",\r\n      center: [14.42076, 50.08804],\r\n      zoom: 12\r\n    });\r\n    map.addControl(new mapboxgl.NavigationControl());\r\n    this.setState({ mapbox: map });\r\n  }\r\n\r\n  /**\r\n   * Před odstraněním komponenty z vykreslení na aktuální stránce se smaže aktuální mapbox ze state\r\n   */\r\n  componentWillUnmount() {\r\n    if (this.state.mapbox !== undefined) {\r\n      this.state.mapbox.remove();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Vykreslení mapy návratem prvku div, který mapu obsahuje\r\n   */\r\n  render() {\r\n    return <div id=\"map\" ref={el => (this.mapContainer = el)} />;\r\n  }\r\n}\r\n\r\nexport default Map;\r\n","import React from \"react\";\r\nimport {Link} from \"react-router-dom\";\r\n\r\n/**\r\n * Header aplikace.\r\n * Z headeru se lze navigovat třemi typy vyhledávače (formuláře, kontextového wizardu a normálního form-wizardu)\r\n */\r\nclass Header extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    //refs\r\n    //bindings\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <header className=\"header\">\r\n        <label className=\"headerLabel\">Prototyp webového klienta vyhledávače intermodálních dopravích spojení.</label>\r\n        <label className=\"headerLabel\"><Link to=\"/form\">Formulářový typ</Link>/<Link to=\"/wizard\">Contextový wizard</Link>/<Link to=\"/old_wizard\">Klasický wizard</Link></label>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Header;\r\n","import React from \"react\";\r\n\r\n/**\r\n * Footer aplikace\r\n */\r\nclass Footer extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return (\r\n    <footer>Vytvořil <a href=\"mailto:hlavaj28@fel.cvut.cz\">Jan Hlaváč</a> během studia na <a href=\"https://www.fel.cvut.cz/\">FEL ČVUT</a> v rámci závěrečné práce v akademickém roce 2019/2020.</footer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Footer;\r\n","import React from \"react\";\r\n\r\n/**\r\n * Komponenta pro interakci s jednotlivými nastaveními parametrů ve formulářovém zadávání\r\n * Jde o komponentu, která skrývá či odkrývá jednotlivá okna parametrů.\r\n */\r\nclass OptionSelect extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleAccess = this.handleAccess.bind(this);\r\n    this.handleParameters = this.handleParameters.bind(this);\r\n    this.handleTransport = this.handleTransport.bind(this);\r\n  }\r\n\r\n  // Interakce s HTML prvkem obsahujícím základní parametry\r\n  handleParameters(e) {\r\n    e.preventDefault();\r\n    var optionBox = document.getElementsByClassName(\"options-box\");\r\n    if (optionBox[0].children[0].style.display === \"none\") {\r\n      optionBox[0].children[0].style.display = \"block\";\r\n      e.target.setAttribute(\"optionactive\", \"true\");\r\n      optionBox[0].children[0].setAttribute(\"optionactive\",\"true\");\r\n      document.getElementsByClassName(\"options\")[0].children[1].setAttribute(\"optionactive\", \"false\");\r\n      document.getElementsByClassName(\"options\")[0].children[2].setAttribute(\"optionactive\", \"false\");\r\n    } else {\r\n      optionBox[0].children[0].style.display = \"none\";\r\n      e.target.setAttribute(\"optionactive\", \"false\");\r\n      optionBox[0].children[0].setAttribute(\"optionactive\",\"false\");\r\n    }\r\n    optionBox[0].children[1].style.display = \"none\";\r\n    optionBox[0].children[1].setAttribute(\"optionactive\", \"false\");\r\n    optionBox[0].children[2].style.display = \"none\";\r\n    optionBox[0].children[2].setAttribute(\"optionactive\", \"false\");\r\n  }\r\n\r\n// Interakce s HTML prvkem obsahujícím dopravní prostředky\r\n  handleTransport(e) {\r\n    e.preventDefault();\r\n    var optionBox = document.getElementsByClassName(\"options-box\");\r\n    optionBox[0].children[0].style.display = \"none\";\r\n    optionBox[0].children[0].setAttribute(\"optionactive\", \"false\");\r\n    if (optionBox[0].children[1].style.display === \"none\") {\r\n      optionBox[0].children[1].style.display = \"block\";\r\n      e.target.setAttribute(\"optionactive\", \"true\");\r\n      optionBox[0].children[1].setAttribute(\"optionactive\",\"true\");\r\n      document.getElementsByClassName(\"options\")[0].children[0].setAttribute(\"optionactive\", \"false\");\r\n      document.getElementsByClassName(\"options\")[0].children[2].setAttribute(\"optionactive\", \"false\");\r\n    } else {\r\n      optionBox[0].children[1].style.display = \"none\";\r\n      e.target.setAttribute(\"optionactive\", \"false\");\r\n      optionBox[0].children[1].setAttribute(\"optionactive\",\"false\");\r\n    }\r\n    optionBox[0].children[2].style.display = \"none\";\r\n    optionBox[0].children[2].setAttribute(\"optionactive\", \"false\");\r\n  }\r\n\r\n  // Interakce s HTML prvkem obsahujícím přístupnost cestujících\r\n  handleAccess(e) {\r\n    e.preventDefault();\r\n    var optionBox = document.getElementsByClassName(\"options-box\");\r\n    optionBox[0].children[0].style.display = \"none\";\r\n    optionBox[0].children[0].setAttribute(\"optionactive\", \"false\");\r\n    optionBox[0].children[1].style.display = \"none\";\r\n    optionBox[0].children[1].setAttribute(\"optionactive\", \"false\");\r\n    if (optionBox[0].children[2].style.display === \"none\") {\r\n      optionBox[0].children[2].style.display = \"block\";\r\n      e.target.setAttribute(\"optionactive\", \"true\");\r\n      optionBox[0].children[2].setAttribute(\"optionactive\",\"true\");\r\n      document.getElementsByClassName(\"options\")[0].children[0].setAttribute(\"optionactive\", \"false\");\r\n      document.getElementsByClassName(\"options\")[0].children[1].setAttribute(\"optionactive\", \"false\");\r\n    } else {\r\n      optionBox[0].children[2].style.display = \"none\";\r\n      e.target.setAttribute(\"optionactive\", \"false\");\r\n      optionBox[0].children[2].setAttribute(\"optionactive\",\"false\");\r\n    }\r\n    \r\n  }\r\n\r\n  /**\r\n   * Vykreslení tří tlačítek, se kterými uživatel může interagovat a zobrazovat/skrývat tak samostatné parametry.\r\n   */\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <button onClick={this.handleParameters} optionactive=\"false\" title=\"Volba parametrů spoje\">Parametry spojení</button>\r\n        <button onClick={this.handleTransport} optionactive=\"false\" title=\"Výběr dopravních prostředků\">Dopravní prostředky</button>\r\n        <button onClick={this.handleAccess} optionactive=\"false\" title=\"Charakteristika cestujícího\">Přístupnost</button>\r\n      </React.Fragment>\r\n    )\r\n  }\r\n}\r\n\r\nexport default OptionSelect;","import React from \"react\";\r\n\r\nclass SelectApi extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handleOnChange = this.handleOnChange.bind(this);\r\n  }\r\n\r\n  handleOnChange(e) {\r\n    this.props.setApi(e.target.value);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <label className=\"textLabel\">Oblast:</label>\r\n        <select\r\n          id=\"api_select\"\r\n          onChange={this.handleOnChange}\r\n          defaultValue=\"pid\"\r\n        >\r\n          <option value=\"dpmul\" disabled={true}>\r\n            DÚK\r\n          </option>\r\n          <option value=\"pid\">PID</option>\r\n          <option value=\"ids-liberec\" disabled={true}>\r\n            IDS Liberec\r\n          </option>\r\n          <option value=\"mmplanner\">Multimodal Planner</option>\r\n        </select>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default SelectApi;\r\n","import React from \"react\";\r\n\r\nclass Label extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    //refs\r\n    //bindings\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <label className={this.props.className} title={this.props.title}>{this.props.text}</label>\r\n    )\r\n  }\r\n}\r\n\r\nexport default Label;\r\n","import React from \"react\";\r\n\r\nclass InputElement extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    //refs\r\n    //bindings\r\n    this.isDefaultChecked = this.isDefaultChecked.bind(this);\r\n  }\r\n\r\n  isDefaultChecked() {\r\n    if (this.props.defaultChecked === true) {\r\n      return true;\r\n    } else {\r\n      return false;\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div>\r\n        <label>\r\n          <input\r\n            type={this.props.type}\r\n            name={this.props.name}\r\n            className={this.props.className}\r\n            id={this.props.id}\r\n            defaultChecked = {this.isDefaultChecked()}\r\n          ></input>\r\n          {this.props.text}\r\n      </label>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default InputElement;\r\n","import React from \"react\";\r\nimport Label from \"./Label\";\r\nimport InputElement from \"./InputElement\";\r\n\r\n\r\nclass ParametersPID extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n    };\r\n    //refs\r\n    //bindings\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n      className=\"optionsSettings\"\r\n      id=\"options-box-parameters\"\r\n      display=\"none\"\r\n    >\r\n      <Label className={\"optionTitle\"} text={\"Trasa\"}></Label>\r\n      <InputElement element={\"input\"} type={\"radio\"} name={\"route\"} className={\"route\"} id={\"fastestRoute\"} text={\"Nejrychlejší\"} defaultChecked={true}></InputElement>\r\n      <InputElement element={\"input\"} type={\"radio\"} name={\"route\"} className={\"route\"} id={\"lowWalkingRoute\"} text={\"Nejméně pěsí chůze\"} defaultChecked={false}></InputElement>\r\n      <Label className={\"optionTitle\"} text={\"Přestupy\"}></Label>\r\n      \r\n      <Label className={\"transfersLabel\"} text={\"Maximální počet přestupů\"}></Label>\r\n      <select defaultValue=\"-1\" id=\"numTransfers\">\r\n        <option value=\"-1\">Neomezeno</option>\r\n        <option value=\"0\">0</option>\r\n        <option value=\"1\">1</option>\r\n        <option value=\"2\">2</option>\r\n        <option value=\"3\">3</option>\r\n        <option value=\"4\">4</option>\r\n        <option value=\"5\">5</option>\r\n      </select>\r\n      <Label className={\"transfersLabel\"} text={\"Čas na přestup:\"}></Label>\r\n      <select defaultValue=\"10\" id=\"timeToTransfer\">\r\n        <option value=\"5\">Alespoň 5 minut</option>\r\n        <option value=\"10\">Alespoň 10 minut</option>\r\n        <option value=\"15\">Alespoň 15 minut</option>\r\n      </select>\r\n      <Label className={\"transfersLabel\"} text={\"Maximální vzdálenost mezi přestupy:\"}></Label>\r\n      <select defaultValue=\"100m\" id=\"transferDistance\">\r\n        <option value=\"100\">100 m</option>\r\n        <option value=\"200\">200 m</option>\r\n        <option value=\"300\">300 m</option>\r\n      </select>\r\n    </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ParametersPID;\r\n","import React from \"react\";\r\nimport Label from \"./Label\";\r\nimport InputElement from \"./InputElement\";\r\n//import SelectElement from \"./SelectElement\";\r\n\r\nclass TransportPID extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    //refs\r\n    //bindings\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div\r\n        className=\"optionsSettings\"\r\n        id=\"options-box-transport\"\r\n        display=\"none\"\r\n      >\r\n        <Label className={\"optionTitle\"} text={\"Na trase chci využít\"}></Label>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"ownTransport\"} className={\"traveler_type\"} id={\"walker\"} text={\"Pouze peší chůze\"} defaultChecked={true}></InputElement>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"ownTransport\"} className={\"traveler_type\"} id={\"cyclist\"} text={\"Kolo nebo koloběžku\"} defaultChecked={false}></InputElement>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"ownTransport\"} className={\"traveler_type\"} id={\"motorist\"} text={\"Osobní automobil\"} defaultChecked={false}></InputElement>\r\n        <Label className={\"optionTitle\"} text={\"Výběr dopravních prostředků\"}></Label>\r\n        <div className=\"optionMeans\">\r\n          <label className=\"means\">\r\n            <input type=\"checkbox\" id=\"Metro\" defaultChecked></input>\r\n            Metro\r\n          </label>\r\n          <label className=\"means\">\r\n            <input type=\"checkbox\" id=\"Tramway\" defaultChecked></input>\r\n            Tramvaj\r\n          </label>\r\n          <label className=\"means\">\r\n            <input type=\"checkbox\" id=\"Bus\" defaultChecked></input>\r\n            Autobus\r\n          </label>\r\n          <label className=\"means\">\r\n            <input type=\"checkbox\" id=\"Train\" defaultChecked></input>\r\n            Příměstský vlak\r\n          </label>\r\n          <label className=\"means\">\r\n            <input type=\"checkbox\" id=\"Funicular\" defaultChecked></input>\r\n            Lanovka\r\n          </label>\r\n          <label className=\"means\">\r\n            <input type=\"checkbox\" id=\"Ferry\" defaultChecked></input>\r\n            Přívoz\r\n          </label>\r\n        </div>\r\n        <Label className={\"optionTitle\"}  title={\"Momentálně nedostupné\"} text={\"Doplňkové služby\"}></Label>\r\n        <label title=\"Momentálně nedostupné\">\r\n          <input\r\n            type=\"checkbox\"\r\n            className=\"journeyFeature\"\r\n            id=\"taxi\"\r\n            disabled\r\n          ></input>\r\n          Taxi\r\n        </label>\r\n        <label title=\"Momentálně nedostupné\">\r\n          <input\r\n            type=\"checkbox\"\r\n            className=\"journeyFeature\"\r\n            id=\"uber\"\r\n            disabled\r\n          ></input>\r\n          UBER\r\n        </label>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default TransportPID;\r\n","import React from \"react\";\r\nimport Label from \"./Label\";\r\nimport InputElement from \"./InputElement\";\r\n//import SelectElement from \"./SelectElement\";\r\n\r\nclass AccessibilityPID extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {};\r\n    //refs\r\n    //bindings\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"optionsSettings\" id=\"options-box-access\" display=\"none\">\r\n        <Label className={\"optionTitle\"} text={\"Jsem cestující\"}></Label>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"transportRequest\"} className={\"traveler_type\"} id={\"standard\"} text={\"Bez dalších potřeb\"} defaultChecked={true}></InputElement>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"transportRequest\"} className={\"traveler_type\"} id={\"slow_walker\"} text={\"S kočárkem\"} defaultChecked={false}></InputElement>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"transportRequest\"} className={\"traveler_type\"} id={\"wheelchair\"} text={\"S vozíčkem\"} defaultChecked={false}></InputElement>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"transportRequest\"} className={\"traveler_type\"} id={\"luggage\"} text={\"S těžkými zavazadly\"} defaultChecked={false}></InputElement>\r\n        <InputElement element={\"input\"} type={\"radio\"} name={\"transportRequest\"} className={\"traveler_type\"} id={\"cyclist\"} text={\"S kolem do MHD\"} defaultChecked={false}></InputElement>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default AccessibilityPID;\r\n","import React from \"react\";\r\nimport OptionsSelect from \"../app/OptionsSelect\";\r\nimport SelectApi from \"./SelectApi\";\r\nimport ParametersPID from \"./ParametersPID\";\r\nimport TransportPID from \"./TransportPID\";\r\nimport swap_icon from \"../../assets/Swap.png\";\r\nimport add_icon from \"../../assets/Add.png\";\r\nimport remove_icon from \"../../assets/Remove.png\";\r\nimport AccessibilityPID from \"./AccessibilityPID\";\r\n\r\nclass PlannerPID extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.initialTimeDateSetup = this.initialTimeDateSetup.bind(this);\r\n    this.handleFromInput = this.handleFromInput.bind(this);\r\n    this.handleViaInput = this.handleViaInput.bind(this);\r\n    this.handleToInput = this.handleToInput.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleTimeAndDate = this.handleTimeAndDate.bind(this);\r\n    this.drawSuggestions = this.drawSuggestions.bind(this);\r\n    this.setApi = this.setApi.bind(this);\r\n    this.changeTransit = this.changeTransit.bind(this);\r\n    this.updateInputValues = this.updateInputValues.bind(this);\r\n    this.swapInputFields = this.swapInputFields.bind(this);\r\n    this.updateOptions = this.updateOptions.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.state = {\r\n      via: false\r\n    };\r\n  }\r\n\r\n  initialTimeDateSetup() {\r\n    var date = new Date();\r\n    var initApiTime =\r\n      date.getFullYear() +\r\n      \"\" +\r\n      (date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1) +\r\n      \"\" +\r\n      (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()) +\r\n      \"T\" +\r\n      (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) +\r\n      \"\" +\r\n      (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n      \"00\";\r\n    var currentDate =\r\n      date.getFullYear() +\r\n      \"-\" +\r\n      (date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1) +\r\n      \"-\" +\r\n      (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate());\r\n    var currentTime =\r\n      (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) +\r\n      \":\" +\r\n      (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes());\r\n    document.getElementById(\"input_date\").value = currentDate;\r\n    document.getElementById(\"input_time\").value = currentTime;\r\n    this.props.timedate(initApiTime);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initialTimeDateSetup();\r\n    let options = document.getElementsByClassName(\"options-box\");\r\n    for (let i = 0; i < options[0].children.length; i++) {\r\n      options[0].children[i].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  setApi(api) {\r\n    this.props.setApi(api);\r\n  }\r\n\r\n  handleFromInput(e) {\r\n    this.setState({ from: e.target.value });\r\n    var searchedName = e.target.value;\r\n    var searchedId = e.target.value;\r\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\"+e.target.value;\r\n    var headers = new Headers();\r\n    headers.set('Authorization', 'Basic ' + btoa(process.env.REACT_APP_NAVITIA_TOKEN));\r\n    fetch(url, {method: 'GET', headers: headers})\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      if (json.places !== undefined) {\r\n        for (let i = 0; i < json.places.length; i++) {\r\n          if (json.places[i].embedded_type === \"stop_area\") {\r\n            searchedName = json.places[i].name;\r\n            searchedId = json.places[i].id;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    })\r\n\r\n    this.props.start(searchedName);\r\n    this.props.startId(searchedId);\r\n\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleViaInput(e) {\r\n    this.props.via(e.target.value);\r\n    this.props.viaId(e.target.value);\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleToInput(e) {\r\n    this.setState({ to: e.target.value });\r\n    var searchedName = e.target.value;\r\n    var searchedId = e.target.value;\r\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\"+e.target.value;\r\n    var headers = new Headers();\r\n    headers.set('Authorization', 'Basic ' + btoa(process.env.REACT_APP_NAVITIA_TOKEN));\r\n    fetch(url, {method: 'GET', headers: headers})\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      if (json.places !== undefined) {\r\n        for (let i = 0; i < json.places.length; i++) {\r\n          if (json.places[i].embedded_type === \"stop_area\") {\r\n            searchedName = json.places[i].name;\r\n            searchedId = json.places[i].id;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    })\r\n    this.props.end(searchedName);\r\n    this.props.endId(searchedId);\r\n\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleTimeAndDate(e) {\r\n    //e.preventDefault();\r\n    let timeInput = document.getElementById(\"input_time\");\r\n    let dateInput = document.getElementById(\"input_date\");\r\n    var time = timeInput.value.substr(0, 2) + timeInput.value.substr(3, 2);\r\n    var date =\r\n      dateInput.value.substr(0, 4) +\r\n      dateInput.value.substr(5, 2) +\r\n      dateInput.value.substr(8, 2);\r\n    let inputTimeDate = date + \"T\" + time;\r\n    this.props.timedate(inputTimeDate);\r\n  }\r\n\r\n  drawSuggestions() {\r\n    var p = document.getElementById(\"suggestions\");\r\n    p.appendChild(document.createElement(\"ul\"));\r\n    for (let i = 0; i < this.state.suggestions.length; i++) {\r\n      let li = document.createElement(\"li\");\r\n      li.appendChild(document.createTextNode(this.state.suggestions[i]));\r\n      p.childNodes[0].appendChild(li);\r\n    }\r\n  }\r\n\r\n  updateInputValues() {\r\n    var from = document.getElementById(\"input_from\");\r\n    var to = document.getElementById(\"input_to\");\r\n    this.props.start(from.value);\r\n    this.props.end(to.value);\r\n  }\r\n\r\n  updateOptions() {\r\n    this.getOptions();\r\n  }\r\n  handleSubmit(e) {\r\n    if (document.getElementById(\"input_from\").value.length < 1 || document.getElementById(\"input_to\").value.length < 1) {\r\n      e.preventDefault();\r\n      document.getElementById(\"input_from\").setAttribute(\"warning\", \"true\");\r\n      document.getElementById(\"input_to\").setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.preventDefault();\r\n      if (this.props.update !== undefined) {\r\n        this.updateInputValues();\r\n        this.props.update();\r\n      } else {\r\n        this.props.ready(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  changeTransit(e) {\r\n    this.getOptions();\r\n    var viaSection = document.getElementById(\"via\");\r\n    if (this.state.via === false) {\r\n      viaSection.setAttribute(\"active\", \"true\");\r\n      let addViaEls = document.getElementsByClassName(\"addVia\");\r\n      let remViaEls = document.getElementsByClassName(\"removeVia\");\r\n      addViaEls[0].style.display = \"none\";\r\n      remViaEls[0].style.display = \"inline-block\";\r\n      this.setState({ via: true });\r\n    } else {\r\n      document.getElementById(\"input_via\").value = \"\";\r\n      this.props.via(document.getElementById(\"input_via\").value);\r\n      viaSection.setAttribute(\"active\", \"false\");\r\n      let addViaEls = document.getElementsByClassName(\"addVia\");\r\n      let remViaEls = document.getElementsByClassName(\"removeVia\");\r\n      addViaEls[0].style.display = \"inline-block\";\r\n      remViaEls[0].style.display = \"none\";\r\n      this.setState({ via: false });\r\n    }\r\n  }\r\n\r\n  swapInputFields() {\r\n    this.getOptions();\r\n    var fromOld = document.getElementById(\"input_from\").value;\r\n    var to = document.getElementById(\"input_to\");\r\n    var from = document.getElementById(\"input_from\");\r\n    from.value = to.value;\r\n    to.value = fromOld;\r\n    this.props.start(from.value);\r\n    this.props.startId(from.value);\r\n    this.props.end(to.value);\r\n    this.props.endId(to.value);\r\n    this.setState({ from: from.value });\r\n    this.setState({ to: to.value });\r\n  }\r\n\r\n  getOptions() {\r\n    var options = {\r\n      directPath: document.getElementById(\"directPath\").checked,\r\n      fastestRoute: document.getElementsByClassName(\"route\")[0].checked,\r\n      lowWalkingRoute: document.getElementsByClassName(\"route\")[1].checked,\r\n      numTransfers: document.getElementById(\"numTransfers\").value,\r\n      timeToTransfer: document.getElementById(\"timeToTransfer\").value,\r\n      transferDistance: document.getElementById(\"transferDistance\").value,\r\n      traveler_type: {\r\n        walker: document.getElementsByClassName(\"traveler_type\")[0].checked,\r\n        bike: document.getElementsByClassName(\"traveler_type\")[1].checked,\r\n        car: document.getElementsByClassName(\"traveler_type\")[2].checked\r\n      },\r\n      means: {\r\n        metro: document.getElementsByClassName(\"means\")[0].firstChild.checked,\r\n        tram: document.getElementsByClassName(\"means\")[1].firstChild.checked,\r\n        bus: document.getElementsByClassName(\"means\")[2].firstChild.checked,\r\n        train: document.getElementsByClassName(\"means\")[3].firstChild.checked,\r\n        fenicular: document.getElementsByClassName(\"means\")[4].firstChild\r\n          .checked,\r\n        ferry: document.getElementsByClassName(\"means\")[5].firstChild.checked\r\n      },\r\n      special: {\r\n        standard: document.getElementsByClassName(\"traveler_type\")[3].checked,\r\n        baby: document.getElementsByClassName(\"traveler_type\")[4].checked,\r\n        wheelchair: document.getElementsByClassName(\"traveler_type\")[5].checked,\r\n        luggage: document.getElementsByClassName(\"traveler_type\")[6].checked,\r\n        cyclist: document.getElementsByClassName(\"traveler_type\")[7].checked\r\n      }\r\n    };\r\n    this.props.getOptions(options);\r\n  }\r\n  \r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"input\"\r\n        id=\"inputForm\"\r\n        action=\"/form_result\"\r\n        onSubmit={this.handleSubmit}\r\n        onChange={this.getOptions}\r\n        onClick={this.getOptions}\r\n      >\r\n        <div className=\"plannerBox\">\r\n          <div className=\"box\" id=\"searchBox\">\r\n            <div className=\"inputFieldDiv\">\r\n              <label className=\"textLabel\">Odkud:</label>\r\n              <input\r\n                className=\"locations\"\r\n                id=\"input_from\"\r\n                type=\"form\"\r\n                placeholder=\"Zadejte počáteční bod\"\r\n                onChange={this.handleFromInput}\r\n              ></input>\r\n            </div>\r\n            <div className=\"inputFieldDiv\" id=\"via\" active=\"false\">\r\n              <label className=\"addVia\" onClick={this.changeTransit}>\r\n                <img\r\n                  className=\"viaBtn\"\r\n                  src={add_icon}\r\n                  alt=\"+\"\r\n                  title=\"Přidat průjezdní bod\"\r\n                ></img>\r\n                <label id=\"addViaText\">Přidat průjezd</label>\r\n              </label>\r\n              <label className=\"removeVia\" style={{ display: \"none\" }}>\r\n                <img\r\n                  className=\"viaBtn\"\r\n                  src={remove_icon}\r\n                  alt=\"×\"\r\n                  onClick={this.changeTransit}\r\n                  title=\"Odebrat průjezdní bod\"\r\n                ></img>\r\n                <input\r\n                  className=\"locations\"\r\n                  id=\"input_via\"\r\n                  type=\"form\"\r\n                  placeholder=\"Zadejte průjezdový bod\"\r\n                  onChange={this.handleViaInput}\r\n                ></input>\r\n              </label>\r\n              <label id=\"swapper\" onClick={this.swapInputFields}>\r\n                <img\r\n                  className=\"clickable\"\r\n                  src={swap_icon}\r\n                  alt=\"[SWAP]\"\r\n                  title=\"Prohodit Start a Cíl\"\r\n                ></img>\r\n              </label>\r\n            </div>\r\n            <div className=\"inputFieldDiv\">\r\n              <label className=\"textLabel\">Kam:</label>\r\n              <input\r\n                className=\"locations\"\r\n                id=\"input_to\"\r\n                type=\"form\"\r\n                placeholder=\"Zadejte cílový bod\"\r\n                onChange={this.handleToInput}\r\n              ></input>\r\n            </div>\r\n          </div>\r\n          <div className=\"box\" id=\"timeBox\">\r\n            <div className=\"inputFieldDiv\">\r\n              <label className=\"textLabel\">Datum a čas:</label>\r\n              <input\r\n                id=\"input_date\"\r\n                type=\"date\"\r\n                onChange={this.handleTimeAndDate}\r\n              ></input>\r\n              <input\r\n                id=\"input_time\"\r\n                type=\"time\"\r\n                onChange={this.handleTimeAndDate}\r\n              ></input>\r\n            </div>\r\n          </div>\r\n          <div className=\"directPathBox\">\r\n            <label className=\"inputFieldDiv\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"directPath\"\r\n                onChange={this.getOptions}\r\n              ></input>\r\n              Pouze přímý spoj\r\n            </label>\r\n          </div>\r\n          <div className=\"options\">\r\n            <OptionsSelect></OptionsSelect>\r\n            <div className=\"options-box\">\r\n              <ParametersPID></ParametersPID>\r\n              <TransportPID></TransportPID>\r\n              <AccessibilityPID></AccessibilityPID>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"submitBox\">\r\n          <SelectApi setApi={this.setApi}></SelectApi>\r\n          <input\r\n            type=\"submit\"\r\n            value=\"Vyhledat spojení\"\r\n            title=\"Vyhledat spoj dle zadaných hodnot\"\r\n          ></input>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\nexport default PlannerPID;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Map from \"./Map\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PlannerPID from \"../api/PlannerPID\";\r\n\r\n/**\r\n * Komponenta formulářové aplikace, která je komunikátorem mezi vyhledávačem (komponenta PlannerPID) a jádrem aplikace (komponenta App).\r\n * Je zodpovědná za vykreslení stránky včetně headeru a footeru a následný přesun na stránku s výsledky, když dojde k vyhledání.\r\n */\r\nclass Planner extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      /** State komponenty\r\n     * ready - určuje zda je aplikace připravena k zobrazení výsledků\r\n     */\r\n      ready: false,\r\n      selectedApi: \"pid\",\r\n      suggestions: \"\",\r\n    };\r\n    //refs\r\n    this.map = React.createRef();\r\n    //bindings\r\n    this.setApi = this.setApi.bind(this);\r\n    this.getStart = this.getStart.bind(this);\r\n    this.getVia = this.getVia.bind(this);\r\n    this.getEnd = this.getEnd.bind(this);\r\n    this.getTimeAndDate = this.getTimeAndDate.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.setReady = this.setReady.bind(this);\r\n    this.getStartStopPointId = this.getStartStopPointId.bind(this);\r\n    this.getViaStopPointId = this.getViaStopPointId.bind(this);\r\n    this.getEndStopPointId = this.getEndStopPointId.bind(this);\r\n  }\r\n\r\n  /** Následující komponenty slouží ke komunikaci s jádrem aplikace a vyhledávačem.\r\n   * Přesouvají data z vyšší vrstvy (vyhledávač) do vrstvy nižší (jádro)\r\n   **/\r\n  setApi(selectedApi) {\r\n    this.props.writeApi(selectedApi);\r\n  }\r\n\r\n  getStart(start) {\r\n    this.props.writeStart(start);\r\n  }\r\n\r\n  getVia(via) {\r\n    this.props.writeVia(via);\r\n  }\r\n\r\n  getEnd(end) {\r\n    this.props.writeEnd(end);\r\n  }\r\n\r\n  getStartStopPointId(place) {\r\n    this.props.writeStartId(place);\r\n  }\r\n  getViaStopPointId(place) {\r\n    this.props.writeViaId(place);\r\n  }\r\n  getEndStopPointId(place) {\r\n    this.props.writeEndId(place);\r\n  }\r\n\r\n  getTimeAndDate(timedate) {\r\n    this.props.writeTimeAndDate(timedate);\r\n  }\r\n\r\n  getOptions(options) {\r\n    this.props.writeOptions(options);\r\n  }\r\n\r\n  /** Metoda nastavujicí připravenost aplikace k vyhledání\r\n   * Pokud je state ready true, dojde k přesunu z vyhledávače na stránku s výsledky.\r\n   */\r\n  setReady(bool) {\r\n    this.setState({ ready: bool });\r\n  }\r\n\r\n  /**\r\n   * Renderovací metoda která udržuje obsahuje header, footer a vyhledávač aplikace.\r\n   * Každému vyhledávači (komponentě PlannerPID) jsou předány props jako odkazy na metody této komponenty,\r\n   * které pak využívají pro přesun dat níže (do této komponenty).\r\n   * \r\n   * Při změně state ready v této komponentě dojde na redirect na výsledky.\r\n   */\r\n  render() {\r\n    if (this.state.ready) {\r\n      return <Redirect to=\"/form_result\"></Redirect>;\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <Header></Header>\r\n          <main className=\"journey-planner\">\r\n            <section className=\"results\">\r\n              <PlannerPID\r\n                start={this.getStart}\r\n                via={this.getVia}\r\n                end={this.getEnd}\r\n                startId={this.getStartStopPointId}\r\n                viaId={this.getViaStopPointId}\r\n                endId={this.getEndStopPointId}\r\n                timedate={this.getTimeAndDate}\r\n                ready={this.setReady}\r\n                planner={this.props.planner}\r\n                setApi={this.setApi}\r\n                getOptions={this.getOptions}\r\n              ></PlannerPID>\r\n            </section>\r\n            <Map ref={this.map}></Map>\r\n          </main>\r\n          <Footer></Footer>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default Planner;\r\n","import React from \"react\";\r\n\r\nclass WizardSteps extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handlePreviousStep = this.handlePreviousStep.bind(this);\r\n    this.handleNextStep = this.handleNextStep.bind(this);\r\n    this.handleTransport = this.handleSearch.bind(this);\r\n    this.returnTask = this.returnTask.bind(this);\r\n    this.state = { step: 0, prevBtnDisabled: false, nextBtnDisabled: false };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.step === 0) {\r\n      this.setState({ prevBtnDisabled: true });\r\n    }\r\n  }\r\n\r\n  handlePreviousStep(e) {\r\n    e.preventDefault();\r\n    let currentStep = this.state.step;\r\n    console.log(currentStep);\r\n    if (currentStep !== 0) {\r\n      this.setState({ nextBtnDisabled: false });\r\n      var optionBox = document.getElementsByClassName(\"options-box\");\r\n      optionBox[0].children[currentStep].style.display = \"none\";\r\n      optionBox[0].children[currentStep - 1].style.display = \"block\";\r\n      this.setState({ step: currentStep - 1 });\r\n      if (currentStep - 1 === 0) {\r\n        this.setState({ prevBtnDisabled: true });\r\n      }\r\n    } else {\r\n      console.log(\"Can't go back\");\r\n    }\r\n  }\r\n\r\n  handleNextStep(e) {\r\n    e.preventDefault();\r\n    let currentStep = this.state.step;\r\n    console.log(currentStep);\r\n    if (currentStep !== 4) {\r\n      this.setState({ prevBtnDisabled: false });\r\n      var optionBox = document.getElementsByClassName(\"options-box\");\r\n      optionBox[0].children[currentStep].style.display = \"none\";\r\n      optionBox[0].children[currentStep + 1].style.display = \"block\";\r\n      this.setState({ step: currentStep + 1 });\r\n      if (currentStep + 1 === 4) {\r\n        this.setState({ nextBtnDisabled: true });\r\n      }\r\n    } else {\r\n      console.log(\"Can't go forth\");\r\n    }\r\n  }\r\n\r\n  handleSearch(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  returnTask() {\r\n    switch (this.state.step) {\r\n      case 0:\r\n        return \"Zvolte základní hodnoty pro vyhledání Vašeho spoje\";\r\n      case 1:\r\n        return \"Vyberte si parametry Vaší trasy\";\r\n      case 2:\r\n        return \"Vyberte Vámi preferovaný způsob dopravy\";\r\n      case 3:\r\n        return \"V případě dalších požadavků na spoj zvolte níže\";\r\n      case 4:\r\n        return \"Po kontrole Vašeho zadání vyhledejte odpovídající spoj\";\r\n      default:\r\n        return \"Chyba v programu\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"wizardSteps\">\r\n        <div className=\"wizardTasks\">\r\n          <label><b>Krok {this.state.step + 1} z 5</b></label>\r\n          <label>{this.returnTask()}</label>\r\n        </div>\r\n        <table>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <button\r\n                  onClick={this.handlePreviousStep}\r\n                  id=\"prev\"\r\n                  disabled={this.state.prevBtnDisabled}\r\n                >\r\n                  Předchozí krok\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <button\r\n                  onClick={this.handleNextStep}\r\n                  id=\"next\"\r\n                  disabled={this.state.nextBtnDisabled}\r\n                >\r\n                  Další krok\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default WizardSteps;\r\n","import React from \"react\";\r\nimport WizardSteps from \"../app/WizardSteps\";\r\nimport SelectApi from \"./SelectApi\";\r\nimport swap_icon from \"../../assets/Swap.png\";\r\nimport add_icon from \"../../assets/Add.png\";\r\nimport remove_icon from \"../../assets/Remove.png\";\r\n\r\nclass PlannerWizardPID extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //STATE\r\n    this.state = {\r\n      from: \"\",\r\n      to: \"\",\r\n      suggestions: undefined,\r\n      via: false,\r\n      date: \"\",\r\n      time: \"\",\r\n      directPath: false,\r\n      fastestRoute: false,\r\n      numTransfers: \"\",\r\n      traveler_type: \"pouze peší chůze\",\r\n      special: \"bez dalších potřeb\"\r\n    };\r\n    //BINDINGS\r\n    this.initialTimeDateSetup = this.initialTimeDateSetup.bind(this);\r\n    this.handleFromInput = this.handleFromInput.bind(this);\r\n    this.handleViaInput = this.handleViaInput.bind(this);\r\n    this.handleToInput = this.handleToInput.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleTimeAndDate = this.handleTimeAndDate.bind(this);\r\n    this.drawSuggestions = this.drawSuggestions.bind(this);\r\n    this.updateSelectedApi = this.updateSelectedApi.bind(this);\r\n    this.changeTransit = this.changeTransit.bind(this);\r\n    this.updateInputValues = this.updateInputValues.bind(this);\r\n    this.swapInputFields = this.swapInputFields.bind(this);\r\n    this.updateOptions = this.updateOptions.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n  \r\n  }\r\n\r\n  initialTimeDateSetup() {\r\n    var date = new Date();\r\n    var initApiTime =\r\n      date.getFullYear() +\r\n      \"\" +\r\n      (date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1) +\r\n      \"\" +\r\n      (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()) +\r\n      \"T\" +\r\n      (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) +\r\n      \"\" +\r\n      (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n      \"00\";\r\n    var currentDate =\r\n      date.getFullYear() +\r\n      \"-\" +\r\n      (date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1) +\r\n      \"-\" +\r\n      (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate());\r\n    var currentTime =\r\n      (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) +\r\n      \":\" +\r\n      (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes());\r\n    document.getElementById(\"input_date\").value = currentDate;\r\n    document.getElementById(\"input_time\").value = currentTime;\r\n    this.setState({date: currentDate, time: currentTime});\r\n    this.props.timedate(initApiTime);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initialTimeDateSetup();\r\n    let options = document.getElementsByClassName(\"options-box\");\r\n    for (let i = 1; i < options[0].children.length; i++) {\r\n      options[0].children[i].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  updateSelectedApi(api) {\r\n    this.props.setApi(api);\r\n  }\r\n\r\n  handleFromInput(e) {\r\n    this.setState({ from: e.target.value });\r\n    this.props.start(e.target.value);\r\n    this.props.startId(e.target.value);\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleViaInput(e) {\r\n    this.props.via(e.target.value);\r\n    this.props.viaId(e.target.value);\r\n  }\r\n\r\n  handleToInput(e) {\r\n    this.setState({ to: e.target.value });\r\n    this.props.end(e.target.value);\r\n    this.props.endId(e.target.value);\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleTimeAndDate(e) {\r\n    //e.preventDefault();\r\n    let timeInput = document.getElementById(\"input_time\");\r\n    let dateInput = document.getElementById(\"input_date\");\r\n    this.setState({date: timeInput.value, time: timeInput.value});\r\n    var time = timeInput.value.substr(0, 2) + timeInput.value.substr(3, 2);\r\n    var date =\r\n      dateInput.value.substr(0, 4) +\r\n      dateInput.value.substr(5, 2) +\r\n      dateInput.value.substr(8, 2);\r\n    let inputTimeDate = date + \"T\" + time;\r\n    this.props.timedate(inputTimeDate);\r\n  }\r\n\r\n  drawSuggestions() {\r\n    var p = document.getElementById(\"suggestions\");\r\n    p.appendChild(document.createElement(\"ul\"));\r\n    for (let i = 0; i < this.state.suggestions.length; i++) {\r\n      let li = document.createElement(\"li\");\r\n      li.appendChild(document.createTextNode(this.state.suggestions[i]));\r\n      p.childNodes[0].appendChild(li);\r\n    }\r\n  }\r\n\r\n  updateInputValues() {\r\n    var from = document.getElementById(\"input_from\");\r\n    var to = document.getElementById(\"input_to\");\r\n    this.props.start(from.value);\r\n    this.props.end(to.value);\r\n  }\r\n\r\n  updateOptions() {\r\n    this.getOptions();\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    this.setState({vialFrom: this.state.from, vialTo: this.state.to});\r\n    if (document.getElementById(\"input_from\").value.length < 1 || document.getElementById(\"input_to\").value.length < 1) {\r\n      e.preventDefault();\r\n      document.getElementById(\"input_from\").setAttribute(\"warning\", \"true\");\r\n      document.getElementById(\"input_to\").setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.preventDefault();\r\n      if (this.props.update !== undefined) {\r\n        this.updateInputValues();\r\n        this.props.update();\r\n      } else {\r\n        this.props.ready(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  changeTransit(e) {\r\n    this.getOptions();\r\n    var viaSection = document.getElementById(\"via\");\r\n    if (this.state.via === false) {\r\n      viaSection.setAttribute(\"active\", \"true\");\r\n      let addViaEls = document.getElementsByClassName(\"addVia\");\r\n      let remViaEls = document.getElementsByClassName(\"removeVia\");\r\n      addViaEls[0].style.display = \"none\";\r\n      remViaEls[0].style.display = \"inline-block\";\r\n      this.setState({ via: true });\r\n    } else {\r\n      document.getElementById(\"input_via\").value = \"\";\r\n      this.props.via(document.getElementById(\"input_via\").value);\r\n      viaSection.setAttribute(\"active\", \"false\");\r\n      let addViaEls = document.getElementsByClassName(\"addVia\");\r\n      let remViaEls = document.getElementsByClassName(\"removeVia\");\r\n      addViaEls[0].style.display = \"inline-block\";\r\n      remViaEls[0].style.display = \"none\";\r\n      this.setState({ via: false });\r\n    }\r\n  }\r\n\r\n  swapInputFields() {\r\n    this.getOptions();\r\n    var fromOld = document.getElementById(\"input_from\").value;\r\n    var to = document.getElementById(\"input_to\");\r\n    var from = document.getElementById(\"input_from\");\r\n    from.value = to.value;\r\n    to.value = fromOld;\r\n    this.props.start(from.value);\r\n    this.props.startId(from.value);\r\n    this.props.end(to.value);\r\n    this.props.endId(to.value);\r\n    this.setState({ from: from.value });\r\n    this.setState({ to: to.value });\r\n  }\r\n\r\n  getOptions() {\r\n    var options = {\r\n      directPath: document.getElementById(\"directPath\").checked,\r\n      fastestRoute: document.getElementsByClassName(\"route\")[0].checked,\r\n      lowWalkingRoute: document.getElementsByClassName(\"route\")[1].checked,\r\n      numTransfers: document.getElementById(\"numTransfers\").value,\r\n      timeToTransfer: document.getElementById(\"timeToTransfer\").value,\r\n      transferDistance: document.getElementById(\"transferDistance\").value,\r\n      traveler_type: {\r\n        walker: document.getElementsByClassName(\"traveler_type\")[0].checked,\r\n        bike: document.getElementsByClassName(\"traveler_type\")[1].checked,\r\n        car: document.getElementsByClassName(\"traveler_type\")[2].checked\r\n      },\r\n      means: {\r\n        metro: document.getElementsByClassName(\"means\")[0].firstChild.checked,\r\n        tram: document.getElementsByClassName(\"means\")[1].firstChild.checked,\r\n        bus: document.getElementsByClassName(\"means\")[2].firstChild.checked,\r\n        train: document.getElementsByClassName(\"means\")[3].firstChild.checked,\r\n        fenicular: document.getElementsByClassName(\"means\")[4].firstChild\r\n          .checked,\r\n        ferry: document.getElementsByClassName(\"means\")[5].firstChild.checked\r\n      },\r\n      special: {\r\n        standard: document.getElementsByClassName(\"traveler_type\")[3].checked,\r\n        baby: document.getElementsByClassName(\"traveler_type\")[4].checked,\r\n        wheelchair: document.getElementsByClassName(\"traveler_type\")[5].checked,\r\n        luggage: document.getElementsByClassName(\"traveler_type\")[6].checked,\r\n        cyclist: document.getElementsByClassName(\"traveler_type\")[7].checked\r\n      }\r\n    };\r\n    if (options.directPath) {this.setState({directPath: true})};\r\n    if (options.fastestRoute) {this.setState({fastestRoute: true})};\r\n    if (options.numTransfers > 0) {this.setState({numTransfers: options.numTransfers})} else {this.setState({numTransfers: \"neomezeným počtem\"})};\r\n    if (options.traveler_type.walker) {this.setState({traveler_type: \"pouze peší chůze\"})};\r\n    if (options.traveler_type.bike) {this.setState({traveler_type: \"kola nebo koloběžky\"})};\r\n    if (options.traveler_type.car) {this.setState({traveler_type: \"osobního automobilu\"})};\r\n    if (options.special.standard) {this.setState({special: \"bez dalších potřeb\"})};\r\n    if (options.special.baby) {this.setState({special: \"s kočárkem\"})};\r\n    if (options.special.wheelchair) {this.setState({special: \"s vozíčkem\"})};\r\n    if (options.special.luggage) {this.setState({special: \"s těžkými zavazadly\"})};\r\n    if (options.special.cyclist) {this.setState({special: \"s kolem do MHD\"})};\r\n\r\n\r\n    console.log(\"Writing:\");\r\n    console.log(options.traveler_type);\r\n    console.log(options.means);\r\n    console.log(options.special);\r\n    this.props.getOptions(options);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"input\"\r\n        id=\"inputForm\"\r\n        action=\"/result\"\r\n        onSubmit={this.handleSubmit}\r\n        onChange={this.getOptions}\r\n      >\r\n        <div className=\"options\">\r\n          <WizardSteps step={this.state.step}></WizardSteps>\r\n          <div className=\"options-box\">\r\n            <div id=\"options-box-main\" display=\"block\">\r\n            <div className=\"inputFieldDiv\">\r\n              <label className=\"textLabel\">Odkud:</label>\r\n              <input\r\n                className=\"locations\"\r\n                id=\"input_from\"\r\n                type=\"form\"\r\n                placeholder=\"Zadejte počáteční bod\"\r\n                onChange={this.handleFromInput}\r\n              ></input>\r\n            </div>\r\n            <p id=\"suggestions\"></p>\r\n            <div className=\"inputFieldDiv\" id=\"via\" active=\"false\">\r\n              <label className=\"addVia\" onClick={this.changeTransit}>\r\n                <img\r\n                  className=\"viaBtn\"\r\n                  src={add_icon}\r\n                  alt=\"+\"\r\n                  title=\"Přidat průjezdní bod\"\r\n                ></img>\r\n                <label id=\"addViaText\">Přidat průjezd</label>\r\n              </label>\r\n              <label className=\"removeVia\" style={{ display: \"none\" }}>\r\n                <img\r\n                  className=\"viaBtn\"\r\n                  src={remove_icon}\r\n                  alt=\"×\"\r\n                  onClick={this.changeTransit}\r\n                  title=\"Odebrat průjezdní bod\"\r\n                ></img>\r\n                <input\r\n                  className=\"locations\"\r\n                  id=\"input_via\"\r\n                  type=\"form\"\r\n                  placeholder=\"Zadejte průjezdový bod\"\r\n                  onChange={this.handleViaInput}\r\n                ></input>\r\n              </label>\r\n              <label id=\"swapper\" onClick={this.swapInputFields}>\r\n                <img\r\n                  className=\"clickable\"\r\n                  src={swap_icon}\r\n                  alt=\"[SWAP]\"\r\n                  title=\"Prohodit Start a Cíl\"\r\n                ></img>\r\n              </label>\r\n            </div>\r\n            <div className=\"inputFieldDiv\">\r\n              <label className=\"textLabel\">Kam:</label>\r\n              <input\r\n                className=\"locations\"\r\n                id=\"input_to\"\r\n                type=\"form\"\r\n                placeholder=\"Zadejte cílový bod\"\r\n                onChange={this.handleToInput}\r\n              ></input>\r\n            </div>\r\n            <div className=\"box\" id=\"timeBox\">\r\n            <div className=\"inputFieldDiv\">\r\n              <label className=\"textLabel\">Datum a čas:</label>\r\n              <input\r\n                id=\"input_date\"\r\n                type=\"date\"\r\n                onChange={this.handleTimeAndDate}\r\n              ></input>\r\n              <input\r\n                id=\"input_time\"\r\n                type=\"time\"\r\n                onChange={this.handleTimeAndDate}\r\n              ></input>\r\n            </div>\r\n          </div>\r\n          <div className=\"directPathBox\">\r\n            <label className=\"inputFieldDiv\">\r\n              <input\r\n                type=\"checkbox\"\r\n                id=\"directPath\"\r\n                onChange={this.getOptions}\r\n              ></input>\r\n              Pouze přímý spoj\r\n            </label>\r\n          </div>\r\n          </div>\r\n            <div\r\n                className=\"optionsSettings\"\r\n                id=\"options-box-parameters\"\r\n                display=\"none\"\r\n              >\r\n                <label className=\"optionTitle\">Trasa</label>\r\n                <br />\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"route\"\r\n                    className=\"route\"\r\n                    id=\"fastestRoute\"\r\n                    defaultChecked\r\n                  ></input>\r\n                  Nejrychlejší\r\n                  <br />\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"route\"\r\n                    className=\"route\"\r\n                    id=\"lowWalkingRoute\"\r\n                  ></input>\r\n                  Nejméně pěší chůze\r\n                  <br />\r\n                </label>\r\n                <label className=\"optionTitle\">Přestupy</label>\r\n                <br />\r\n                <label className=\"transfersLabel\">\r\n                  Maximální počet přestupů:\r\n                </label>\r\n                <select defaultValue=\"-1\" id=\"numTransfers\">\r\n                  <option value=\"-1\">Neomezeno</option>\r\n                  <option value=\"0\">0</option>\r\n                  <option value=\"1\">1</option>\r\n                  <option value=\"2\">2</option>\r\n                  <option value=\"3\">3</option>\r\n                  <option value=\"4\">4</option>\r\n                  <option value=\"5\">5</option>\r\n                </select>\r\n                <br />\r\n                <label className=\"transfersLabel\">Čas na přestup:</label>\r\n                <select defaultValue=\"10\" id=\"timeToTransfer\">\r\n                  <option value=\"5\">Alespoň 5 minut</option>\r\n                  <option value=\"10\">Alespoň 10 minut</option>\r\n                  <option value=\"15\">Alespoň 15 minut</option>\r\n                </select>\r\n                <br />\r\n                <label className=\"transfersLabel\">\r\n                  Maximální vzdálenost mezi přestupy:\r\n                </label>\r\n                <select defaultValue=\"100m\" id=\"transferDistance\">\r\n                  <option value=\"100\">100 m</option>\r\n                  <option value=\"200\">200 m</option>\r\n                  <option value=\"300\">300 m</option>\r\n                </select>\r\n              </div>\r\n              <div\r\n                className=\"optionsSettings\"\r\n                id=\"options-box-transport\"\r\n                display=\"none\"\r\n              >\r\n                <label className=\"optionTitle\">Na trase chci využít</label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"ownTransport\"\r\n                    className=\"traveler_type\"\r\n                    id=\"walker\"\r\n                    defaultChecked\r\n                  ></input>\r\n                  Pouze peší chůze\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"ownTransport\"\r\n                    className=\"traveler_type\"\r\n                    id=\"cyclist\"\r\n                  ></input>\r\n                  Kolo nebo koloběžku\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"ownTransport\"\r\n                    className=\"traveler_type\"\r\n                    id=\"motorist\"\r\n                  ></input>\r\n                  Osobní automobil\r\n                </label>\r\n                <label className=\"optionTitle\">\r\n                  Výběr dopravních prostředků\r\n                </label>\r\n                <div className=\"optionMeans\">\r\n                  <label className=\"means\">\r\n                    <input type=\"checkbox\" id=\"Metro\" defaultChecked></input>\r\n                    Metro\r\n                  </label>\r\n                  <label className=\"means\">\r\n                    <input type=\"checkbox\" id=\"Tramway\" defaultChecked></input>\r\n                    Tramvaj\r\n                  </label>\r\n                  <label className=\"means\">\r\n                    <input type=\"checkbox\" id=\"Bus\" defaultChecked></input>\r\n                    Autobus\r\n                  </label>\r\n                  <label className=\"means\">\r\n                    <input type=\"checkbox\" id=\"Train\" defaultChecked></input>\r\n                    Příměstský vlak\r\n                  </label>\r\n                  <label className=\"means\">\r\n                    <input\r\n                      type=\"checkbox\"\r\n                      id=\"Funicular\"\r\n                      defaultChecked\r\n                    ></input>\r\n                    Lanovka\r\n                  </label>\r\n                  <label className=\"means\">\r\n                    <input type=\"checkbox\" id=\"Ferry\" defaultChecked></input>\r\n                    Přívoz\r\n                  </label>\r\n                </div>\r\n                <label className=\"optionTitle\" title=\"Momentálně nedostupné\">\r\n                  Doplňkové služby\r\n                </label>\r\n                <label title=\"Momentálně nedostupné\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    className=\"journeyFeature\"\r\n                    id=\"taxi\"\r\n                    disabled\r\n                  ></input>\r\n                  Taxi\r\n                </label>\r\n                <label title=\"Momentálně nedostupné\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    className=\"journeyFeature\"\r\n                    id=\"uber\"\r\n                    disabled\r\n                  ></input>\r\n                  UBER\r\n                </label>\r\n              </div>\r\n              <div\r\n                className=\"optionsSettings\"\r\n                id=\"options-box-access\"\r\n                display=\"none\"\r\n              >\r\n                <label className=\"optionTitle\">Jsem cestující</label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"transportRequest\"\r\n                    className=\"traveler_type\"\r\n                    id=\"standard\"\r\n                    defaultChecked\r\n                  ></input>\r\n                  Bez dalších potřeb\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"transportRequest\"\r\n                    className=\"traveler_type\"\r\n                    id=\"slow_walker\"\r\n                  ></input>\r\n                  S kočárkem\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"transportRequest\"\r\n                    className=\"traveler_type\"\r\n                    id=\"wheelchair\"\r\n                  ></input>\r\n                  S vozíčkem\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"transportRequest\"\r\n                    className=\"traveler_type\"\r\n                    id=\"luggage\"\r\n                  ></input>\r\n                  S těžkými zavazadly\r\n                </label>\r\n                <label>\r\n                  <input\r\n                    type=\"radio\"\r\n                    name=\"transportRequest\"\r\n                    className=\"traveler_type\"\r\n                    id=\"cyclist\"\r\n                  ></input>\r\n                  S kolem do MHD\r\n                </label>\r\n              </div>\r\n              <div\r\n                className=\"optionsSettings\"\r\n                id=\"options-box-summary\"\r\n                display=\"none\">\r\n                  <label className=\"optionTitle\">\r\n                    Souhrn před zobrazením výsledků:\r\n                  </label>\r\n                  <label className=\"summaryText\">\r\n                    <label><b>Spoj z: </b>{this.state.vialFrom}<b> do: </b>{this.state.vialTo}</label>\r\n                    <label><b>Datum: </b>{this.state.date}<b> v </b>{this.state.time}</label>\r\n                    <label><b>Trasa s max </b>{this.state.numTransfers > 0 ? this.state.numTransfers : \"neomezenými\"}<b> přestupy</b></label>\r\n                    <label><b>S využitím: </b>{this.state.traveler_type}</label>\r\n                    <label><b>Pro cestující: </b>{this.state.special}</label>\r\n                  </label>\r\n              </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"submitBox\">\r\n          <SelectApi updateSelectedApi={this.updateSelectedApi}></SelectApi>\r\n          <input\r\n            type=\"submit\"\r\n            value=\"Vyhledat spojení\"\r\n            title=\"Vyhledat spoj dle zadaných hodnot\"\r\n          ></input>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\nexport default PlannerWizardPID;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Map from \"./Map\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PlannerWizardPID from \"../api/PlannerWizardPID\";\r\n\r\n/**\r\n * Komponenta kombinovaného form-wizardu, která je komunikátorem mezi vyhledávačem (komponenta PlannerWizardPID) a jádrem aplikace (komponenta App).\r\n * Je zodpovědná za vykreslení stránky včetně headeru a footeru a následný přesun na stránku s výsledky, když dojde k vyhledání.\r\n */\r\nclass PlannerWizard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    /** State komponenty\r\n     * ready - určuje zda je aplikace připravena k zobrazení výsledků\r\n     */\r\n    this.state = {\r\n      ready: false\r\n    };\r\n    //refs\r\n    this.map = React.createRef();\r\n    //bindings\r\n    this.setApi = this.setApi.bind(this);\r\n    this.getStart = this.getStart.bind(this);\r\n    this.getVia = this.getVia.bind(this);\r\n    this.getEnd = this.getEnd.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.getTimeAndDate = this.getTimeAndDate.bind(this);\r\n    this.setReady = this.setReady.bind(this);\r\n    this.getStartStopPointId = this.getStartStopPointId.bind(this);\r\n    this.getViaStopPointId = this.getViaStopPointId.bind(this);\r\n    this.getEndStopPointId = this.getEndStopPointId.bind(this);\r\n  }\r\n\r\n  /** Následující komponenty slouží ke komunikaci s jádrem aplikace a vyhledávačem.\r\n   * Přesouvají data z vyšší vrstvy (vyhledávač) do vrstvy nižší (jádro)\r\n   **/\r\n  setApi(selectedApi) {\r\n    this.props.writeApi(selectedApi);\r\n  }\r\n\r\n  getStart(start) {\r\n    this.props.writeStart(start);\r\n  }\r\n\r\n  getVia(via) {\r\n    this.props.writeVia(via);\r\n  }\r\n\r\n  getEnd(end) {\r\n    this.props.writeEnd(end);\r\n  }\r\n\r\n  getStartStopPointId(place) {\r\n    this.props.writeStartId(place);\r\n  }\r\n  getViaStopPointId(place) {\r\n    this.props.writeViaId(place);\r\n  }\r\n  getEndStopPointId(place) {\r\n    this.props.writeEndId(place);\r\n  }\r\n\r\n  getOptions(options) {\r\n    this.props.writeOptions(options);\r\n  }\r\n\r\n  getTimeAndDate(timedate) {\r\n    this.props.writeTimeAndDate(timedate);\r\n  }\r\n\r\n  /** Metoda nastavujicí připravenost aplikace k vyhledání\r\n   * Pokud je state ready true, dojde k přesunu z vyhledávače na stránku s výsledky.\r\n   */\r\n  setReady(bool) {\r\n    this.setState({ ready: bool });\r\n  }\r\n\r\n  /**\r\n   * Renderovací metoda která udržuje obsahuje header, footer a vyhledávač aplikace.\r\n   * Každému vyhledávači (komponentě PlannerWizardPID) jsou předány props jako odkazy na metody této komponenty,\r\n   * které pak využívají pro přesun dat níže (do této komponenty).\r\n   * \r\n   * Při změně state ready v této komponentě dojde na redirect na výsledky.\r\n   */\r\n  render() {\r\n    if (this.state.ready) {\r\n      return <Redirect to=\"/old_wizard_result\"></Redirect>;\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <Header></Header>\r\n          <main className=\"journey-planner\">\r\n            <section className=\"planner\">\r\n              <PlannerWizardPID\r\n                start={this.getStart}\r\n                via={this.getVia}\r\n                end={this.getEnd}\r\n                startId={this.getStartStopPointId}\r\n                viaId={this.getViaStopPointId}\r\n                endId={this.getEndStopPointId}\r\n                timedate={this.getTimeAndDate}\r\n                ready={this.setReady}\r\n                planner={this.props.planner}\r\n                setApi={this.setApi}\r\n                getOptions={this.getOptions}\r\n              ></PlannerWizardPID>\r\n            </section>\r\n            <Map ref={this.map}></Map>\r\n          </main>\r\n          <Footer></Footer>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default PlannerWizard;\r\n","import React from \"react\";\r\nimport Map from \"./Map\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PlannerPID from \"../api/PlannerPID\";\r\nimport walker_icon from \"../../assets/Walker.png\";\r\nimport transfer_icon from \"../../assets/Transfer.png\";\r\nimport next_icon from \"../../assets/Next.png\";\r\nimport waiting_icon from \"../../assets/Waiting.png\";\r\nimport car_icon from \"../../assets/Car.png\";\r\nimport bike_icon from \"../../assets/Bike.png\";\r\n\r\nclass Result extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //state\r\n    this.state = {\r\n      ready: false,\r\n      results: [],\r\n      updateResults: false,\r\n      startId: \"no_point\",\r\n      selectedResult: \"\"\r\n    };\r\n    //refs\r\n    this.map = React.createRef();\r\n    this.resultRef = React.createRef();\r\n    //bindings\r\n    this.getStart = this.getStart.bind(this);\r\n    this.getVia = this.getVia.bind(this);\r\n    this.getEnd = this.getEnd.bind(this);\r\n    this.getStartStopPointId = this.getStartStopPointId.bind(this);\r\n    this.getViaStopPointId = this.getViaStopPointId.bind(this);\r\n    this.getEndStopPointId = this.getEndStopPointId.bind(this);\r\n    this.getTimeAndDate = this.getTimeAndDate.bind(this);\r\n    this.setApi = this.setApi.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.setReady = this.setReady.bind(this);\r\n    this.setInputValues = this.setInputValues.bind(this);\r\n    this.createResultItem = this.createResultItem.bind(this);\r\n    this.renderResults = this.renderResults.bind(this);\r\n    this.updateResults = this.updateResults.bind(this);\r\n    this.drawJourney = this.drawJourney.bind(this);\r\n    this.drawStartPoint = this.drawStartPoint.bind(this);\r\n    this.drawViaPoint = this.drawViaPoint.bind(this);\r\n    this.drawEndPoint = this.drawEndPoint.bind(this);\r\n    this.fetchData = this.fetchData.bind(this);\r\n    this.showJourneyDetails = this.showJourneyDetails.bind(this);\r\n  }\r\n\r\n  getStart(start) {\r\n    this.props.writeStart(start);\r\n  }\r\n\r\n  getVia(via) {\r\n    this.props.writeVia(via);\r\n  }\r\n\r\n  getEnd(end) {\r\n    this.props.writeEnd(end);\r\n  }\r\n\r\n  getStartStopPointId(place) {\r\n    this.props.writeStartId(place);\r\n  }\r\n  getViaStopPointId(place) {\r\n    this.props.writeViaId(place);\r\n  }\r\n  getEndStopPointId(place) {\r\n    this.props.writeEndId(place);\r\n  }\r\n\r\n  setApi(api) {\r\n    this.props.writeApi(api)\r\n  }\r\n\r\n  getTimeAndDate(timedate) {\r\n    this.props.writeTimeAndDate(timedate);\r\n  }\r\n\r\n  getOptions(options) {\r\n    this.props.writeOptions(options);\r\n  }\r\n\r\n  setReady(bool) {\r\n    this.setState({ ready: bool });\r\n  }\r\n\r\n  setInputValues() {\r\n    var from = document.getElementById(\"input_from\");\r\n    var via = document.getElementById(\"input_via\");\r\n    var to = document.getElementById(\"input_to\");\r\n    from.value = this.props.planner.start;\r\n    this.props.planner.via === null\r\n      ? (via.value = \"\")\r\n      : (via.value = this.props.planner.via);\r\n    to.value = this.props.planner.end;\r\n  }\r\n\r\n  checkSearch() {\r\n    if (this.props.planner.start.length === 0) {\r\n      return \"\";\r\n    } else {\r\n      return \" >>> \";\r\n    }\r\n  }\r\n\r\n  checkViaRoute() {\r\n    if (this.props.planner.via.length >= 1) {\r\n      return \" přes \";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  checkResults() {\r\n    if (this.state.results !== undefined) {\r\n      switch (this.state.results.length) {\r\n        case 0:\r\n          return \"\";\r\n        case 1:\r\n          return \" --- nalezen 1 výsledek\";\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n          return \" --- nalezeny \" + this.state.results.length + \" výsledky\";\r\n        default:\r\n          return \" --- nalezeno \" + this.state.results.length + \" výsledků\";\r\n      }\r\n    } else {\r\n      return \" nebyl nalezen žádný výsledek, zvolte prosím jiné zadání.\"\r\n    }\r\n  }\r\n\r\n  drawStartPoint(place) {\r\n    if (place.length >= 1) {\r\n      let query = place;\r\n      var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n      var headers = new Headers();\r\n      headers.set(\r\n        \"Authorization\",\r\n        \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n      );\r\n      fetch(url, { method: \"GET\", headers: headers })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          var query = json;\r\n          if (query.places !== null && query.places !== undefined) {\r\n            console.log(query);\r\n            for (let i = 0; i < query.places.length; i++) {\r\n              console.log(\"test\");\r\n              if (query.places[i].embedded_type === \"stop_area\") {\r\n                this.map.current.addMarker(\r\n                  query.places[i].stop_area.coord.lon,\r\n                  query.places[i].stop_area.coord.lat,\r\n                  0,\r\n                  place\r\n                );\r\n                this.map.current.clearTransferPopups();\r\n                this.setState({ startId: query.places[i].id });\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"Nothing\");\r\n          }\r\n        });\r\n    } else {\r\n      //console.log(\"Start Point empty - no marker added.\");\r\n    }\r\n  }\r\n\r\n  drawViaPoint(place, viaOn) {\r\n    console.log(\"== saved stuff ==\")\r\n    console.log(this.state.results)\r\n    if (viaOn) {\r\n      //console.log(\"Add\");\r\n      if (place.length >= 1) {\r\n        let query = place;\r\n        var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n        var headers = new Headers();\r\n        headers.set(\r\n          \"Authorization\",\r\n          \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n        );\r\n        fetch(url, { method: \"GET\", headers: headers })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            if (query.places !== null && query.places !== undefined) {\r\n              console.log(query);\r\n              for (let i = 0; i < query.places.length; i++) {\r\n                console.log(\"test\");\r\n                if (query.places[i].embedded_type === \"stop_area\") {\r\n                  this.map.current.addMarker(\r\n                    query.places[i].stop_area.coord.lon,\r\n                    query.places[i].stop_area.coord.lat,\r\n                    1,\r\n                    place\r\n                  );\r\n                  this.setState({ viaId: query.places[i].id });\r\n                  break;\r\n                }\r\n              }\r\n            } else {\r\n              console.log(\"Nothing\");\r\n            }\r\n          });\r\n      } else {\r\n        //console.log(\"Via Point empty - no marker added.\");\r\n      }\r\n    } else {\r\n      //console.log(\"Not Add\");\r\n      this.map.current.addMarker(\"\", \"\", 3);\r\n    }\r\n  }\r\n\r\n  drawEndPoint(place) {\r\n    if (place.length >= 1) {\r\n      let query = place;\r\n      var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n      var headers = new Headers();\r\n      headers.set(\r\n        \"Authorization\",\r\n        \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n      );\r\n      fetch(url, { method: \"GET\", headers: headers })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          var query = json;\r\n          if (query.places !== null && query.places !== undefined) {\r\n            console.log(query);\r\n            for (let i = 0; i < query.places.length; i++) {\r\n              console.log(\"test\");\r\n              if (query.places[i].embedded_type === \"stop_area\") {\r\n                this.map.current.addMarker(\r\n                  query.places[i].stop_area.coord.lon,\r\n                  query.places[i].stop_area.coord.lat,\r\n                  2,\r\n                  place\r\n                );\r\n                this.setState({ endId: query.places[i].id });\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"Nothing\");\r\n          }\r\n        });\r\n    } else {\r\n      //console.log(\"End Point empty - no marker added.\");\r\n    }\r\n  }\r\n\r\n  fetchData() {\r\n    console.log(this.state.startId);\r\n    var start = this.props.planner.start;\r\n    var end = this.props.planner.end;\r\n    var via = this.props.planner.via;\r\n    var options = this.props.planner.options;\r\n    console.log(\"fetch:\");\r\n    console.log(options.traveler_type);\r\n    console.log(options.means);\r\n    console.log(options.special);\r\n    //options breakdown\r\n\r\n    var url =\r\n      \"https://api.navitia.io/v1/coverage/cz/journeys?from=\" +\r\n      this.props.planner.startId +\r\n      \"&to=\" +\r\n      this.props.planner.endId +\r\n      \"&datetime=\" +\r\n      this.props.planner.timedate +\r\n      \"&min_nb_journeys=3\";\r\n\r\n    if (options.directPath) {\r\n      url += \"&max_nb_transfers=0\";\r\n    } else {\r\n      url += \"&max_nb_transfers=\" + options.numTransfers;\r\n    }\r\n    if (options.fastestRoute) {\r\n    }\r\n    if (options.lowWalkingRoute) {\r\n      url += \"&max_walking_duration_to_pt=360\";\r\n    }\r\n    if (options.transferDistance) {\r\n    }\r\n    console.log(JSON.stringify(options.means));\r\n    if (\r\n      options !== undefined &&\r\n      options.traveler_type !== undefined &&\r\n      options.means !== undefined\r\n    ) {\r\n      if (options.traveler_type.walker) {\r\n        console.log(\"WALKER===\");\r\n        if (options.special.baby) {\r\n          url += \"&traveler_type=slow_walker\";\r\n        } else {\r\n          switch (options.timeToTransfer) {\r\n            case \"5\":\r\n              url += \"&traveler_type=fast_walker\";\r\n              break;\r\n            case \"15\":\r\n              url += \"&traveler_type=slow_walker\";\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      } else if (options.traveler_type.bike || options.special.cyclist) {\r\n        url += \"&traveler_type=cyclist\";\r\n      } else if (options.traveler_type.car) {\r\n        console.log(\"CAR===\");\r\n        url += \"&traveler_type=motorist\";\r\n      } else if (options.special.wheelchair) {\r\n        url += \"&traveler_type=wheelchair\";\r\n      } else if (options.special.luggage) {\r\n        url += \"&traveler_type=luggage\";\r\n      }\r\n    }\r\n\r\n    if (via.length < 0) {\r\n      // via\r\n    } else {\r\n      console.log(url);\r\n      if (start.length >= 1 && end.length >= 1) {\r\n        //console.log(url);\r\n        //console.log(this.props.planner.timedate);\r\n        //url = \"https://api.navitia.io/v1/coverage/cz/journeys?from=stop_area%3AOCZPRA%3ANavitia%3AU130Z1P&to=stop_area%3AOCZPRA%3AU237S1&datetime=20191217T162700&\";\r\n        var headers = new Headers();\r\n        headers.set(\r\n          \"Authorization\",\r\n          \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n        );\r\n        fetch(url, { method: \"GET\", headers: headers })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            //console.log(query);\r\n            this.setState({ results: query.journeys }, () => {\r\n              let resdiv = document.getElementById(\"results\");\r\n              let resitem = resdiv.lastElementChild;\r\n              while (resitem) {\r\n                resdiv.removeChild(resitem);\r\n                resitem = resdiv.lastElementChild;\r\n              }\r\n              this.renderResults();\r\n              console.log(query.journeys);\r\n            });\r\n          });\r\n      } else {\r\n        console.log(\"no fetch\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\"=======================================\");\r\n    this.setInputValues();\r\n    this.drawStartPoint(this.props.planner.start);\r\n    this.drawViaPoint(this.props.planner.via, true);\r\n    this.drawEndPoint(this.props.planner.end);\r\n    this.fetchData();\r\n    console.log(\"results:\");\r\n    console.log(this.state.results);\r\n    this.renderResults();\r\n    if (this.state.updateResults) {\r\n      this.updateResults();\r\n    }\r\n  }\r\n\r\n  updateResults() {\r\n    this.drawStartPoint(this.props.planner.start);\r\n    this.props.planner.via.length >= 1\r\n      ? this.drawViaPoint(this.props.planner.via, true)\r\n      : this.drawViaPoint(this.props.planner.via, false);\r\n    this.drawEndPoint(this.props.planner.end);\r\n    this.fetchData();\r\n    this.map.current.clearPath();\r\n  }\r\n\r\n  drawJourney(e) {\r\n    var result_id = e.target.getAttribute(\"result_id\");\r\n    var sections = this.state.results[result_id].sections;\r\n    var routeCoords = [];\r\n    var colors = [];\r\n    var transferCoords = [];\r\n    if (this.state.selectedResult.style !== undefined) {\r\n      this.state.selectedResult.setAttribute(\"selectedResult\", \"false\");\r\n    }\r\n    var possibleResults = document.getElementsByClassName(\"result_item\");\r\n    this.setState({ selectedResult: possibleResults[result_id] });\r\n    possibleResults[result_id].setAttribute(\"selectedResult\", \"true\");\r\n    for (let i = 0; i < sections.length; i++) {\r\n      if (sections[i].geojson !== undefined) {\r\n        routeCoords.push(sections[i].geojson.coordinates);\r\n        if (sections[i].type === \"public_transport\") {\r\n          let color = \"#\" + sections[i].display_informations.color;\r\n          colors.push(color);\r\n        } else if (\r\n          sections[i].type === \"transfer\" ||\r\n          sections[i].type === \"street_network\" ||\r\n          sections[i].type === \"crow_fly\"\r\n        ) {\r\n          if (sections[i].type === \"transfer\") {\r\n            transferCoords.push(\r\n              sections[i].geojson.coordinates[\r\n                sections[i].geojson.coordinates.length - 1\r\n              ]\r\n            );\r\n          }\r\n          colors.push(process.env.REACT_APP_COLOR_WALKING);\r\n        } else if (sections[i].mode === \"bike\") {\r\n          transferCoords.push(\r\n            sections[i].geojson.coordinates[\r\n              sections[i].geojson.coordinates.length - 1\r\n            ]\r\n          );\r\n          colors.push(process.env.REACT_APP_COLOR_BIKE);\r\n        } else if (sections[i].mode === \"car\") {\r\n          transferCoords.push(\r\n            sections[i].geojson.coordinates[\r\n              sections[i].geojson.coordinates.length - 1\r\n            ]\r\n          );\r\n          colors.push(process.env.REACT_APP_COLOR_CAR);\r\n        }\r\n      }\r\n    }\r\n    if (transferCoords.length > 0) {\r\n      this.map.current.addTransferPopup(transferCoords);\r\n    } else {\r\n      this.map.current.clearTransferPopups();\r\n    }\r\n    this.map.current.clearPath();\r\n    this.map.current.addPath(routeCoords, routeCoords.length, colors);\r\n  }\r\n\r\n  createResultItem(data, id) {\r\n    var resultItem = document.createElement(\"p\");\r\n    resultItem.className = \"result_item\";\r\n    resultItem.setAttribute(\"result_id\", id);\r\n    resultItem.setAttribute(\"id\", \"result_item\" + id);\r\n    resultItem.setAttribute(\"selectedResult\", \"false\");\r\n    var deparr = document.createTextNode(\r\n      \"Odjezd: \" +\r\n        data.departure_date_time.substr(9, 2) +\r\n        \":\" +\r\n        data.departure_date_time.substr(11, 2) +\r\n        \" >> Příjezd: \" +\r\n        data.arrival_date_time.substr(9, 2) +\r\n        \":\" +\r\n        data.arrival_date_time.substr(11, 2)\r\n    );\r\n    resultItem.appendChild(deparr);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var duration = document.createTextNode(\r\n      \"Trvání: \" + Math.round(data.duration / 60) + \" minut\"\r\n    );\r\n    resultItem.appendChild(duration);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var means = [];\r\n    for (let i = 0; i < data.sections.length; i++) {\r\n      var type = data.sections[i].type;\r\n      if (type === \"street_network\" || type === \"crow_fly\") {\r\n        if (data.sections[i].mode === \"bike\") {\r\n          var bike = document.createElement(\"img\");\r\n          bike.src = bike_icon;\r\n          bike.setAttribute(\"result_id\", id);\r\n          means.push(bike);\r\n        } else if (data.sections[i].mode === \"car\") {\r\n          var car = document.createElement(\"img\");\r\n          car.src = car_icon;\r\n          car.setAttribute(\"result_id\", id);\r\n          means.push(car);\r\n        } else {\r\n          var walker = document.createElement(\"img\");\r\n          walker.src = walker_icon;\r\n          walker.setAttribute(\"result_id\", id);\r\n          means.push(walker);\r\n        }\r\n        if (i === 0) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n      if (type === \"waiting\" && data.sections[i - 1].type !== \"transfer\") {\r\n        var waiting = document.createElement(\"img\");\r\n        waiting.src = waiting_icon;\r\n        waiting.setAttribute(\"result_id\", id);\r\n        means.push(waiting);\r\n      }\r\n      if (type === \"public_transport\") {\r\n        var vehicle = document.createElement(\"p\");\r\n        vehicle.setAttribute(\"result_id\", id);\r\n        if (data.sections[i].display_informations.commercial_mode === \"Metro\") {\r\n          vehicle.className = data.sections[i].display_informations.code;\r\n        } else {\r\n          vehicle.className =\r\n            data.sections[i].display_informations.commercial_mode;\r\n        }\r\n        vehicle.innerHTML = data.sections[i].display_informations.code;\r\n        means.push(vehicle);\r\n      }\r\n      if (type === \"transfer\") {\r\n        var transfer = document.createElement(\"img\");\r\n        transfer.src = transfer_icon;\r\n        transfer.setAttribute(\"result_id\", id);\r\n        means.push(transfer);\r\n        continue;\r\n      }\r\n      if (i !== data.sections.length - 1 && i !== 0) {\r\n        if (\r\n          data.sections[i - 1].type !== \"transfer\" &&\r\n          data.sections[i + 1].type !== \"transfer\"\r\n        ) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n    }\r\n\r\n    var journey = document.createElement(\"label\");\r\n    journey.setAttribute(\"result_id\", id);\r\n    journey.className = \"journeyMeans\";\r\n    for (let l = 0; l < means.length; l++) {\r\n      journey.appendChild(means[l]);\r\n    }\r\n\r\n    var detailsBtn = document.createElement(\"a\");\r\n    detailsBtn.className = \"detailsBtn\";\r\n    detailsBtn.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    detailsBtn.innerHTML = \"Detaily spojení\";\r\n    detailsBtn.addEventListener(\"click\", this.showJourneyDetails);\r\n    var details = document.createElement(\"div\");\r\n    details.className = \"details\";\r\n    details.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    details.style.display = \"none\";\r\n    var guide = \"\";\r\n    if (data.sections !== undefined) {\r\n      for (let i = 0; i < data.sections.length; i++) {\r\n        var section = data.sections[i];\r\n        if (i < data.sections.length - 1) {\r\n          if (section.type === \"crow_fly\") {\r\n            guide +=\r\n              \"<label>Přesun na zastávku \" + section.to.name + \"</label></br>\";\r\n          } else if (section.type === \"public_transport\") {\r\n            guide +=\r\n              \"<label>Nastupte do \" +\r\n              section.display_informations.commercial_mode +\r\n              \" linky \" +\r\n              section.display_informations.code +\r\n              \" a pokračujte na zástávku \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"transfer\") {\r\n            guide +=\r\n              \"<label>Následuje přestup na zastávce \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"waiting\") {\r\n            if (i + 1 !== data.sections.length) {\r\n              guide +=\r\n                \"<label>Vyčkejte příjezdu spoje \" +\r\n                data.sections[i + 1].display_informations.commercial_mode +\r\n                \" linky \" +\r\n                data.sections[i + 1].display_informations.code +\r\n                \"</label></br>\";\r\n            }\r\n          } else if (section.type === \"street_network\") {\r\n            guide +=\r\n              \"<label>Dojeďte na zastávku \" + section.to.name + \"</label></br>\";\r\n          }\r\n        } else {\r\n          guide +=\r\n            \"<label>Vystupte na zastávce \" + section.to.name + \"</label></br>\";\r\n        }\r\n      }\r\n    }\r\n    details.innerHTML =\r\n      \"<label><b>Pokyny pro navigaci trasou</b></label></br>\" + guide;\r\n\r\n    resultItem.appendChild(journey);\r\n    resultItem.addEventListener(\"click\", this.drawJourney);\r\n    resultItem.appendChild(detailsBtn);\r\n    resultItem.appendChild(details);\r\n    return resultItem;\r\n  }\r\n\r\n  showJourneyDetails(e) {\r\n    var detailId = e.target.getAttribute(\"result_id\");\r\n    var details = document.getElementsByClassName(\"details\");\r\n    for (let i = 0; i < details.length; i++) {\r\n      if (i !== detailId) {\r\n        details[i].style.display = \"none\";\r\n      }\r\n    }\r\n    if (details[detailId].style.display === \"none\") {\r\n      details[detailId].style.display = \"block\";\r\n    } else {\r\n      details[detailId].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  renderResults() {\r\n    let resdiv = document.getElementById(\"results\");\r\n    for (\r\n      let i = 0;\r\n      i < document.getElementsByClassName(\"optionsSettings\").length;\r\n      i++\r\n    ) {\r\n      document.getElementsByClassName(\"optionsSettings\")[i].style.display =\r\n        \"none\";\r\n    }\r\n    if (this.state.results !== undefined) {\r\n      for (\r\n        let resultNumber = 0;\r\n        resultNumber < this.state.results.length;\r\n        resultNumber++\r\n      ) {\r\n        let label = document.createElement(\"label\");\r\n        label.setAttribute(\"for\", \"result_item\" + resultNumber);\r\n        let resultItem = this.createResultItem(\r\n          this.state.results[resultNumber],\r\n          resultNumber\r\n        );\r\n        label.appendChild(resultItem);\r\n        resdiv.appendChild(label);\r\n      }\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Header></Header>\r\n        <main className=\"result_page\">\r\n          <section className=\"results\">\r\n            <div id=\"search\">\r\n              <PlannerPID\r\n                start={this.getStart}\r\n                via={this.getVia}\r\n                end={this.getEnd}\r\n                startId={this.getStartStopPointId}\r\n                viaId={this.getViaStopPointId}\r\n                endId={this.getEndStopPointId}\r\n                timedate={this.getTimeAndDate}\r\n                getOptions={this.getOptions}\r\n                setApi={this.setApi}\r\n                ready={this.setReady}\r\n                update={this.updateResults}\r\n                resultRef={this.resultRef}\r\n              ></PlannerPID>\r\n              <p>\r\n                <b>Pro trasu: </b>\r\n                {this.props.planner.start}\r\n                <b>{this.checkSearch()}</b>\r\n                {this.props.planner.end}\r\n                <b>{this.checkViaRoute()}</b>\r\n                {this.props.planner.via}\r\n                {this.checkResults()}\r\n              </p>\r\n            </div>\r\n            <div id=\"results\" ref={this.resultRef}></div>\r\n          </section>\r\n          <Map ref={this.map}></Map>\r\n        </main>\r\n        <Footer></Footer>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Result;\r\n","import React from \"react\";\r\nimport Map from \"./Map\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PlannerWizardPID from \"../api/PlannerWizardPID\";\r\nimport walker_icon from \"../../assets/Walker.png\";\r\nimport transfer_icon from \"../../assets/Transfer.png\";\r\nimport next_icon from \"../../assets/Next.png\";\r\nimport waiting_icon from \"../../assets/Waiting.png\";\r\nimport car_icon from \"../../assets/Car.png\";\r\nimport bike_icon from \"../../assets/Bike.png\";\r\n\r\nclass ResultWizard extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //state\r\n    this.state = {\r\n      ready: false,\r\n      results: [],\r\n      updateResults: false,\r\n      startId: \"no_point\",\r\n      viaId: \"no_point\",\r\n      endId: \"no_point\",\r\n      selectedResult: \"\"\r\n    };\r\n    //refs\r\n    this.map = React.createRef();\r\n    this.resultRef = React.createRef();\r\n    //bindings\r\n    this.getStart = this.getStart.bind(this);\r\n    this.getVia = this.getVia.bind(this);\r\n    this.getEnd = this.getEnd.bind(this);\r\n    this.getStartStopPointId = this.getStartStopPointId.bind(this);\r\n    this.getViaStopPointId = this.getViaStopPointId.bind(this);\r\n    this.getEndStopPointId = this.getEndStopPointId.bind(this);\r\n    this.getTimeAndDate = this.getTimeAndDate.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.setReady = this.setReady.bind(this);\r\n    this.setInputValues = this.setInputValues.bind(this);\r\n    this.createResultItem = this.createResultItem.bind(this);\r\n    this.renderResults = this.renderResults.bind(this);\r\n    this.updateResults = this.updateResults.bind(this);\r\n    this.drawJourney = this.drawJourney.bind(this);\r\n    this.drawStartPoint = this.drawStartPoint.bind(this);\r\n    this.drawViaPoint = this.drawViaPoint.bind(this);\r\n    this.drawEndPoint = this.drawEndPoint.bind(this);\r\n    this.fetchData = this.fetchData.bind(this);\r\n    this.showJourneyDetails = this.showJourneyDetails.bind(this);\r\n  }\r\n\r\n  getStart(start) {\r\n    this.props.writeStart(start);\r\n  }\r\n\r\n  getVia(via) {\r\n    this.props.writeVia(via);\r\n  }\r\n\r\n  getEnd(end) {\r\n    this.props.writeEnd(end);\r\n  }\r\n\r\n  getStartStopPointId(place) {\r\n    this.props.writeStartId(place);\r\n  }\r\n  getViaStopPointId(place) {\r\n    this.props.writeViaId(place);\r\n  }\r\n  getEndStopPointId(place) {\r\n    this.props.writeEndId(place);\r\n  }\r\n\r\n  getTimeAndDate(timedate) {\r\n    this.props.writeTimeAndDate(timedate);\r\n  }\r\n\r\n  getOptions(options) {\r\n    this.props.writeOptions(options);\r\n  }\r\n\r\n  setReady(bool) {\r\n    this.setState({ ready: bool });\r\n  }\r\n\r\n  setInputValues() {\r\n    var from = document.getElementById(\"input_from\");\r\n    var via = document.getElementById(\"input_via\");\r\n    var to = document.getElementById(\"input_to\");\r\n    from.value = this.props.planner.start;\r\n    this.props.planner.via === null\r\n      ? (via.value = \"\")\r\n      : (via.value = this.props.planner.via);\r\n    to.value = this.props.planner.end;\r\n  }\r\n\r\n  checkSearch() {\r\n    if (this.props.planner.start.length === 0) {\r\n      return \"\";\r\n    } else {\r\n      return \" >>> \";\r\n    }\r\n  }\r\n\r\n  checkViaRoute() {\r\n    if (this.props.planner.via.length >= 1) {\r\n      return \" přes \";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  checkResults() {\r\n    if (this.state.results !== undefined) {\r\n      switch (this.state.results.length) {\r\n        case 0:\r\n          return \"\";\r\n        case 1:\r\n          return \" --- nalezen 1 výsledek\";\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n          return \" --- nalezeny \" + this.state.results.length + \" výsledky\";\r\n        default:\r\n          return \" --- nalezeno \" + this.state.results.length + \" výsledků\";\r\n      }\r\n    } else {\r\n      return \" nebyl nalezen žádný výsledek, zvolte prosím jiné zadání.\"\r\n    }\r\n  }\r\n\r\n  drawStartPoint(place) {\r\n    if (place.length >= 1) {\r\n      let query = place;\r\n      var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n      var headers = new Headers();\r\n      headers.set(\r\n        \"Authorization\",\r\n        \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n      );\r\n      fetch(url, { method: \"GET\", headers: headers })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          var query = json;\r\n          if (query.places !== null && query.places !== undefined) {\r\n            console.log(query);\r\n            for (let i = 0; i < query.places.length; i++) {\r\n              console.log(\"test\");\r\n              if (query.places[i].embedded_type === \"stop_area\") {\r\n                this.map.current.addMarker(\r\n                  query.places[i].stop_area.coord.lon,\r\n                  query.places[i].stop_area.coord.lat,\r\n                  0,\r\n                  place\r\n                );\r\n                this.map.current.clearTransferPopups();\r\n                this.setState({ startId: query.places[i].id });\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"Nothing\");\r\n          }\r\n        });\r\n    } else {\r\n      //console.log(\"Start Point empty - no marker added.\");\r\n    }\r\n  }\r\n\r\n  drawViaPoint(place, viaOn) {\r\n    if (viaOn) {\r\n      //console.log(\"Add\");\r\n      if (place.length >= 1) {\r\n        let query = place;\r\n        var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n        var headers = new Headers();\r\n        headers.set(\r\n          \"Authorization\",\r\n          \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n        );\r\n        fetch(url, { method: \"GET\", headers: headers })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            if (query.places !== null && query.places !== undefined) {\r\n              console.log(query);\r\n              for (let i = 0; i < query.places.length; i++) {\r\n                console.log(\"test\");\r\n                if (query.places[i].embedded_type === \"stop_area\") {\r\n                  this.map.current.addMarker(\r\n                    query.places[i].stop_area.coord.lon,\r\n                    query.places[i].stop_area.coord.lat,\r\n                    1,\r\n                    place\r\n                  );\r\n                  this.setState({ viaId: query.places[i].id });\r\n                  break;\r\n                }\r\n              }\r\n            } else {\r\n              console.log(\"Nothing\");\r\n            }\r\n          });\r\n      } else {\r\n        //console.log(\"Via Point empty - no marker added.\");\r\n      }\r\n    } else {\r\n      //console.log(\"Not Add\");\r\n      this.map.current.addMarker(\"\", \"\", 3);\r\n    }\r\n  }\r\n\r\n  drawEndPoint(place) {\r\n    if (place.length >= 1) {\r\n      let query = place;\r\n      var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n      var headers = new Headers();\r\n      headers.set(\r\n        \"Authorization\",\r\n        \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n      );\r\n      fetch(url, { method: \"GET\", headers: headers })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          var query = json;\r\n          if (query.places !== null && query.places !== undefined) {\r\n            console.log(query);\r\n            for (let i = 0; i < query.places.length; i++) {\r\n              console.log(\"test\");\r\n              if (query.places[i].embedded_type === \"stop_area\") {\r\n                this.map.current.addMarker(\r\n                  query.places[i].stop_area.coord.lon,\r\n                  query.places[i].stop_area.coord.lat,\r\n                  2,\r\n                  place\r\n                );\r\n                this.setState({ endId: query.places[i].id });\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"Nothing\");\r\n          }\r\n        });\r\n    } else {\r\n      //console.log(\"End Point empty - no marker added.\");\r\n    }\r\n  }\r\n\r\n  fetchData() {\r\n    console.log(this.state.startId);\r\n    var start = this.props.planner.start;\r\n    var end = this.props.planner.end;\r\n    var via = this.props.planner.via;\r\n    var options = this.props.planner.options;\r\n    console.log(\"fetch:\");\r\n    console.log(options.traveler_type);\r\n    console.log(options.means);\r\n    console.log(options.special);\r\n    //options breakdown\r\n\r\n    var url =\r\n      \"https://api.navitia.io/v1/coverage/cz/journeys?from=\" +\r\n      this.props.planner.startId +\r\n      \"&to=\" +\r\n      this.props.planner.endId +\r\n      \"&datetime=\" +\r\n      this.props.planner.timedate +\r\n      \"&min_nb_journeys=3\";\r\n\r\n    if (options.directPath) {\r\n      url += \"&max_nb_transfers=0\";\r\n    } else {\r\n      url += \"&max_nb_transfers=\" + options.numTransfers;\r\n    }\r\n    if (options.fastestRoute) {\r\n    }\r\n    if (options.lowWalkingRoute) {\r\n      url += \"&max_walking_duration_to_pt=360\";\r\n    }\r\n    if (options.transferDistance) {\r\n    }\r\n    console.log(JSON.stringify(options.means));\r\n    if (\r\n      options !== undefined &&\r\n      options.traveler_type !== undefined &&\r\n      options.means !== undefined\r\n    ) {\r\n      if (options.traveler_type.walker) {\r\n        console.log(\"WALKER===\");\r\n        if (options.special.baby) {\r\n          url += \"&traveler_type=slow_walker\";\r\n        } else {\r\n          switch (options.timeToTransfer) {\r\n            case \"5\":\r\n              url += \"&traveler_type=fast_walker\";\r\n              break;\r\n            case \"15\":\r\n              url += \"&traveler_type=slow_walker\";\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      } else if (options.traveler_type.bike || options.special.cyclist) {\r\n        url += \"&traveler_type=cyclist\";\r\n      } else if (options.traveler_type.car) {\r\n        console.log(\"CAR===\");\r\n        url += \"&traveler_type=motorist\";\r\n      } else if (options.special.wheelchair) {\r\n        url += \"&traveler_type=wheelchair\";\r\n      } else if (options.special.luggage) {\r\n        url += \"&traveler_type=luggage\";\r\n      }\r\n    }\r\n\r\n    if (via.length < 0) {\r\n      // via\r\n    } else {\r\n      console.log(url);\r\n      if (start.length >= 1 && end.length >= 1) {\r\n        //console.log(url);\r\n        //console.log(this.props.planner.timedate);\r\n        //url = \"https://api.navitia.io/v1/coverage/cz/journeys?from=stop_area%3AOCZPRA%3ANavitia%3AU130Z1P&to=stop_area%3AOCZPRA%3AU237S1&datetime=20191217T162700&\";\r\n        var headers = new Headers();\r\n        headers.set(\r\n          \"Authorization\",\r\n          \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n        );\r\n        fetch(url, { method: \"GET\", headers: headers })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            //console.log(query);\r\n            this.setState({ results: query.journeys }, () => {\r\n              let resdiv = document.getElementById(\"results\");\r\n              let resitem = resdiv.lastElementChild;\r\n              while (resitem) {\r\n                resdiv.removeChild(resitem);\r\n                resitem = resdiv.lastElementChild;\r\n              }\r\n              this.renderResults();\r\n              console.log(query.journeys);\r\n            });\r\n          });\r\n      } else {\r\n        console.log(\"no fetch\");\r\n      }\r\n    }\r\n  }\r\n\r\n  componentDidMount() {\r\n    console.log(\"=======================================\");\r\n    this.setInputValues();\r\n    this.drawStartPoint(this.props.planner.start);\r\n    this.drawViaPoint(this.props.planner.via, true);\r\n    this.drawEndPoint(this.props.planner.end);\r\n    this.fetchData();\r\n    console.log(\"results:\");\r\n    console.log(this.state.results);\r\n    this.renderResults();\r\n    if (this.state.updateResults) {\r\n      this.updateResults();\r\n    }\r\n  }\r\n\r\n  updateResults() {\r\n    this.drawStartPoint(this.props.planner.start);\r\n    this.props.planner.via.length >= 1\r\n      ? this.drawViaPoint(this.props.planner.via, true)\r\n      : this.drawViaPoint(this.props.planner.via, false);\r\n    this.drawEndPoint(this.props.planner.end);\r\n    this.fetchData();\r\n    this.map.current.clearPath();\r\n  }\r\n\r\n  drawJourney(e) {\r\n    var result_id = e.target.getAttribute(\"result_id\");\r\n    var sections = this.state.results[result_id].sections;\r\n    var routeCoords = [];\r\n    var colors = [];\r\n    var transferCoords = [];\r\n    if (this.state.selectedResult.style !== undefined) {\r\n      this.state.selectedResult.setAttribute(\"selectedResult\", \"false\");\r\n    }\r\n    var possibleResults = document.getElementsByClassName(\"result_item\");\r\n    this.setState({ selectedResult: possibleResults[result_id] });\r\n    possibleResults[result_id].setAttribute(\"selectedResult\", \"true\");\r\n    for (let i = 0; i < sections.length; i++) {\r\n      if (sections[i].geojson !== undefined) {\r\n        routeCoords.push(sections[i].geojson.coordinates);\r\n        if (sections[i].type === \"public_transport\") {\r\n          let color = \"#\" + sections[i].display_informations.color;\r\n          colors.push(color);\r\n        } else if (\r\n          sections[i].type === \"transfer\" ||\r\n          sections[i].type === \"street_network\" ||\r\n          sections[i].type === \"crow_fly\"\r\n        ) {\r\n          if (sections[i].type === \"transfer\") {\r\n            transferCoords.push(\r\n              sections[i].geojson.coordinates[\r\n                sections[i].geojson.coordinates.length - 1\r\n              ]\r\n            );\r\n          }\r\n          colors.push(process.env.REACT_APP_COLOR_WALKING);\r\n        } else if (sections[i].mode === \"bike\") {\r\n          transferCoords.push(\r\n            sections[i].geojson.coordinates[\r\n              sections[i].geojson.coordinates.length - 1\r\n            ]\r\n          );\r\n          colors.push(process.env.REACT_APP_COLOR_BIKE);\r\n        } else if (sections[i].mode === \"car\") {\r\n          transferCoords.push(\r\n            sections[i].geojson.coordinates[\r\n              sections[i].geojson.coordinates.length - 1\r\n            ]\r\n          );\r\n          colors.push(process.env.REACT_APP_COLOR_CAR);\r\n        }\r\n      }\r\n    }\r\n    if (transferCoords.length > 0) {\r\n      this.map.current.addTransferPopup(transferCoords);\r\n    } else {\r\n      this.map.current.clearTransferPopups();\r\n    }\r\n    this.map.current.clearPath();\r\n    this.map.current.addPath(routeCoords, routeCoords.length, colors);\r\n  }\r\n\r\n  createResultItem(data, id) {\r\n    var resultItem = document.createElement(\"p\");\r\n    resultItem.className = \"result_item\";\r\n    resultItem.setAttribute(\"result_id\", id);\r\n    resultItem.setAttribute(\"id\", \"result_item\" + id);\r\n    resultItem.setAttribute(\"selectedResult\", \"false\");\r\n    var deparr = document.createTextNode(\r\n      \"Odjezd: \" +\r\n        data.departure_date_time.substr(9, 2) +\r\n        \":\" +\r\n        data.departure_date_time.substr(11, 2) +\r\n        \" >> Příjezd: \" +\r\n        data.arrival_date_time.substr(9, 2) +\r\n        \":\" +\r\n        data.arrival_date_time.substr(11, 2)\r\n    );\r\n    resultItem.appendChild(deparr);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var duration = document.createTextNode(\r\n      \"Trvání: \" + Math.round(data.duration / 60) + \" minut\"\r\n    );\r\n    resultItem.appendChild(duration);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var means = [];\r\n    for (let i = 0; i < data.sections.length; i++) {\r\n      var type = data.sections[i].type;\r\n      if (type === \"street_network\" || type === \"crow_fly\") {\r\n        if (data.sections[i].mode === \"bike\") {\r\n          var bike = document.createElement(\"img\");\r\n          bike.src = bike_icon;\r\n          bike.setAttribute(\"result_id\", id);\r\n          means.push(bike);\r\n        } else if (data.sections[i].mode === \"car\") {\r\n          var car = document.createElement(\"img\");\r\n          car.src = car_icon;\r\n          car.setAttribute(\"result_id\", id);\r\n          means.push(car);\r\n        } else {\r\n          var walker = document.createElement(\"img\");\r\n          walker.src = walker_icon;\r\n          walker.setAttribute(\"result_id\", id);\r\n          means.push(walker);\r\n        }\r\n        if (i === 0) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n      if (type === \"waiting\" && data.sections[i - 1].type !== \"transfer\") {\r\n        var waiting = document.createElement(\"img\");\r\n        waiting.src = waiting_icon;\r\n        waiting.setAttribute(\"result_id\", id);\r\n        means.push(waiting);\r\n      }\r\n      if (type === \"public_transport\") {\r\n        var vehicle = document.createElement(\"p\");\r\n        vehicle.setAttribute(\"result_id\", id);\r\n        if (data.sections[i].display_informations.commercial_mode === \"Metro\") {\r\n          vehicle.className = data.sections[i].display_informations.code;\r\n        } else {\r\n          vehicle.className =\r\n            data.sections[i].display_informations.commercial_mode;\r\n        }\r\n        vehicle.innerHTML = data.sections[i].display_informations.code;\r\n        means.push(vehicle);\r\n      }\r\n      if (type === \"transfer\") {\r\n        var transfer = document.createElement(\"img\");\r\n        transfer.src = transfer_icon;\r\n        transfer.setAttribute(\"result_id\", id);\r\n        means.push(transfer);\r\n        continue;\r\n      }\r\n      if (i !== data.sections.length - 1 && i !== 0) {\r\n        if (\r\n          data.sections[i - 1].type !== \"transfer\" &&\r\n          data.sections[i + 1].type !== \"transfer\"\r\n        ) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n    }\r\n\r\n    var journey = document.createElement(\"label\");\r\n    journey.setAttribute(\"result_id\", id);\r\n    journey.className = \"journeyMeans\";\r\n    for (let l = 0; l < means.length; l++) {\r\n      journey.appendChild(means[l]);\r\n    }\r\n\r\n    var detailsBtn = document.createElement(\"a\");\r\n    detailsBtn.className = \"detailsBtn\";\r\n    detailsBtn.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    detailsBtn.innerHTML = \"Detaily spojení\";\r\n    detailsBtn.addEventListener(\"click\", this.showJourneyDetails);\r\n    var details = document.createElement(\"div\");\r\n    details.className = \"details\";\r\n    details.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    details.style.display = \"none\";\r\n    var guide = \"\";\r\n    if (data.sections !== undefined) {\r\n      for (let i = 0; i < data.sections.length; i++) {\r\n        var section = data.sections[i];\r\n        if (i < data.sections.length - 1) {\r\n          if (section.type === \"crow_fly\") {\r\n            guide +=\r\n              \"<label>Přesun na zastávku \" + section.to.name + \"</label></br>\";\r\n          } else if (section.type === \"public_transport\") {\r\n            guide +=\r\n              \"<label>Nastupte do \" +\r\n              section.display_informations.commercial_mode +\r\n              \" linky \" +\r\n              section.display_informations.code +\r\n              \" a pokračujte na zástávku \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"transfer\") {\r\n            guide +=\r\n              \"<label>Následuje přestup na zastávce \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"waiting\") {\r\n            if (i + 1 !== data.sections.length) {\r\n              guide +=\r\n                \"<label>Vyčkejte příjezdu spoje \" +\r\n                data.sections[i + 1].display_informations.commercial_mode +\r\n                \" linky \" +\r\n                data.sections[i + 1].display_informations.code +\r\n                \"</label></br>\";\r\n            }\r\n          } else if (section.type === \"street_network\") {\r\n            guide +=\r\n              \"<label>Dojeďte na zastávku \" + section.to.name + \"</label></br>\";\r\n          }\r\n        } else {\r\n          guide +=\r\n            \"<label>Vystupte na zastávce \" + section.to.name + \"</label></br>\";\r\n        }\r\n      }\r\n    }\r\n    details.innerHTML =\r\n      \"<label><b>Pokyny pro navigaci trasou</b></label></br>\" + guide;\r\n\r\n    resultItem.appendChild(journey);\r\n    resultItem.addEventListener(\"click\", this.drawJourney);\r\n    resultItem.appendChild(detailsBtn);\r\n    resultItem.appendChild(details);\r\n    return resultItem;\r\n  }\r\n\r\n  showJourneyDetails(e) {\r\n    var detailId = e.target.getAttribute(\"result_id\");\r\n    var details = document.getElementsByClassName(\"details\");\r\n    for (let i = 0; i < details.length; i++) {\r\n      if (i !== detailId) {\r\n        details[i].style.display = \"none\";\r\n      }\r\n    }\r\n    if (details[detailId].style.display === \"none\") {\r\n      details[detailId].style.display = \"block\";\r\n    } else {\r\n      details[detailId].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  renderResults() {\r\n    let resdiv = document.getElementById(\"results\");\r\n    if (this.state.results !== undefined) {\r\n    for (\r\n      let resultNumber = 0;\r\n      resultNumber < this.state.results.length;\r\n      resultNumber++\r\n    ) {\r\n      let label = document.createElement(\"label\");\r\n      label.setAttribute(\"for\", \"result_item\" + resultNumber);\r\n      let resultItem = this.createResultItem(\r\n        this.state.results[resultNumber],\r\n        resultNumber\r\n      );\r\n      label.appendChild(resultItem);\r\n      resdiv.appendChild(label);\r\n    }\r\n  }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Header></Header>\r\n        <main className=\"result_page\">\r\n          <section className=\"results\">\r\n            <div id=\"search\">\r\n              <PlannerWizardPID\r\n                start={this.getStart}\r\n                via={this.getVia}\r\n                end={this.getEnd}\r\n                startId={this.getStartStopPointId}\r\n                viaId={this.getViaStopPointId}\r\n                endId={this.getEndStopPointId}\r\n                timedate={this.getTimeAndDate}\r\n                getOptions={this.getOptions}\r\n                ready={this.setReady}\r\n                update={this.updateResults}\r\n                resultRef={this.resultRef}\r\n              ></PlannerWizardPID>\r\n              <p>\r\n                <b>Pro trasu: </b>\r\n                {this.props.planner.start}\r\n                <b>{this.checkSearch()}</b>\r\n                {this.props.planner.end}\r\n                <b>{this.checkViaRoute()}</b>\r\n                {this.props.planner.via}\r\n                {this.checkResults()}\r\n              </p>\r\n            </div>\r\n            <div id=\"results\" ref={this.resultRef}></div>\r\n          </section>\r\n          <Map ref={this.map}></Map>\r\n        </main>\r\n        <Footer></Footer>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ResultWizard;\r\n","import React from \"react\";\r\n\r\n/**\r\n * \r\n */\r\nclass ContextSteps extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.handlePreviousStep = this.handlePreviousStep.bind(this);\r\n    this.handleNextStep = this.handleNextStep.bind(this);\r\n    this.handleTransport = this.handleSearch.bind(this);\r\n    this.returnTask = this.returnTask.bind(this);\r\n    this.state = { step: 0, prevBtnDisabled: false, nextBtnDisabled: false };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.step === 0) {\r\n      this.setState({ prevBtnDisabled: true });\r\n    }\r\n  }\r\n\r\n  handlePreviousStep(e) {\r\n    e.preventDefault();\r\n    let currentStep = this.state.step;\r\n    console.log(currentStep);\r\n    if (currentStep !== 0) {\r\n      this.setState({ nextBtnDisabled: false });\r\n      var optionBox = document.getElementsByClassName(\"options-box\");\r\n      optionBox[0].children[currentStep].style.display = \"none\";\r\n      optionBox[0].children[currentStep - 1].style.display = \"block\";\r\n      this.setState({ step: currentStep - 1 });\r\n      if (currentStep - 1 === 0) {\r\n        this.setState({ prevBtnDisabled: true });\r\n      }\r\n    } else {\r\n      console.log(\"Can't go back\");\r\n    }\r\n  }\r\n\r\n  handleNextStep(e) {\r\n    e.preventDefault();\r\n    let currentStep = this.state.step;\r\n    console.log(currentStep);\r\n    if (currentStep !== 3) {\r\n      this.setState({ prevBtnDisabled: false });\r\n      var optionBox = document.getElementsByClassName(\"options-box\");\r\n      optionBox[0].children[currentStep].style.display = \"none\";\r\n      optionBox[0].children[currentStep + 1].style.display = \"block\";\r\n      this.setState({ step: currentStep + 1 });\r\n      if (currentStep + 1 === 3) {\r\n        this.setState({ nextBtnDisabled: true });\r\n      }\r\n    } else {\r\n      console.log(\"Can't go forth\");\r\n    }\r\n  }\r\n\r\n  handleSearch(e) {\r\n    e.preventDefault();\r\n  }\r\n\r\n  returnTask() {\r\n    switch (this.state.step) {\r\n      case 0:\r\n        return \"Zvolte základní hodnoty pro vyhledání Vašeho spoje\";\r\n      case 1:\r\n        return \"Jaký je účel vaší cesty?\";\r\n      case 2:\r\n        return \"Vyberte Vámi preferované dopravní prostředky\";\r\n      case 3:\r\n        return \"Máte nějaké omezení?\";\r\n      default:\r\n        return \"Chyba v programu\";\r\n    }\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <section className=\"wizardSteps\">\r\n        <div className=\"wizardTasks\">\r\n          <label><b>Krok {this.state.step + 1} ze 4</b></label>\r\n          <label>{this.returnTask()}</label>\r\n        </div>\r\n        <table>\r\n          <tbody>\r\n            <tr>\r\n              <td>\r\n                <button\r\n                  onClick={this.handlePreviousStep}\r\n                  id=\"prev\"\r\n                  disabled={this.state.prevBtnDisabled}\r\n                >\r\n                  Předchozí krok\r\n                </button>\r\n              </td>\r\n              <td>\r\n                <button\r\n                  onClick={this.handleNextStep}\r\n                  id=\"next\"\r\n                  disabled={this.state.nextBtnDisabled}\r\n                >\r\n                  Další krok\r\n                </button>\r\n              </td>\r\n            </tr>\r\n          </tbody>\r\n        </table>\r\n      </section>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ContextSteps;\r\n","import React from \"react\";\r\nimport ContextSteps from \"../app/ContextSteps\";\r\nimport SelectApi from \"./SelectApi\";\r\nimport swap_icon from \"../../assets/Swap.png\";\r\nimport add_icon from \"../../assets/Add.png\";\r\nimport remove_icon from \"../../assets/Remove.png\";\r\nimport normal_icon from \"../../assets/Normal.png\";\r\nimport work_icon from \"../../assets/Work.png\";\r\nimport school_icon from \"../../assets/School.png\";\r\nimport doctor_icon from \"../../assets/Doctor.png\";\r\nimport freetime_icon from \"../../assets/Bike.png\";\r\n\r\nclass PlannerContextPID extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //STATE\r\n    this.state = {\r\n      from: \"\",\r\n      to: \"\",\r\n      suggestions: undefined,\r\n      via: false,\r\n      date: \"\",\r\n      time: \"\",\r\n      directPath: false,\r\n      traveler_type: \"pouze peší chůze\",\r\n      means: \"\",\r\n      special: \"bez dalších potřeb\",\r\n      context: \"none\",\r\n    };\r\n    //BINDINGS\r\n    this.initialTimeDateSetup = this.initialTimeDateSetup.bind(this);\r\n    this.handleFromInput = this.handleFromInput.bind(this);\r\n    this.handleViaInput = this.handleViaInput.bind(this);\r\n    this.handleToInput = this.handleToInput.bind(this);\r\n    this.handleSubmit = this.handleSubmit.bind(this);\r\n    this.handleTimeAndDate = this.handleTimeAndDate.bind(this);\r\n    this.drawSuggestions = this.drawSuggestions.bind(this);\r\n    this.setApi = this.setApi.bind(this);\r\n    this.changeTransit = this.changeTransit.bind(this);\r\n    this.updateInputValues = this.updateInputValues.bind(this);\r\n    this.swapInputFields = this.swapInputFields.bind(this);\r\n    this.updateOptions = this.updateOptions.bind(this);\r\n    this.getSelectedMeans = this.getSelectedMeans.bind(this);\r\n    this.getCurrentWeather = this.getCurrentWeather.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n  }\r\n\r\n  initialTimeDateSetup() {\r\n    var date = new Date();\r\n    var initApiTime =\r\n      date.getFullYear() +\r\n      \"\" +\r\n      (date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1) +\r\n      \"\" +\r\n      (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate()) +\r\n      \"T\" +\r\n      (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) +\r\n      \"\" +\r\n      (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes()) +\r\n      \"00\";\r\n    var currentDate =\r\n      date.getFullYear() +\r\n      \"-\" +\r\n      (date.getMonth() + 1 < 10\r\n        ? \"0\" + (date.getMonth() + 1)\r\n        : date.getMonth() + 1) +\r\n      \"-\" +\r\n      (date.getDate() < 10 ? \"0\" + date.getDate() : date.getDate());\r\n    var currentTime =\r\n      (date.getHours() < 10 ? \"0\" + date.getHours() : date.getHours()) +\r\n      \":\" +\r\n      (date.getMinutes() < 10 ? \"0\" + date.getMinutes() : date.getMinutes());\r\n    document.getElementById(\"input_date\").value = currentDate;\r\n    document.getElementById(\"input_time\").value = currentTime;\r\n    this.setState({ date: currentDate, time: currentTime });\r\n    this.props.timedate(initApiTime);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.initialTimeDateSetup();\r\n    let options = document.getElementsByClassName(\"options-box\");\r\n    for (let i = 1; i < options[0].children.length; i++) {\r\n      options[0].children[i].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  setApi(api) {\r\n    this.props.setApi(api);\r\n  }\r\n\r\n  handleFromInput(e) {\r\n    this.setState({ from: e.target.value });\r\n    //console.log(\"Input: \"+e.target.value);\r\n    var searchedName = e.target.value;\r\n    var searchedId = e.target.value;\r\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\"+e.target.value;\r\n    var headers = new Headers();\r\n    headers.set('Authorization', 'Basic ' + btoa(process.env.REACT_APP_NAVITIA_TOKEN));\r\n    fetch(url, {method: 'GET', headers: headers})\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      //console.log(json.places)\r\n      if (json.places !== undefined) {\r\n        for (let i = 0; i < json.places.length; i++) {\r\n          if (json.places[i].embedded_type === \"stop_area\") {\r\n            searchedName = json.places[i].name;\r\n            searchedId = json.places[i].id;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    })\r\n    this.props.start(searchedName);\r\n    this.props.startId(searchedId);\r\n\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleViaInput(e) {\r\n    this.props.via(e.target.value);\r\n    this.props.viaId(e.target.value);\r\n  }\r\n\r\n  handleToInput(e) {\r\n    this.setState({ to: e.target.value });\r\n    //console.log(\"Output: \"+e.target.value);\r\n    var searchedName = e.target.value;\r\n    var searchedId = e.target.value;\r\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\"+e.target.value;\r\n    var headers = new Headers();\r\n    headers.set('Authorization', 'Basic ' + btoa(process.env.REACT_APP_NAVITIA_TOKEN));\r\n    fetch(url, {method: 'GET', headers: headers})\r\n    .then(response => response.json())\r\n    .then(json => {\r\n      //console.log(json.places)\r\n      if (json.places !== undefined) {\r\n        for (let i = 0; i < json.places.length; i++) {\r\n          if (json.places[i].embedded_type === \"stop_area\") {\r\n            searchedName = json.places[i].name;\r\n            searchedId = json.places[i].id;\r\n            break;\r\n          }\r\n        }\r\n      }\r\n    })\r\n    this.props.end(searchedName);\r\n    this.props.endId(searchedId);\r\n\r\n    if (e.target.value.length < 1) {\r\n      e.target.setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.target.setAttribute(\"warning\", \"false\");\r\n    }\r\n  }\r\n\r\n  handleTimeAndDate(e) {\r\n    //e.preventDefault();\r\n    let timeInput = document.getElementById(\"input_time\");\r\n    let dateInput = document.getElementById(\"input_date\");\r\n    this.setState({ date: timeInput.value, time: timeInput.value });\r\n    var time = timeInput.value.substr(0, 2) + timeInput.value.substr(3, 2);\r\n    var date =\r\n      dateInput.value.substr(0, 4) +\r\n      dateInput.value.substr(5, 2) +\r\n      dateInput.value.substr(8, 2);\r\n    let inputTimeDate = date + \"T\" + time;\r\n    this.props.timedate(inputTimeDate);\r\n  }\r\n\r\n  drawSuggestions() {\r\n    var p = document.getElementById(\"suggestions\");\r\n    p.appendChild(document.createElement(\"ul\"));\r\n    for (let i = 0; i < this.state.suggestions.length; i++) {\r\n      let li = document.createElement(\"li\");\r\n      li.appendChild(document.createTextNode(this.state.suggestions[i]));\r\n      p.childNodes[0].appendChild(li);\r\n    }\r\n  }\r\n\r\n  updateInputValues() {\r\n    var from = document.getElementById(\"input_from\");\r\n    var to = document.getElementById(\"input_to\");\r\n    this.props.start(from.value);\r\n    this.props.end(to.value);\r\n  }\r\n\r\n  updateOptions() {\r\n    this.getOptions();\r\n  }\r\n\r\n  handleSubmit(e) {\r\n    this.setState({ vialFrom: this.state.from, vialTo: this.state.to });\r\n    if (\r\n      document.getElementById(\"input_from\").value.length < 1 ||\r\n      document.getElementById(\"input_to\").value.length < 1\r\n    ) {\r\n      e.preventDefault();\r\n      document.getElementById(\"input_from\").setAttribute(\"warning\", \"true\");\r\n      document.getElementById(\"input_to\").setAttribute(\"warning\", \"true\");\r\n    } else {\r\n      e.preventDefault();\r\n      if (this.props.update !== undefined) {\r\n        this.updateInputValues();\r\n        this.props.update();\r\n      } else {\r\n        this.props.ready(true);\r\n      }\r\n    }\r\n  }\r\n\r\n  changeTransit(e) {\r\n    this.getOptions();\r\n    var viaSection = document.getElementById(\"via\");\r\n    if (this.state.via === false) {\r\n      viaSection.setAttribute(\"active\", \"true\");\r\n      let addViaEls = document.getElementsByClassName(\"addVia\");\r\n      let remViaEls = document.getElementsByClassName(\"removeVia\");\r\n      addViaEls[0].style.display = \"none\";\r\n      remViaEls[0].style.display = \"inline-block\";\r\n      this.setState({ via: true });\r\n    } else {\r\n      document.getElementById(\"input_via\").value = \"\";\r\n      this.props.via(document.getElementById(\"input_via\").value);\r\n      viaSection.setAttribute(\"active\", \"false\");\r\n      let addViaEls = document.getElementsByClassName(\"addVia\");\r\n      let remViaEls = document.getElementsByClassName(\"removeVia\");\r\n      addViaEls[0].style.display = \"inline-block\";\r\n      remViaEls[0].style.display = \"none\";\r\n      this.setState({ via: false });\r\n    }\r\n  }\r\n\r\n  swapInputFields() {\r\n    this.getOptions();\r\n    var fromOld = document.getElementById(\"input_from\").value;\r\n    var to = document.getElementById(\"input_to\");\r\n    var from = document.getElementById(\"input_from\");\r\n    from.value = to.value;\r\n    to.value = fromOld;\r\n    this.props.start(from.value);\r\n    this.props.startId(from.value);\r\n    this.props.end(to.value);\r\n    this.props.endId(to.value);\r\n    this.setState({ from: from.value });\r\n    this.setState({ to: to.value });\r\n  }\r\n\r\n  getSelectedMeans() {\r\n    var meansCollection = document.getElementsByClassName(\"means\");\r\n    var means = {};\r\n    for (let i = 0; i < meansCollection.length; i++) {\r\n      means[meansCollection[i].id] = meansCollection[i].checked;\r\n    }\r\n    return means;\r\n  }\r\n\r\n  getCurrentWeather() {\r\n    var currentWeather = Math.floor(Math.random() * 7);\r\n    switch (currentWeather) {\r\n      case 3:\r\n        return \"snow\";\r\n      case 2:\r\n        return \"rain\";\r\n      case 1:\r\n        return \"cloudy\";\r\n      case 0:\r\n        return \"sunny\";\r\n      default:\r\n        return \"partly_cloudy\";\r\n    }\r\n  }\r\n\r\n  getOptions() {\r\n    console.log(\"Options:\");\r\n    var options = {\r\n      directPath: document.getElementById(\"directPath\").checked,\r\n      travel_type: document\r\n        .querySelector('input[name=\"travel_type\"]:checked')\r\n        .getAttribute(\"id\"),\r\n      means: this.getSelectedMeans(),\r\n      special: document\r\n        .querySelector('input[name=\"special\"]:checked')\r\n        .getAttribute(\"id\"),\r\n      weather: this.getCurrentWeather(),\r\n    };\r\n    console.log(\"======== WEATHER: ==== \" + this.getCurrentWeather());\r\n    if (options.directPath) {\r\n      this.setState({ directPath: true });\r\n    }\r\n\r\n    if (options.travel_type === \"normal\") {\r\n      this.setState({ traveler_type: \"pouze peší chůze\" });\r\n    }\r\n    if (options.travel_type === \"work\") {\r\n      this.setState({ travel_type: \"kola nebo koloběžky\" });\r\n    }\r\n    if (options.travel_type === \"school\") {\r\n      this.setState({ traveler_type: \"osobního automobilu\" });\r\n    }\r\n    if (options.travel_type === \"freetime\") {\r\n      this.setState({ traveler_type: \"osobního automobilu\" });\r\n    }\r\n\r\n    // MEANS\r\n    this.setState({ means: options.means });\r\n\r\n    // SPECIAL REQUIREMENTS\r\n    if (options.special === \"standard\") {\r\n      this.setState({ traveler_type: \"standard\" });\r\n    }\r\n    if (options.special === \"slow_walker\") {\r\n      this.setState({ traveler_type: \"slow_walker\" });\r\n    }\r\n    if (options.special === \"wheelchair\") {\r\n      this.setState({ traveler_type: \"wheelchair\" });\r\n    }\r\n    if (options.special === \"luggage\") {\r\n      this.setState({ traveler_type: \"luggage\" });\r\n    }\r\n    if (options.special === \"cyclist\") {\r\n      this.setState({ traveler_type: \"cyclist\" });\r\n    }\r\n\r\n    this.props.getOptions(options);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <form\r\n        className=\"input\"\r\n        id=\"contextForm\"\r\n        action=\"/result\"\r\n        onSubmit={this.handleSubmit}\r\n        onChange={this.getOptions}\r\n      >\r\n        <div className=\"options\">\r\n          <ContextSteps step={this.state.step}></ContextSteps>\r\n          <div className=\"options-box\">\r\n            <div id=\"options-box-main\" display=\"block\">\r\n              <div className=\"inputFieldDiv\">\r\n                <label className=\"textLabel\">Odkud:</label>\r\n                <input\r\n                  className=\"locations\"\r\n                  id=\"input_from\"\r\n                  type=\"form\"\r\n                  placeholder=\"Zadejte počáteční bod\"\r\n                  onChange={this.handleFromInput}\r\n                ></input>\r\n              </div>\r\n              <p id=\"suggestions\"></p>\r\n              <div className=\"inputFieldDiv\" id=\"via\" active=\"false\">\r\n                <label className=\"addVia\" onClick={this.changeTransit}>\r\n                  <img\r\n                    className=\"viaBtn\"\r\n                    src={add_icon}\r\n                    alt=\"+\"\r\n                    title=\"Přidat průjezdní bod\"\r\n                  ></img>\r\n                  <label id=\"addViaText\">Přidat průjezd</label>\r\n                </label>\r\n                <label className=\"removeVia\" style={{ display: \"none\" }}>\r\n                  <img\r\n                    className=\"viaBtn\"\r\n                    src={remove_icon}\r\n                    alt=\"×\"\r\n                    onClick={this.changeTransit}\r\n                    title=\"Odebrat průjezdní bod\"\r\n                  ></img>\r\n                  <input\r\n                    className=\"locations\"\r\n                    id=\"input_via\"\r\n                    type=\"form\"\r\n                    placeholder=\"Zadejte průjezdový bod\"\r\n                    onChange={this.handleViaInput}\r\n                  ></input>\r\n                </label>\r\n                <label id=\"swapper\" onClick={this.swapInputFields}>\r\n                  <img\r\n                    className=\"clickable\"\r\n                    src={swap_icon}\r\n                    alt=\"[SWAP]\"\r\n                    title=\"Prohodit Start a Cíl\"\r\n                  ></img>\r\n                </label>\r\n              </div>\r\n              <div className=\"inputFieldDiv\">\r\n                <label className=\"textLabel\">Kam:</label>\r\n                <input\r\n                  className=\"locations\"\r\n                  id=\"input_to\"\r\n                  type=\"form\"\r\n                  placeholder=\"Zadejte cílový bod\"\r\n                  onChange={this.handleToInput}\r\n                ></input>\r\n              </div>\r\n              <div className=\"box\" id=\"timeBox\">\r\n                <div className=\"inputFieldDiv\">\r\n                  <label className=\"textLabel\">Datum a čas:</label>\r\n                  <input\r\n                    id=\"input_date\"\r\n                    type=\"date\"\r\n                    onChange={this.handleTimeAndDate}\r\n                  ></input>\r\n                  <input\r\n                    id=\"input_time\"\r\n                    type=\"time\"\r\n                    onChange={this.handleTimeAndDate}\r\n                  ></input>\r\n                </div>\r\n              </div>\r\n              <div className=\"directPathBox\">\r\n                <label className=\"inputFieldDiv\">\r\n                  <input\r\n                    type=\"checkbox\"\r\n                    id=\"directPath\"\r\n                    onChange={this.getOptions}\r\n                  ></input>\r\n                  Pouze přímý spoj\r\n                </label>\r\n              </div>\r\n            </div>\r\n            <div\r\n              className=\"contextOptionsSettings\"\r\n              id=\"options-box-parameters\"\r\n              display=\"none\"\r\n            >\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"travel_type\"\r\n                  className=\"route\"\r\n                  id=\"normal\"\r\n                  defaultChecked\r\n                ></input>\r\n                <img src={normal_icon} alt=\"n\"></img>\r\n                <label htmlFor=\"normal\" className=\"travel_type\">\r\n                  Normální\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"travel_type\"\r\n                  className=\"route\"\r\n                  id=\"work\"\r\n                ></input>\r\n                <label htmlFor=\"work\" className=\"travel_type\">\r\n                  <img src={work_icon} alt=\"n\"></img>Do práce\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"travel_type\"\r\n                  className=\"route\"\r\n                  id=\"school\"\r\n                ></input>\r\n                <img src={school_icon} alt=\"n\"></img>\r\n                <label htmlFor=\"school\" className=\"travel_type\">\r\n                  Do školy\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"travel_type\"\r\n                  className=\"route\"\r\n                  id=\"doctor\"\r\n                ></input>\r\n                <img src={doctor_icon} alt=\"n\"></img>\r\n                <label htmlFor=\"doctor\" className=\"travel_type\">\r\n                  Za lékařem\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"travel_type\"\r\n                  className=\"route\"\r\n                  id=\"freetime\"\r\n                ></input>\r\n                <img src={freetime_icon} alt=\"n\"></img>\r\n                <label htmlFor=\"freetime\" className=\"travel_type\">\r\n                  Rekreace\r\n                </label>\r\n              </label>\r\n            </div>\r\n            <div\r\n              className=\"contextOptionsSettings\"\r\n              id=\"options-box-transport\"\r\n              display=\"none\"\r\n            >\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Metro\"\r\n                  defaultChecked\r\n                ></input>\r\n\r\n                <label className=\"meansLabel\" htmlFor=\"Metro\">\r\n                  Metro\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Tramway\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Tramway\">\r\n                  Tramvaj\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Bus\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Bus\">\r\n                  Autobus\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Train\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Train\">\r\n                  Příměstský vlak\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Funicular\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Funicular\">\r\n                  Lanovka\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Ferry\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Ferry\">\r\n                  Přívoz\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Car\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Car\">\r\n                  Osobní automobil\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Bike\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Bike\">\r\n                  Kolo nebo koloběžka\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"checkbox\"\r\n                  className=\"means\"\r\n                  id=\"Shared\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label className=\"meansLabel\" htmlFor=\"Shared\">\r\n                  Sdílené kolo nebo koloběžka\r\n                </label>\r\n              </label>\r\n            </div>\r\n            <div\r\n              className=\"contextOptionsSettings\"\r\n              id=\"options-box-access\"\r\n              display=\"none\"\r\n            >\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"special\"\r\n                  className=\"traveler_type\"\r\n                  id=\"standard\"\r\n                  defaultChecked\r\n                ></input>\r\n                <label htmlFor=\"standard\" className=\"access\">\r\n                  Nemám omezení\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"special\"\r\n                  className=\"traveler_type\"\r\n                  id=\"slow_walker\"\r\n                ></input>\r\n                <label htmlFor=\"slow_walker\" className=\"access\">\r\n                  Cestuji s kočárkem\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"special\"\r\n                  className=\"traveler_type\"\r\n                  id=\"wheelchair\"\r\n                ></input>\r\n                <label htmlFor=\"wheelchair\" className=\"access\">\r\n                  Cestuji s vozíčkem\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"special\"\r\n                  className=\"traveler_type\"\r\n                  id=\"luggage\"\r\n                ></input>\r\n                <label htmlFor=\"luggage\" className=\"access\">\r\n                  Cestuji s těžkými zavazadly\r\n                </label>\r\n              </label>\r\n              <label className=\"outline\">\r\n                <input\r\n                  type=\"radio\"\r\n                  name=\"special\"\r\n                  className=\"traveler_type\"\r\n                  id=\"cyclist\"\r\n                ></input>\r\n                <label htmlFor=\"cyclist\" className=\"access\">\r\n                  Cestuji s kolem/koloběžkou\r\n                </label>\r\n              </label>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        <div className=\"submitBox\">\r\n          <SelectApi setApi={this.setApi}></SelectApi>\r\n          <input\r\n            type=\"submit\"\r\n            value=\"Vyhledat spojení\"\r\n            title=\"Vyhledat spoj dle zadaných hodnot\"\r\n          ></input>\r\n        </div>\r\n      </form>\r\n    );\r\n  }\r\n}\r\nexport default PlannerContextPID;\r\n","import React from \"react\";\r\nimport { Redirect } from \"react-router-dom\";\r\nimport Map from \"./Map\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PlannerContextPID from \"../api/PlannerContextPID\";\r\n\r\n/**\r\n * Komponenta kontextového wizardu, která je komunikátorem mezi vyhledávačem (komponenta PlannerContextPID) a jádrem aplikace (komponenta App).\r\n * Je zodpovědná za vykreslení stránky včetně headeru a footeru a následný přesun na stránku s výsledky, když dojde k vyhledání.\r\n */\r\nclass PlannerContext extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    /** State komponenty\r\n     * ready - určuje zda je aplikace připravena k zobrazení výsledků\r\n     */\r\n    this.state = {\r\n      ready: false\r\n    };\r\n    //refs\r\n    this.map = React.createRef();\r\n    //bindings\r\n    this.setApi = this.setApi.bind(this);\r\n    this.getStart = this.getStart.bind(this);\r\n    this.getVia = this.getVia.bind(this);\r\n    this.getEnd = this.getEnd.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.getTimeAndDate = this.getTimeAndDate.bind(this);\r\n    this.setReady = this.setReady.bind(this);\r\n    this.getStartStopPointId = this.getStartStopPointId.bind(this);\r\n    this.getViaStopPointId = this.getViaStopPointId.bind(this);\r\n    this.getEndStopPointId = this.getEndStopPointId.bind(this);\r\n  }\r\n\r\n  /** Následující komponenty slouží ke komunikaci s jádrem aplikace a vyhledávačem.\r\n   * Přesouvají data z vyšší vrstvy (vyhledávač) do vrstvy nižší (jádro)\r\n   **/\r\n  setApi(selectedApi) {\r\n    this.props.writeApi(selectedApi);\r\n  }\r\n\r\n  getStart(start) {\r\n    this.props.writeStart(start);\r\n  }\r\n\r\n  getVia(via) {\r\n    this.props.writeVia(via);\r\n  }\r\n\r\n  getEnd(end) {\r\n    this.props.writeEnd(end);\r\n  }\r\n\r\n  getStartStopPointId(place) {\r\n    this.props.writeStartId(place);\r\n  }\r\n  getViaStopPointId(place) {\r\n    this.props.writeViaId(place);\r\n  }\r\n  getEndStopPointId(place) {\r\n    this.props.writeEndId(place);\r\n  }\r\n\r\n  getOptions(options) {\r\n    this.props.writeOptions(options);\r\n  }\r\n\r\n  getTimeAndDate(timedate) {\r\n    this.props.writeTimeAndDate(timedate);\r\n  }\r\n\r\n  /** Metoda nastavujicí připravenost aplikace k vyhledání\r\n   * Pokud je state ready true, dojde k přesunu z vyhledávače na stránku s výsledky.\r\n   */\r\n  setReady(bool) {\r\n    this.setState({ ready: bool });\r\n  }\r\n\r\n  /**\r\n   * Renderovací metoda která udržuje obsahuje header, footer a vyhledávač aplikace.\r\n   * Každému vyhledávači (komponentě PlannerContextPID) jsou předány props jako odkazy na metody této komponenty,\r\n   * které pak využívají pro přesun dat níže (do této komponenty).\r\n   * \r\n   * Při změně state ready v této komponentě dojde na redirect na výsledky.\r\n   */\r\n  render() {\r\n    if (this.state.ready) {\r\n      return <Redirect to=\"/wizard_result\"></Redirect>;\r\n    } else {\r\n      return (\r\n        <React.Fragment>\r\n          <Header></Header>\r\n          <main className=\"journey-planner\">\r\n            <section className=\"planner\">\r\n              <PlannerContextPID\r\n                start={this.getStart}\r\n                via={this.getVia}\r\n                end={this.getEnd}\r\n                startId={this.getStartStopPointId}\r\n                viaId={this.getViaStopPointId}\r\n                endId={this.getEndStopPointId}\r\n                timedate={this.getTimeAndDate}\r\n                ready={this.setReady}\r\n                planner={this.props.planner}\r\n                setApi={this.setApi}\r\n                getOptions={this.getOptions}\r\n              ></PlannerContextPID>\r\n            </section>\r\n            <Map ref={this.map}></Map>\r\n          </main>\r\n          <Footer></Footer>\r\n        </React.Fragment>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default PlannerContext;\r\n","import React from \"react\";\r\nimport Map from \"./Map\";\r\nimport Header from \"./Header\";\r\nimport Footer from \"./Footer\";\r\nimport PlannerContextPID from \"../api/PlannerContextPID\";\r\nimport walker_icon from \"../../assets/Walker.png\";\r\nimport transfer_icon from \"../../assets/Transfer.png\";\r\nimport next_icon from \"../../assets/Next.png\";\r\nimport waiting_icon from \"../../assets/Waiting.png\";\r\nimport car_icon from \"../../assets/Car.png\";\r\nimport bike_icon from \"../../assets/Bike.png\";\r\n\r\nclass ResultContext extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    //state\r\n    this.state = {\r\n      ready: false,\r\n      results: [],\r\n      updateResults: false,\r\n      startId: \"no_point\",\r\n      viaId: \"no_point\",\r\n      endId: \"no_point\",\r\n      selectedResult: \"\",\r\n    };\r\n    //refs\r\n    this.map = React.createRef();\r\n    this.resultRef = React.createRef();\r\n    //bindings\r\n    this.getStart = this.getStart.bind(this);\r\n    this.getVia = this.getVia.bind(this);\r\n    this.getEnd = this.getEnd.bind(this);\r\n    this.getStartStopPointId = this.getStartStopPointId.bind(this);\r\n    this.getViaStopPointId = this.getViaStopPointId.bind(this);\r\n    this.getEndStopPointId = this.getEndStopPointId.bind(this);\r\n    this.getTimeAndDate = this.getTimeAndDate.bind(this);\r\n    this.processOptions = this.processOptions.bind(this);\r\n    this.getOptions = this.getOptions.bind(this);\r\n    this.setApi = this.setApi.bind(this);\r\n    this.setReady = this.setReady.bind(this);\r\n    this.setInputValues = this.setInputValues.bind(this);\r\n    this.createResultItem = this.createResultItem.bind(this);\r\n    this.createResultItemMM = this.createResultItemMM.bind(this);\r\n    this.renderResults = this.renderResults.bind(this);\r\n    this.updateResults = this.updateResults.bind(this);\r\n    this.drawJourney = this.drawJourney.bind(this);\r\n    this.drawStartPoint = this.drawStartPoint.bind(this);\r\n    this.drawViaPoint = this.drawViaPoint.bind(this);\r\n    this.drawEndPoint = this.drawEndPoint.bind(this);\r\n    this.fetchData = this.fetchData.bind(this);\r\n    this.sendRequestPid = this.sendRequestPid.bind(this);\r\n    this.sendRequestMM = this.sendRequestMM.bind(this);\r\n    this.showJourneyDetails = this.showJourneyDetails.bind(this);\r\n  }\r\n\r\n  getStart(start) {\r\n    this.props.writeStart(start);\r\n  }\r\n\r\n  getVia(via) {\r\n    this.props.writeVia(via);\r\n  }\r\n\r\n  getEnd(end) {\r\n    this.props.writeEnd(end);\r\n  }\r\n\r\n  getStartStopPointId(place) {\r\n    this.props.writeStartId(place);\r\n  }\r\n  getViaStopPointId(place) {\r\n    this.props.writeViaId(place);\r\n  }\r\n  getEndStopPointId(place) {\r\n    this.props.writeEndId(place);\r\n  }\r\n\r\n  getTimeAndDate(timedate) {\r\n    this.props.writeTimeAndDate(timedate);\r\n  }\r\n\r\n  getOptions(options) {\r\n    this.props.writeOptions(options);\r\n  }\r\n\r\n  setApi(api) {\r\n    this.props.writeApi(api)\r\n  }\r\n\r\n  setReady(bool) {\r\n    this.setState({ ready: bool });\r\n  }\r\n\r\n  setInputValues() {\r\n    var from = document.getElementById(\"input_from\");\r\n    var via = document.getElementById(\"input_via\");\r\n    var to = document.getElementById(\"input_to\");\r\n    from.value = this.props.planner.start;\r\n    this.props.planner.via === null\r\n      ? (via.value = \"\")\r\n      : (via.value = this.props.planner.via);\r\n    to.value = this.props.planner.end;\r\n  }\r\n\r\n  checkSearch() {\r\n    if (this.props.planner.start.length === 0) {\r\n      return \"\";\r\n    } else {\r\n      return \" >>> \";\r\n    }\r\n  }\r\n\r\n  checkViaRoute() {\r\n    if (this.props.planner.via.length >= 1) {\r\n      return \" přes \";\r\n    } else {\r\n      return \"\";\r\n    }\r\n  }\r\n\r\n  checkResults() {\r\n    if (this.state.results !== undefined) {\r\n      switch (this.state.results.length) {\r\n        case 0:\r\n          return \"\";\r\n        case 1:\r\n          return \" --- nalezen 1 výsledek\";\r\n        case 2:\r\n        case 3:\r\n        case 4:\r\n          return \" --- nalezeny \" + this.state.results.length + \" výsledky\";\r\n        default:\r\n          return \" --- nalezeno \" + this.state.results.length + \" výsledků\";\r\n      }\r\n    } else {\r\n      return \" nebyl nalezen žádný výsledek, zvolte prosím jiné zadání.\"\r\n    }\r\n  }\r\n\r\n  drawStartPoint(place) {\r\n    if (place.length >= 1) {\r\n      let query = place;\r\n      var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n      var headers = new Headers();\r\n      headers.set(\r\n        \"Authorization\",\r\n        \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n      );\r\n      fetch(url, { method: \"GET\", headers: headers })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          var query = json;\r\n          if (query.places !== null && query.places !== undefined) {\r\n            console.log(query);\r\n            for (let i = 0; i < query.places.length; i++) {\r\n              console.log(\"test\");\r\n              if (query.places[i].embedded_type === \"stop_area\") {\r\n                this.map.current.addMarker(\r\n                  query.places[i].stop_area.coord.lon,\r\n                  query.places[i].stop_area.coord.lat,\r\n                  0,\r\n                  place\r\n                );\r\n                this.map.current.clearTransferPopups();\r\n                this.setState({ startId: query.places[i].id });\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"Nothing\");\r\n          }\r\n        });\r\n    } else {\r\n      //console.log(\"Start Point empty - no marker added.\");\r\n    }\r\n  }\r\n\r\n  drawViaPoint(place, viaOn) {\r\n    if (viaOn) {\r\n      //console.log(\"Add\");\r\n      if (place.length >= 1) {\r\n        let query = place;\r\n        var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n        var headers = new Headers();\r\n        headers.set(\r\n          \"Authorization\",\r\n          \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n        );\r\n        fetch(url, { method: \"GET\", headers: headers })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            if (query.places !== null && query.places !== undefined) {\r\n              console.log(query);\r\n              for (let i = 0; i < query.places.length; i++) {\r\n                console.log(\"test\");\r\n                if (query.places[i].embedded_type === \"stop_area\") {\r\n                  this.map.current.addMarker(\r\n                    query.places[i].stop_area.coord.lon,\r\n                    query.places[i].stop_area.coord.lat,\r\n                    1,\r\n                    place\r\n                  );\r\n                  this.setState({ viaId: query.places[i].id });\r\n                  break;\r\n                }\r\n              }\r\n            } else {\r\n              console.log(\"Nothing\");\r\n            }\r\n          });\r\n      } else {\r\n        //console.log(\"Via Point empty - no marker added.\");\r\n      }\r\n    } else {\r\n      //console.log(\"Not Add\");\r\n      this.map.current.addMarker(\"\", \"\", 3);\r\n    }\r\n  }\r\n\r\n  drawEndPoint(place) {\r\n    if (place.length >= 1) {\r\n      let query = place;\r\n      var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + query;\r\n      var headers = new Headers();\r\n      headers.set(\r\n        \"Authorization\",\r\n        \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n      );\r\n      fetch(url, { method: \"GET\", headers: headers })\r\n        .then(response => response.json())\r\n        .then(json => {\r\n          var query = json;\r\n          if (query.places !== null && query.places !== undefined) {\r\n            console.log(query);\r\n            for (let i = 0; i < query.places.length; i++) {\r\n              console.log(\"test\");\r\n              if (query.places[i].embedded_type === \"stop_area\") {\r\n                this.map.current.addMarker(\r\n                  query.places[i].stop_area.coord.lon,\r\n                  query.places[i].stop_area.coord.lat,\r\n                  2,\r\n                  place\r\n                );\r\n                this.setState({ endId: query.places[i].id });\r\n                break;\r\n              }\r\n            }\r\n          } else {\r\n            console.log(\"Nothing\");\r\n          }\r\n        });\r\n    } else {\r\n      //console.log(\"End Point empty - no marker added.\");\r\n    }\r\n  }\r\n\r\n\r\n  processOptions(options) {\r\n    console.log(\"Process:\")\r\n    var value = 0;\r\n    var parameters = options;\r\n    var initialVal = 0;\r\n    console.log(\"travel_type = \"+parameters.travel_type);\r\n    switch (parameters.travel_type) {\r\n      case \"normal\":\r\n        initialVal = 0.8;\r\n        break;\r\n      case \"work\":\r\n        initialVal = 0.5;\r\n        break;\r\n      case \"school\":\r\n        initialVal = 0.5;\r\n        break;\r\n      case \"doctor\":\r\n        initialVal = 0.45;\r\n        break;\r\n      case \"freetime\":\r\n        initialVal = 0.85;\r\n        break;\r\n      default:\r\n        initialVal = 1;\r\n    }\r\n    console.log(initialVal)\r\n    value = initialVal;\r\n    \r\n    // Alternate the value based on rest of user input\r\n\r\n    switch (parameters.special) {\r\n      case \"standard\":\r\n        value *= 1;\r\n        break;\r\n      case \"slow_walker\":\r\n          value *= 0.5;\r\n          break;\r\n      case \"wheelchair\":\r\n        value *= 0.3;\r\n        break;\r\n      case \"luggage\":\r\n        value *= 0.5;\r\n        break;\r\n      case \"cyclist\":\r\n        value *= 0.8;\r\n        break;\r\n      default:\r\n        value = 1;\r\n    }\r\n\r\n    console.log(value);\r\n\r\n    return value;\r\n  }\r\n\r\n\r\n  fetchData() {\r\n    console.log(this.state.startId);\r\n    var start = this.props.planner.start;\r\n    var end = this.props.planner.end;\r\n    var via = this.props.planner.via;\r\n    var options = this.props.planner.options;\r\n    var api = this.props.planner.api;\r\n    console.log(\"fetch:\");\r\n    console.log(options.directPath)\r\n    console.log(options.travel_type);\r\n    console.log(options.means);\r\n    console.log(options.special);\r\n    console.log(options.weather)\r\n    //options breakdown\r\n    var searchValue = this.processOptions(options);\r\n    console.log(searchValue)\r\n\r\n    switch(api) {\r\n      case \"pid\":\r\n        this.sendRequestPid(start, end, via, options);\r\n        break;\r\n      case \"mmplanner\":\r\n        this.sendRequestMM(start, end, via, options);\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n    \r\n  }\r\n\r\n  sendRequestPid(start, end, via, options) {\r\n    var url =\r\n      \"https://api.navitia.io/v1/coverage/cz/journeys?from=\" +\r\n      this.props.planner.startId +\r\n      \"&to=\" +\r\n      this.props.planner.endId +\r\n      \"&datetime=\" +\r\n      this.props.planner.timedate +\r\n      \"&min_nb_journeys=3\";\r\n\r\n    if (options.directPath) {\r\n      url += \"&max_nb_transfers=0\";\r\n    } else {\r\n      url += \"&max_nb_transfers=\" + 4;\r\n    }\r\n\r\n    // Check for means\r\n    if (options.fastestRoute) {\r\n    }\r\n    if (options.lowWalkingRoute) {\r\n      url += \"&max_walking_duration_to_pt=360\";\r\n    }\r\n    if (options.transferDistance) {\r\n    }\r\n\r\n    if (\r\n      options !== undefined &&\r\n      options.travel_type !== undefined &&\r\n      options.means !== undefined &&\r\n      options.special !== undefined &&\r\n      options.weather !== undefined\r\n    ) {\r\n      if (options.travel_type === \"walker\") {\r\n        console.log(\"WALKER===\");\r\n        if (options.special.baby) {\r\n          url += \"&traveler_type=slow_walker\";\r\n        } else {\r\n          switch (options.timeToTransfer) {\r\n            case \"5\":\r\n              url += \"&traveler_type=fast_walker\";\r\n              break;\r\n            case \"15\":\r\n              url += \"&traveler_type=slow_walker\";\r\n              break;\r\n            default:\r\n              break;\r\n          }\r\n        }\r\n      } else if (options.travel_type === \"freetime\") {\r\n        \r\n        url += \"&traveler_type=cyclist\";\r\n      } else if (options.travel_type === \"normal\") {\r\n        console.log(\"x\")\r\n        if (options.means[\"Car\"] === true && (options.means[\"Bus\"] === false || options.means[\"Tramway\"] === false || options.means[\"Metro\"] === false)) {\r\n          console.log(\"y\")\r\n          url += \"&traveler_type=motorist\";\r\n        }\r\n        \r\n      } \r\n      if (options.special === \"wheelchair\") {\r\n        url += \"&traveler_type=wheelchair\";\r\n      } else if (options.special === \"luggage\") {\r\n        url += \"&traveler_type=luggage\";\r\n      }\r\n    }\r\n\r\n    if (via.length < 0) {\r\n      // via\r\n    } else {\r\n      console.log(url);\r\n      if (start.length >= 1 && end.length >= 1) {\r\n        //console.log(url);\r\n        //console.log(this.props.planner.timedate);\r\n        //url = \"https://api.navitia.io/v1/coverage/cz/journeys?from=stop_area%3AOCZPRA%3ANavitia%3AU130Z1P&to=stop_area%3AOCZPRA%3AU237S1&datetime=20191217T162700&\";\r\n        var headers = new Headers();\r\n        headers.set(\r\n          \"Authorization\",\r\n          \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\r\n        );\r\n        fetch(url, { method: \"GET\", headers: headers })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            console.log(\"Query:\")\r\n            console.log(query);\r\n            this.setState({ results: query.journeys }, () => {\r\n              let resdiv = document.getElementById(\"results\");\r\n              let resitem = resdiv.lastElementChild;\r\n              while (resitem) {\r\n                resdiv.removeChild(resitem);\r\n                resitem = resdiv.lastElementChild;\r\n              }\r\n              \r\n              this.renderResults();\r\n              console.log(query.journeys);\r\n            });\r\n          });\r\n      } else {\r\n        console.log(\"no fetch\");\r\n      }\r\n    }\r\n  }\r\n\r\n  sendRequestMM() {\r\n    var mmUrl = \"http://localhost:8125/api/findRoutes?maxDate=2020-04-28T14:30:00\";\r\n    fetch(mmUrl, { method: \"GET\" })\r\n          .then(response => response.json())\r\n          .then(json => {\r\n            var query = json;\r\n            console.log(\"Query MM:\")\r\n            console.log(query);\r\n            this.setState({ results: query.data.routes }, () => {\r\n              let resdiv = document.getElementById(\"results\");\r\n              let resitem = resdiv.lastElementChild;\r\n              while (resitem) {\r\n                resdiv.removeChild(resitem);\r\n                resitem = resdiv.lastElementChild;\r\n              }\r\n              console.log(\"mm render now\")\r\n              this.renderResults();\r\n              console.log(query.data.routes);\r\n            })\r\n          });\r\n  }\r\n\r\n  componentDidMount() {\r\n    //console.log(\"=======================================\");\r\n    this.setInputValues();\r\n    this.drawStartPoint(this.props.planner.start);\r\n    this.drawViaPoint(this.props.planner.via, true);\r\n    this.drawEndPoint(this.props.planner.end);\r\n    this.fetchData();\r\n    //console.log(\"results:\");\r\n    //console.log(this.state.results);\r\n    this.renderResults();\r\n    if (this.state.updateResults) {\r\n      this.updateResults();\r\n    }\r\n  }\r\n\r\n  updateResults() {\r\n    this.drawStartPoint(this.props.planner.start);\r\n    this.props.planner.via.length >= 1\r\n      ? this.drawViaPoint(this.props.planner.via, true)\r\n      : this.drawViaPoint(this.props.planner.via, false);\r\n    this.drawEndPoint(this.props.planner.end);\r\n    this.fetchData();\r\n    this.map.current.clearPath();\r\n  }\r\n\r\n  drawJourney(e) {\r\n    var result_id = e.target.getAttribute(\"result_id\");\r\n    var sections = this.state.results[result_id].sections;\r\n    var routeCoords = [];\r\n    var colors = [];\r\n    var transferCoords = [];\r\n    if (this.state.selectedResult.style !== undefined) {\r\n      this.state.selectedResult.setAttribute(\"selectedResult\", \"false\");\r\n    }\r\n    var possibleResults = document.getElementsByClassName(\"result_item\");\r\n    this.setState({ selectedResult: possibleResults[result_id] });\r\n    possibleResults[result_id].setAttribute(\"selectedResult\", \"true\");\r\n    for (let i = 0; i < sections.length; i++) {\r\n      if (sections[i].geojson !== undefined) {\r\n        routeCoords.push(sections[i].geojson.coordinates);\r\n        if (sections[i].type === \"public_transport\") {\r\n          let color = \"#\" + sections[i].display_informations.color;\r\n          colors.push(color);\r\n        } else if (\r\n          sections[i].type === \"transfer\" ||\r\n          sections[i].type === \"street_network\" ||\r\n          sections[i].type === \"crow_fly\"\r\n        ) {\r\n          if (sections[i].type === \"transfer\") {\r\n            transferCoords.push(\r\n              sections[i].geojson.coordinates[\r\n                sections[i].geojson.coordinates.length - 1\r\n              ]\r\n            );\r\n          }\r\n          colors.push(process.env.REACT_APP_COLOR_WALKING);\r\n        } else if (sections[i].mode === \"bike\") {\r\n          transferCoords.push(\r\n            sections[i].geojson.coordinates[\r\n              sections[i].geojson.coordinates.length - 1\r\n            ]\r\n          );\r\n          colors.push(process.env.REACT_APP_COLOR_BIKE);\r\n        } else if (sections[i].mode === \"car\") {\r\n          transferCoords.push(\r\n            sections[i].geojson.coordinates[\r\n              sections[i].geojson.coordinates.length - 1\r\n            ]\r\n          );\r\n          colors.push(process.env.REACT_APP_COLOR_CAR);\r\n        }\r\n      }\r\n    }\r\n    if (transferCoords.length > 0) {\r\n      this.map.current.addTransferPopup(transferCoords);\r\n    } else {\r\n      this.map.current.clearTransferPopups();\r\n    }\r\n    this.map.current.clearPath();\r\n    this.map.current.addPath(routeCoords, routeCoords.length, colors);\r\n  }\r\n\r\n  createResultItem(data, id) {\r\n    var resultItem = document.createElement(\"p\");\r\n    resultItem.className = \"result_item\";\r\n    resultItem.setAttribute(\"result_id\", id);\r\n    resultItem.setAttribute(\"id\", \"result_item\" + id);\r\n    resultItem.setAttribute(\"selectedResult\", \"false\");\r\n    var deparr = document.createTextNode(\r\n      \"Odjezd: \" +\r\n        data.departure_date_time.substr(9, 2) +\r\n        \":\" +\r\n        data.departure_date_time.substr(11, 2) +\r\n        \" >> Příjezd: \" +\r\n        data.arrival_date_time.substr(9, 2) +\r\n        \":\" +\r\n        data.arrival_date_time.substr(11, 2)\r\n    );\r\n    resultItem.appendChild(deparr);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var duration = document.createTextNode(\r\n      \"Trvání: \" + Math.round(data.duration / 60) + \" minut\"\r\n    );\r\n    resultItem.appendChild(duration);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var means = [];\r\n    // Excluded means\r\n    var excludedMeans = []\r\n    for (var mean in this.props.planner.options.means) {\r\n      if (this.props.planner.options.means[mean] === false) {\r\n        excludedMeans.push(mean)\r\n      }\r\n    }\r\n    var exclude = false;\r\n    // Adding actual results\r\n    for (let i = 0; i < data.sections.length; i++) {\r\n      var type = data.sections[i].type;\r\n      if (type === \"street_network\" || type === \"crow_fly\") {\r\n        if (data.sections[i].mode === \"bike\") {\r\n          for (let i = 0; i < excludedMeans.length; i++) {\r\n            if (excludedMeans[i] === \"Bike\") { exclude = true};\r\n          }\r\n          var bike = document.createElement(\"img\");\r\n          bike.src = bike_icon;\r\n          bike.setAttribute(\"result_id\", id);\r\n          means.push(bike);\r\n        } else if (data.sections[i].mode === \"car\") {\r\n          for (let i = 0; i < excludedMeans.length; i++) {\r\n            if (excludedMeans[i] === \"Bike\") { exclude = true};\r\n          }\r\n          var car = document.createElement(\"img\");\r\n          car.src = car_icon;\r\n          car.setAttribute(\"result_id\", id);\r\n          means.push(car);\r\n        } else {\r\n          var walker = document.createElement(\"img\");\r\n          walker.src = walker_icon;\r\n          walker.setAttribute(\"result_id\", id);\r\n          means.push(walker);\r\n        }\r\n        if (i === 0) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n      if (type === \"waiting\" && data.sections[i - 1].type !== \"transfer\") {\r\n        var waiting = document.createElement(\"img\");\r\n        waiting.src = waiting_icon;\r\n        waiting.setAttribute(\"result_id\", id);\r\n        means.push(waiting);\r\n      }\r\n      if (type === \"public_transport\") {\r\n        var vehicle = document.createElement(\"p\");\r\n        vehicle.setAttribute(\"result_id\", id);\r\n        if (data.sections[i].display_informations.commercial_mode === \"Metro\") {\r\n          vehicle.className = data.sections[i].display_informations.code;\r\n        } else {\r\n          vehicle.className =\r\n            data.sections[i].display_informations.commercial_mode;\r\n        }\r\n        vehicle.innerHTML = data.sections[i].display_informations.code;\r\n        means.push(vehicle);\r\n      }\r\n      if (type === \"transfer\") {\r\n        var transfer = document.createElement(\"img\");\r\n        transfer.src = transfer_icon;\r\n        transfer.setAttribute(\"result_id\", id);\r\n        means.push(transfer);\r\n        continue;\r\n      }\r\n      if (i !== data.sections.length - 1 && i !== 0) {\r\n        if (\r\n          data.sections[i - 1].type !== \"transfer\" &&\r\n          data.sections[i + 1].type !== \"transfer\"\r\n        ) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n    }\r\n\r\n    var journey = document.createElement(\"label\");\r\n    journey.setAttribute(\"result_id\", id);\r\n    journey.className = \"journeyMeans\";\r\n    for (let l = 0; l < means.length; l++) {\r\n      journey.appendChild(means[l]);\r\n    }\r\n\r\n    var detailsBtn = document.createElement(\"a\");\r\n    detailsBtn.className = \"detailsBtn\";\r\n    detailsBtn.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    detailsBtn.innerHTML = \"Detaily spojení\";\r\n    detailsBtn.addEventListener(\"click\", this.showJourneyDetails);\r\n    var details = document.createElement(\"div\");\r\n    details.className = \"details\";\r\n    details.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    details.style.display = \"none\";\r\n    var guide = \"\";\r\n    if (data.sections !== undefined) {\r\n      for (let i = 0; i < data.sections.length; i++) {\r\n        var section = data.sections[i];\r\n        if (i < data.sections.length - 1) {\r\n          if (section.type === \"crow_fly\") {\r\n            guide +=\r\n              \"<label>Přesun na zastávku \" + section.to.name + \"</label></br>\";\r\n          } else if (section.type === \"public_transport\") {\r\n            guide +=\r\n              \"<label>Nastupte do \" +\r\n              section.display_informations.commercial_mode +\r\n              \" linky \" +\r\n              section.display_informations.code +\r\n              \" a pokračujte na zástávku \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"transfer\") {\r\n            guide +=\r\n              \"<label>Následuje přestup na zastávce \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"waiting\") {\r\n            if (i + 1 !== data.sections.length) {\r\n              guide +=\r\n                \"<label>Vyčkejte příjezdu spoje \" +\r\n                data.sections[i + 1].display_informations.commercial_mode +\r\n                \" linky \" +\r\n                data.sections[i + 1].display_informations.code +\r\n                \"</label></br>\";\r\n            }\r\n          } else if (section.type === \"street_network\") {\r\n            guide +=\r\n              \"<label>Dojeďte na zastávku \" + section.to.name + \"</label></br>\";\r\n          }\r\n        } else {\r\n          guide +=\r\n            \"<label>Vystupte na zastávce \" + section.to.name + \"</label></br>\";\r\n        }\r\n      }\r\n    }\r\n    details.innerHTML =\r\n      \"<label><b>Pokyny pro navigaci trasou</b></label></br>\" + guide;\r\n\r\n    resultItem.appendChild(journey);\r\n    resultItem.addEventListener(\"click\", this.drawJourney);\r\n    resultItem.appendChild(detailsBtn);\r\n    resultItem.appendChild(details);\r\n    console.log(resultItem)\r\n    if (!exclude) {\r\n      return resultItem;\r\n    } else { return null; }\r\n  }\r\n\r\n  createResultItemMM(data, id) {\r\n    var resultItem = document.createElement(\"p\");\r\n    resultItem.className = \"result_item\";\r\n    resultItem.setAttribute(\"result_id\", id);\r\n    resultItem.setAttribute(\"id\", \"result_item\" + id);\r\n    resultItem.setAttribute(\"selectedResult\", \"false\");\r\n    var deparr = document.createTextNode(\r\n      \"Odjezd: \" +\r\n        data.fromTime.substr(11, 2) +\r\n        \":\" +\r\n        data.fromTime.substr(14, 2) +\r\n        \" >> Příjezd: \" +\r\n        data.toTime.substr(11, 2) +\r\n        \":\" +\r\n        data.toTime.substr(14, 2)\r\n    );\r\n    resultItem.appendChild(deparr);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var duration = document.createTextNode(\r\n      //vzdálenost dělena průměrnou rychlostí MHD (26km/h) při rychlosti m/min\r\n      \"Trvání: \" + Math.round(data.totalDistance / 433) + \" minut\"\r\n    );\r\n    resultItem.appendChild(duration);\r\n    resultItem.appendChild(document.createElement(\"br\"));\r\n    var means = [];\r\n    // Excluded means\r\n    var excludedMeans = []\r\n    for (var mean in this.props.planner.options.means) {\r\n      if (this.props.planner.options.means[mean] === false) {\r\n        excludedMeans.push(mean)\r\n      }\r\n    }\r\n    var exclude = false;\r\n    // Adding actual results\r\n    for (let i = 0; i < data.segments.length; i++) {\r\n      var type = data.segments[i].type;\r\n      if (type === \"WALK\") {\r\n        if (data.segments[i].mode === \"bike\") {\r\n          for (let i = 0; i < excludedMeans.length; i++) {\r\n            if (excludedMeans[i] === \"Bike\") { exclude = true};\r\n          }\r\n          var bike = document.createElement(\"img\");\r\n          bike.src = bike_icon;\r\n          bike.setAttribute(\"result_id\", id);\r\n          means.push(bike);\r\n        } else if (data.segments[i].mode === \"car\") {\r\n          var car = document.createElement(\"img\");\r\n          car.src = car_icon;\r\n          car.setAttribute(\"result_id\", id);\r\n          means.push(car);\r\n        } else {\r\n          var walker = document.createElement(\"img\");\r\n          walker.src = walker_icon;\r\n          walker.setAttribute(\"result_id\", id);\r\n          means.push(walker);\r\n        }\r\n        if (i === 0) {\r\n          let next = document.createElement(\"img\");\r\n          next.src = next_icon;\r\n          next.setAttribute(\"result_id\", id);\r\n          means.push(next);\r\n        }\r\n      }\r\n      if (type === \"WAIT\") {\r\n        var waiting = document.createElement(\"img\");\r\n        waiting.src = waiting_icon;\r\n        waiting.setAttribute(\"result_id\", id);\r\n        means.push(waiting);\r\n      }\r\n      if (type === \"public_transport\") {\r\n        var vehicle = document.createElement(\"p\");\r\n        vehicle.setAttribute(\"result_id\", id);\r\n        if (data.segments[i].display_informations.commercial_mode === \"Metro\") {\r\n          vehicle.className = data.segments[i].display_informations.code;\r\n        } else {\r\n          vehicle.className =\r\n            data.segments[i].display_informations.commercial_mode;\r\n        }\r\n        vehicle.innerHTML = data.segments[i].display_informations.code;\r\n        means.push(vehicle);\r\n      }\r\n      if (type === \"transfer\") {\r\n        var transfer = document.createElement(\"img\");\r\n        transfer.src = transfer_icon;\r\n        transfer.setAttribute(\"result_id\", id);\r\n        means.push(transfer);\r\n        continue;\r\n      }\r\n      \r\n    }\r\n\r\n    var journey = document.createElement(\"label\");\r\n    journey.setAttribute(\"result_id\", id);\r\n    journey.className = \"journeyMeans\";\r\n    for (let l = 0; l < means.length; l++) {\r\n      journey.appendChild(means[l]);\r\n    }\r\n\r\n    var detailsBtn = document.createElement(\"a\");\r\n    detailsBtn.className = \"detailsBtn\";\r\n    detailsBtn.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    detailsBtn.innerHTML = \"Detaily spojení\";\r\n    detailsBtn.addEventListener(\"click\", this.showJourneyDetails);\r\n    var details = document.createElement(\"div\");\r\n    details.className = \"details\";\r\n    details.setAttribute(\"result_id\", resultItem.getAttribute(\"result_id\"));\r\n    details.style.display = \"none\";\r\n    var guide = \"\";\r\n    if (data.sections !== undefined) {\r\n      for (let i = 0; i < data.sections.length; i++) {\r\n        var section = data.sections[i];\r\n        if (i < data.sections.length - 1) {\r\n          if (section.type === \"crow_fly\") {\r\n            guide +=\r\n              \"<label>Přesun na zastávku \" + section.to.name + \"</label></br>\";\r\n          } else if (section.type === \"public_transport\") {\r\n            guide +=\r\n              \"<label>Nastupte do \" +\r\n              section.display_informations.commercial_mode +\r\n              \" linky \" +\r\n              section.display_informations.code +\r\n              \" a pokračujte na zástávku \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"transfer\") {\r\n            guide +=\r\n              \"<label>Následuje přestup na zastávce \" +\r\n              section.to.name +\r\n              \"</label></br>\";\r\n          } else if (section.type === \"waiting\") {\r\n            if (i + 1 !== data.sections.length) {\r\n              guide +=\r\n                \"<label>Vyčkejte příjezdu spoje \" +\r\n                data.sections[i + 1].display_informations.commercial_mode +\r\n                \" linky \" +\r\n                data.sections[i + 1].display_informations.code +\r\n                \"</label></br>\";\r\n            }\r\n          } else if (section.type === \"street_network\") {\r\n            guide +=\r\n              \"<label>Dojeďte na zastávku \" + section.to.name + \"</label></br>\";\r\n          }\r\n        } else {\r\n          guide +=\r\n            \"<label>Vystupte na zastávce \" + section.to.name + \"</label></br>\";\r\n        }\r\n      }\r\n    }\r\n    details.innerHTML =\r\n      \"<label><b>Pokyny pro navigaci trasou</b></label></br>\" + guide;\r\n\r\n    resultItem.appendChild(journey);\r\n    resultItem.addEventListener(\"click\", this.drawJourney);\r\n    resultItem.appendChild(detailsBtn);\r\n    resultItem.appendChild(details);\r\n    console.log(resultItem)\r\n    if (!exclude) {\r\n      return resultItem;\r\n    } else { return null; }\r\n  }\r\n\r\n  showJourneyDetails(e) {\r\n    var detailId = e.target.getAttribute(\"result_id\");\r\n    var details = document.getElementsByClassName(\"details\");\r\n    for (let i = 0; i < details.length; i++) {\r\n      if (i !== detailId) {\r\n        details[i].style.display = \"none\";\r\n      }\r\n    }\r\n    if (details[detailId].style.display === \"none\") {\r\n      details[detailId].style.display = \"block\";\r\n    } else {\r\n      details[detailId].style.display = \"none\";\r\n    }\r\n  }\r\n\r\n  renderResults() {\r\n    let resdiv = document.getElementById(\"results\");\r\n    console.log(\"results state:\")\r\n    console.log(this.state.results)\r\n    if (this.state.results !== undefined) {\r\n    for (\r\n      let resultNumber = 0;\r\n      resultNumber < this.state.results.length;\r\n      resultNumber++\r\n    ) {\r\n      let label = document.createElement(\"label\");\r\n      label.setAttribute(\"for\", \"result_item\" + resultNumber);\r\n      var resultItem;\r\n      console.log(this.props.planner.api)\r\n      if (this.props.planner.api === \"mmplanner\") {\r\n        console.log(\"mm create\");\r\n        resultItem = this.createResultItemMM(\r\n          this.state.results[resultNumber],\r\n          resultNumber\r\n          );\r\n      } else {\r\n        resultItem = this.createResultItem(\r\n        this.state.results[resultNumber],\r\n        resultNumber\r\n        );\r\n      }\r\n      if (resultItem !== null) {label.appendChild(resultItem);}\r\n      resdiv.appendChild(label);\r\n    }\r\n  }\r\n  }\r\n\r\n\r\n  render() {\r\n    return (\r\n      <React.Fragment>\r\n        <Header></Header>\r\n        <main className=\"result_page\">\r\n          <section className=\"results\">\r\n            <div id=\"search\">\r\n              <PlannerContextPID\r\n                start={this.getStart}\r\n                via={this.getVia}\r\n                end={this.getEnd}\r\n                startId={this.getStartStopPointId}\r\n                viaId={this.getViaStopPointId}\r\n                endId={this.getEndStopPointId}\r\n                timedate={this.getTimeAndDate}\r\n                getOptions={this.getOptions}\r\n                setApi={this.setApi}\r\n                ready={this.setReady}\r\n                update={this.updateResults}\r\n                resultRef={this.resultRef}\r\n              ></PlannerContextPID>\r\n              <p>\r\n                <b>Pro trasu: </b>\r\n                {this.props.planner.start}\r\n                <b>{this.checkSearch()}</b>\r\n                {this.props.planner.end}\r\n                <b>{this.checkViaRoute()}</b>\r\n                {this.props.planner.via}\r\n                {this.checkResults()}\r\n              </p>\r\n            </div>\r\n            <div id=\"results\" ref={this.resultRef}></div>\r\n          </section>\r\n          <Map ref={this.map}></Map>\r\n        </main>\r\n        <Footer></Footer>\r\n      </React.Fragment>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ResultContext;\r\n","import React from \"react\";\nimport { Route, Switch } from \"react-router-dom\";\nimport \"../css/App.css\";\nimport Planner from \"./Planner\";\nimport PlannerWizard from \"./PlannerWizard\";\nimport Result from \"./Result\";\nimport ResultWizard from \"./ResultWizard\";\nimport PlannerContext from \"./PlannerContext\";\nimport ResultContext from \"./ResultContext\";\n\n/**\n * Hlavní komponenta aplikace. Udržuje v sobě parametry vyhledávání, které zadal uživatel. \n * Parametry si pak převezme komponenta Result, která uživateli vykreslí výsledky.\n * Komponenta obsahuje metody, které přijímají v argumentu data z komponent o úroveň výš.\n */\nclass App extends React.Component {\n  constructor(props) {\n    super(props);\n    /** Bindings, aby komponenta přistupovala ke svým provázaným metodám */\n    this.writeStart = this.writeStart.bind(this);\n    this.writeVia = this.writeVia.bind(this);\n    this.writeEnd = this.writeEnd.bind(this);\n    this.writeStartId = this.writeStartId.bind(this);\n    this.writeViaId = this.writeViaId.bind(this);\n    this.writeEndId = this.writeEndId.bind(this);\n    this.writeTimeAndDate = this.writeTimeAndDate.bind(this);\n    this.writeOptions = this.writeOptions.bind(this);\n    this.writeApi = this.writeApi.bind(this);\n    /** Vnitřní state komponenty */\n    this.state = {\n      start: \"\",\n      via: \"\",\n      end: \"\",\n      startId: undefined,\n      viaId: undefined,\n      endId: undefined,\n      timedate: \"\",\n      api: \"pid\",\n      options: \"\"\n    };\n  }\n\n  /** Zápis počáteční pozice vyhledávání do state */\n  writeStart(from) {\n    this.setState({ start: from });\n  }\n\n  /** Zápis průjezdní pozice vyhledávání do state */\n  writeVia(thru) {\n    this.setState({ via: thru });\n  }\n\n  /** Zápis koncové pozice vyhledávání do state */\n  writeEnd(to) {\n    this.setState({ end: to });\n  }\n\n  /** Požadavek na Navitia.io, který zapíše ID patřící vyhledávané stringové hodnotě počáteční pozice do state komponenty.\n   * V metodě je kontrola, aby šlo o zastávku a ne jiné místo.\n   */\n  writeStartId(place) {\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + place;\n    console.log(url);\n    var headers = new Headers();\n    headers.set(\n      \"Authorization\",\n      \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\n    );\n    fetch(url, { method: \"GET\", headers: headers })\n      .then(response => response.json())\n      .then(json => {\n        if (json.places !== undefined) {\n          for (let i = 0; i < json.places.length; i++) {\n            if (json.places[i].embedded_type === \"stop_area\") {\n              this.setState({ startId: json.places[i].id });\n              break;\n            }\n          }\n        }\n      });\n  }\n\n   /** Požadavek na Navitia.io, který zapíše ID patřící vyhledávané stringové hodnotě průjezdní pozice do state komponenty.\n   * V metodě je kontrola, aby šlo o zastávku a ne jiné místo.\n   */\n  writeViaId(place) {\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + place;\n    var headers = new Headers();\n    headers.set(\n      \"Authorization\",\n      \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\n    );\n    fetch(url, { method: \"GET\", headers: headers })\n      .then(response => response.json())\n      .then(json => {\n        if (json.places !== undefined) {\n          for (let i = 0; i < json.places.length; i++) {\n            if (json.places[i].embedded_type === \"stop_area\") {\n              this.setState({ viaId: json.places[i].id });\n              break;\n            }\n          }\n        }\n      });\n  }\n\n   /** Požadavek na Navitia.io, který zapíše ID patřící vyhledávané stringové hodnotě koncové pozice do state komponenty.\n   * V metodě je kontrola, aby šlo o zastávku a ne jiné místo.\n   */\n  writeEndId(place) {\n    var url = \"https://api.navitia.io/v1/coverage/cz/places?q=\" + place;\n    console.log(url);\n    var headers = new Headers();\n    headers.set(\n      \"Authorization\",\n      \"Basic \" + btoa(process.env.REACT_APP_NAVITIA_TOKEN)\n    );\n    fetch(url, { method: \"GET\", headers: headers })\n      .then(response => response.json())\n      .then(json => {\n        if (json.places !== undefined) {\n          for (let i = 0; i < json.places.length; i++) {\n            if (json.places[i].embedded_type === \"stop_area\") {\n              this.setState({ endId: json.places[i].id });\n              break;\n            }\n          }\n        }\n      });\n  }\n\n  /** Zápis času a data do state komponenty */\n  writeTimeAndDate(timedate) {\n    this.setState({ timedate: timedate });\n  }\n\n  /** Zápis nastavených parametrů do state */\n  writeOptions(options) {\n    this.setState({ options: options });\n  }\n\n  /** Zápis aktuálního API do state */\n  writeApi(api) {\n    this.setState({api: api})\n  }\n\n  /**\n   * Renderovací metoda která udržuje Router pro přechod mezi jednotlivými stránkami aplikace při změně URL.\n   * Každému vyhledávači/výsledku (komponentě) jsou předány props jako odkazy na metody této komponenty,\n   * které pak využívají pro přesun dat níže (do této komponenty)\n   */\n  render() {\n    return (\n      <Switch>\n        <Route\n          exact\n          path=\"/\"\n          render={props => (\n            <Planner\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n        <Route\n          path=\"/form\"\n          render={props => (\n            <Planner\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/form_result\"\n          render={props => (\n            <Result\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/old_wizard\"\n          render={props => (\n            <PlannerWizard\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/old_wizard_result\"\n          render={props => (\n            <ResultWizard\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/wizard\"\n          render={props => (\n            <PlannerContext\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n        <Route\n          exact\n          path=\"/wizard_result\"\n          render={props => (\n            <ResultContext\n              {...props}\n              writeStart={this.writeStart}\n              writeVia={this.writeVia}\n              writeEnd={this.writeEnd}\n              writeStartId={this.writeStartId}\n              writeViaId={this.writeViaId}\n              writeEndId={this.writeEndId}\n              writeTimeAndDate={this.writeTimeAndDate}\n              writeOptions={this.writeOptions}\n              writeApi={this.writeApi}\n              planner={this.state}\n            />\n          )}\n        />\n      \n      </Switch>);\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport { HashRouter as Router } from \"react-router-dom\";\nimport './index.css';\nimport App from \"./components/app/App\";\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Router><App /></Router>, document.getElementById('root'));\nserviceWorker.register();\n//serviceWorker.unregister();\n"],"sourceRoot":""}